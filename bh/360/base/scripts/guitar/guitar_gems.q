whammy_units_per_second = 6.3500004
prefretbar_time = 0.0
current_startup_script = nothing
current_exit_script = nothing
minimum_transition_load_time = 0.0
finished_gig_band_rebuild = 0
start_gem_scroller_running = 0
num_song_columns = 2
gem_colors = [
	green
	red
	yellow
	blue
	orange
	white
]
gem_colors_text = [
	'green'
	'red'
	'yellow'
	'blue'
	'orange'
	'white'
]
scripts_array = [
	{
		name = 'scripts'
		lead_ms = 0
	}
	{
		name = 'anim'
		lead_ms = 0
	}
	{
		name = 'cameras'
		lead_ms = 0
	}
	{
		name = 'lightshow'
		lead_ms = $lightshow_offset_ms
	}
	{
		name = 'crowd'
		lead_ms = 0
	}
	{
		name = 'performance'
		lead_ms = 0
	}
	{
		name = 'scriptevents'
		lead_ms = 0
	}
	{
		name = 'facial'
		lead_ms = 0
	}
]
fretbar_end_scale = 0.48000002
gray_gems = 0
dlc_songpak_spec = 'b%i%s_song.pak'
button_models = [
	{
		green = {
			gem_material = Mat_Gem_Green
			gem_hammer_material = Mat_Gem_Hammer_Green
			star_material = Mat_Gem_Star_Green
			star_hammer_material = Mat_Gem_Star_Hammer_Green
			whammy_material = Mat_Whammy_Green
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Green
			solo_star_material = Mat_Gem_Star_Tapping_Green
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Green
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Green
			star_material_drum = Mat_Gem_Drum_Star_Green
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Green
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Green
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Green
			star_material_guitar_accent = Mat_Gem_Star_Accent_Green
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Green
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Green
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Green
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Green
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Green
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_g
		}
		red = {
			gem_material = Mat_Gem_Red
			gem_hammer_material = Mat_Gem_Hammer_Red
			star_material = Mat_Gem_Star_Red
			star_hammer_material = Mat_Gem_Star_Hammer_Red
			whammy_material = Mat_Whammy_Red
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Red
			solo_star_material = Mat_Gem_Star_Tapping_Red
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Red
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Red
			star_material_drum = Mat_Gem_Drum_Star_Red
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Red
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Red
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Red
			star_material_guitar_accent = Mat_Gem_Star_Accent_Red
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Red
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Red
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Red
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Red
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Red
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_r
		}
		yellow = {
			gem_material = Mat_Gem_Yellow
			gem_hammer_material = Mat_Gem_Hammer_Yellow
			star_material = Mat_Gem_Star_Yellow
			star_hammer_material = Mat_Gem_Star_Hammer_Yellow
			whammy_material = Mat_Whammy_Yellow
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Yellow
			solo_star_material = Mat_Gem_Star_Tapping_Yellow
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Yellow
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Yellow
			star_material_drum = Mat_Gem_Drum_Star_Yellow
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Yellow
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Yellow
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Yellow
			star_material_guitar_accent = Mat_Gem_Star_Accent_Yellow
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Yellow
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Yellow
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Yellow
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Yellow
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Yellow
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_y
		}
		blue = {
			gem_material = Mat_Gem_Blue
			gem_hammer_material = Mat_Gem_Hammer_Blue
			star_material = Mat_Gem_Star_Blue
			star_hammer_material = Mat_Gem_Star_Hammer_Blue
			whammy_material = Mat_Whammy_Blue
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Blue
			solo_star_material = Mat_Gem_Star_Tapping_Blue
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Blue
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Blue
			star_material_drum = Mat_Gem_Drum_Star_Blue
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Blue
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Blue
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Blue
			star_material_guitar_accent = Mat_Gem_Star_Accent_Blue
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Blue
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Blue
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Blue
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Blue
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Blue
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_b
		}
		orange = {
			gem_material = Mat_Gem_Orange
			gem_hammer_material = Mat_Gem_Hammer_Orange
			star_material = Mat_Gem_Star_Orange
			star_hammer_material = Mat_Gem_Star_Hammer_Orange
			whammy_material = Mat_Whammy_Orange
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Orange
			solo_star_material = Mat_Gem_Star_Tapping_Orange
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Orange
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Orange
			star_material_drum = Mat_Gem_Drum_Star_Orange
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Orange
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Orange
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_orange
			star_material_guitar_accent = Mat_Gem_Star_Accent_orange
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Orange
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Orange
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Orange
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Orange
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Orange
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_o
		}
		white = {
			gem_material = Mat_Gem_Open
			gem_hammer_material = Mat_Gem_Hammer_Open
			star_material = Mat_Gem_Star_Open
			star_hammer_material = Mat_Gem_Star_Hammer_Open
			whammy_material = Mat_Placeholder
			star_power_material = Mat_Gem_Open_SP
			star_power_star_material = Mat_Gem_Star_Open_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_Open_SP
			star_power_hammer_material = Mat_Gem_Hammer_Open_SP
			star_power_whammy_material = Mat_Whammy_SP
			gem_deadnote_material = Mat_Gem_Open_Dead
			star_deadnote_material = Mat_Gem_Star_Open_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Open_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Open_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Open_Dead
			gem_deadnote_band_moment_hammer_material = Mat_Gem_Hammer_Band_Moment_Open_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_band_moment_material = Mat_Gem_Band_Moment_Open
			star_power_material_band_moment = Mat_Gem_Band_Moment_Open_SP
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Open
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_Open_SP
			gem_material_drum = Mat_Gem_Drum_Kick
			star_material_drum = Mat_Gem_Drum_Star_Kick
			star_power_material_drum = Mat_Gem_Drum_Kick_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_Kick_SP
			gem_deadnote_material_drum = Mat_Gem_Drum_Kick_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Kick_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Drum_Band_Moment_kick_Dead
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_kick
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_kick_SP
			gem_band_moment_whammy = Mat_Placeholder
			gem_material_beginner = Mat_Gem_Kid
			star_material_beginner = Mat_Gem_Star_Kid
			star_power_material_beginner = Mat_Gem_Kid_SP
			star_power_star_material_beginner = Mat_Gem_Star_Kid_SP
			gem_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid
			star_power_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid_SP
			gem_deadnote_material_beginner = Mat_Gem_Kid_Dead
			star_deadnote_material_beginner = Mat_Gem_star_Kid_Dead
			gem_band_moment_material_tapping = Mat_Placeholder
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_material_guitar_accent = Mat_Gem_Accent_Open
			star_material_guitar_accent = Mat_Gem_Star_Accent_Open
			star_power_material_guitar_accent = Mat_Gem_Accent_Open_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_Open_SP
			solo_material = Mat_Placeholder
			solo_star_material = Mat_Placeholder
			solo_star_power_material = Mat_Placeholder
			solo_star_power_star_material = Mat_Placeholder
			solo_whammy_material = Mat_Placeholder
			solo_whammy_star_material = Mat_Placeholder
			star_power_material_band_moment_tapping = Mat_Placeholder
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			name = button_b
		}
	}
	{
		green = {
			gem_material = Mat_Gem_Green
			gem_hammer_material = Mat_Gem_Hammer_Green
			star_material = Mat_Gem_Star_Green
			star_hammer_material = Mat_Gem_Star_Hammer_Green
			whammy_material = Mat_Whammy_Green
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Green
			solo_star_material = Mat_Gem_Star_Tapping_Green
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Green
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Green
			star_material_drum = Mat_Gem_Drum_Star_Green
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Green
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Green
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Green
			star_material_guitar_accent = Mat_Gem_Star_Accent_Green
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Green
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Green
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Green
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Green
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Green
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_g
		}
		red = {
			gem_material = Mat_Gem_Red
			gem_hammer_material = Mat_Gem_Hammer_Red
			star_material = Mat_Gem_Star_Red
			star_hammer_material = Mat_Gem_Star_Hammer_Red
			whammy_material = Mat_Whammy_Red
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Red
			solo_star_material = Mat_Gem_Star_Tapping_Red
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Red
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Red
			star_material_drum = Mat_Gem_Drum_Star_Red
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Red
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Red
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Red
			star_material_guitar_accent = Mat_Gem_Star_Accent_Red
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Red
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Red
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Red
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Red
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Red
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_r
		}
		yellow = {
			gem_material = Mat_Gem_Yellow
			gem_hammer_material = Mat_Gem_Hammer_Yellow
			star_material = Mat_Gem_Star_Yellow
			star_hammer_material = Mat_Gem_Star_Hammer_Yellow
			whammy_material = Mat_Whammy_Yellow
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Yellow
			solo_star_material = Mat_Gem_Star_Tapping_Yellow
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Yellow
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Yellow
			star_material_drum = Mat_Gem_Drum_Star_Yellow
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Yellow
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Yellow
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Yellow
			star_material_guitar_accent = Mat_Gem_Star_Accent_Yellow
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Yellow
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Yellow
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Yellow
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Yellow
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Yellow
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_y
		}
		blue = {
			gem_material = Mat_Gem_Blue
			gem_hammer_material = Mat_Gem_Hammer_Blue
			star_material = Mat_Gem_Star_Blue
			star_hammer_material = Mat_Gem_Star_Hammer_Blue
			whammy_material = Mat_Whammy_Blue
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Blue
			solo_star_material = Mat_Gem_Star_Tapping_Blue
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Blue
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Blue
			star_material_drum = Mat_Gem_Drum_Star_Blue
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Blue
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Blue
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Blue
			star_material_guitar_accent = Mat_Gem_Star_Accent_Blue
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Blue
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Blue
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Blue
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Blue
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Blue
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_b
		}
		orange = {
			gem_material = Mat_Gem_Orange
			gem_hammer_material = Mat_Gem_Hammer_Orange
			star_material = Mat_Gem_Star_Orange
			star_hammer_material = Mat_Gem_Star_Hammer_Orange
			whammy_material = Mat_Whammy_Orange
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Orange
			solo_star_material = Mat_Gem_Star_Tapping_Orange
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Orange
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Orange
			star_material_drum = Mat_Gem_Drum_Star_Orange
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Orange
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Orange
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_orange
			star_material_guitar_accent = Mat_Gem_Star_Accent_orange
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Orange
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Orange
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Orange
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Orange
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Orange
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_o
		}
		white = {
			gem_material = Mat_Gem_Open
			gem_hammer_material = Mat_Gem_Hammer_Open
			star_material = Mat_Gem_Star_Open
			star_hammer_material = Mat_Gem_Star_Hammer_Open
			whammy_material = Mat_Placeholder
			star_power_material = Mat_Gem_Open_SP
			star_power_star_material = Mat_Gem_Star_Open_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_Open_SP
			star_power_hammer_material = Mat_Gem_Hammer_Open_SP
			star_power_whammy_material = Mat_Whammy_SP
			gem_deadnote_material = Mat_Gem_Open_Dead
			star_deadnote_material = Mat_Gem_Star_Open_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Open_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Open_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Open_Dead
			gem_deadnote_band_moment_hammer_material = Mat_Gem_Hammer_Band_Moment_Open_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_band_moment_material = Mat_Gem_Band_Moment_Open
			star_power_material_band_moment = Mat_Gem_Band_Moment_Open_SP
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Open
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_Open_SP
			gem_material_drum = Mat_Gem_Drum_Kick
			star_material_drum = Mat_Gem_Drum_Star_Kick
			star_power_material_drum = Mat_Gem_Drum_Kick_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_Kick_SP
			gem_deadnote_material_drum = Mat_Gem_Drum_Kick_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Kick_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Drum_Band_Moment_kick_Dead
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_kick
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_kick_SP
			gem_band_moment_whammy = Mat_Placeholder
			gem_material_beginner = Mat_Gem_Kid
			star_material_beginner = Mat_Gem_Star_Kid
			star_power_material_beginner = Mat_Gem_Kid_SP
			star_power_star_material_beginner = Mat_Gem_Star_Kid_SP
			gem_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid
			star_power_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid_SP
			gem_deadnote_material_beginner = Mat_Gem_Kid_Dead
			star_deadnote_material_beginner = Mat_Gem_star_Kid_Dead
			gem_band_moment_material_tapping = Mat_Placeholder
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_material_guitar_accent = Mat_Gem_Accent_Open
			star_material_guitar_accent = Mat_Gem_Star_Accent_Open
			star_power_material_guitar_accent = Mat_Gem_Accent_Open_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_Open_SP
			solo_material = Mat_Placeholder
			solo_star_material = Mat_Placeholder
			solo_star_power_material = Mat_Placeholder
			solo_star_power_star_material = Mat_Placeholder
			solo_whammy_material = Mat_Placeholder
			solo_whammy_star_material = Mat_Placeholder
			star_power_material_band_moment_tapping = Mat_Placeholder
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			name = button_b
		}
	}
	{
		green = {
			gem_material = Mat_Gem_Green
			gem_hammer_material = Mat_Gem_Hammer_Green
			star_material = Mat_Gem_Star_Green
			star_hammer_material = Mat_Gem_Star_Hammer_Green
			whammy_material = Mat_Whammy_Green
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Green
			solo_star_material = Mat_Gem_Star_Tapping_Green
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Green
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Green
			star_material_drum = Mat_Gem_Drum_Star_Green
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Green
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Green
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Green
			star_material_guitar_accent = Mat_Gem_Star_Accent_Green
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Green
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Green
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Green
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Green
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Green
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_g
		}
		red = {
			gem_material = Mat_Gem_Red
			gem_hammer_material = Mat_Gem_Hammer_Red
			star_material = Mat_Gem_Star_Red
			star_hammer_material = Mat_Gem_Star_Hammer_Red
			whammy_material = Mat_Whammy_Red
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Red
			solo_star_material = Mat_Gem_Star_Tapping_Red
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Red
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Red
			star_material_drum = Mat_Gem_Drum_Star_Red
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Red
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Red
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Red
			star_material_guitar_accent = Mat_Gem_Star_Accent_Red
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Red
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Red
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Red
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Red
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Red
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_r
		}
		yellow = {
			gem_material = Mat_Gem_Yellow
			gem_hammer_material = Mat_Gem_Hammer_Yellow
			star_material = Mat_Gem_Star_Yellow
			star_hammer_material = Mat_Gem_Star_Hammer_Yellow
			whammy_material = Mat_Whammy_Yellow
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Yellow
			solo_star_material = Mat_Gem_Star_Tapping_Yellow
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Yellow
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Yellow
			star_material_drum = Mat_Gem_Drum_Star_Yellow
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Yellow
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Yellow
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Yellow
			star_material_guitar_accent = Mat_Gem_Star_Accent_Yellow
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Yellow
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Yellow
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Yellow
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Yellow
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Yellow
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_y
		}
		blue = {
			gem_material = Mat_Gem_Blue
			gem_hammer_material = Mat_Gem_Hammer_Blue
			star_material = Mat_Gem_Star_Blue
			star_hammer_material = Mat_Gem_Star_Hammer_Blue
			whammy_material = Mat_Whammy_Blue
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Blue
			solo_star_material = Mat_Gem_Star_Tapping_Blue
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Blue
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Blue
			star_material_drum = Mat_Gem_Drum_Star_Blue
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Blue
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Blue
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Blue
			star_material_guitar_accent = Mat_Gem_Star_Accent_Blue
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Blue
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Blue
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Blue
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Blue
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Blue
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_b
		}
		orange = {
			gem_material = Mat_Gem_Orange
			gem_hammer_material = Mat_Gem_Hammer_Orange
			star_material = Mat_Gem_Star_Orange
			star_hammer_material = Mat_Gem_Star_Hammer_Orange
			whammy_material = Mat_Whammy_Orange
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Orange
			solo_star_material = Mat_Gem_Star_Tapping_Orange
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Orange
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Orange
			star_material_drum = Mat_Gem_Drum_Star_Orange
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Orange
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Orange
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_orange
			star_material_guitar_accent = Mat_Gem_Star_Accent_orange
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Orange
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Orange
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Orange
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Orange
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Orange
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_o
		}
		white = {
			gem_material = Mat_Gem_Open
			gem_hammer_material = Mat_Gem_Hammer_Open
			star_material = Mat_Gem_Star_Open
			star_hammer_material = Mat_Gem_Star_Hammer_Open
			whammy_material = Mat_Placeholder
			star_power_material = Mat_Gem_Open_SP
			star_power_star_material = Mat_Gem_Star_Open_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_Open_SP
			star_power_hammer_material = Mat_Gem_Hammer_Open_SP
			star_power_whammy_material = Mat_Whammy_SP
			gem_deadnote_material = Mat_Gem_Open_Dead
			star_deadnote_material = Mat_Gem_Star_Open_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Open_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Open_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Open_Dead
			gem_deadnote_band_moment_hammer_material = Mat_Gem_Hammer_Band_Moment_Open_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_band_moment_material = Mat_Gem_Band_Moment_Open
			star_power_material_band_moment = Mat_Gem_Band_Moment_Open_SP
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Open
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_Open_SP
			gem_material_drum = Mat_Gem_Drum_Kick
			star_material_drum = Mat_Gem_Drum_Star_Kick
			star_power_material_drum = Mat_Gem_Drum_Kick_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_Kick_SP
			gem_deadnote_material_drum = Mat_Gem_Drum_Kick_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Kick_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Drum_Band_Moment_kick_Dead
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_kick
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_kick_SP
			gem_band_moment_whammy = Mat_Placeholder
			gem_material_beginner = Mat_Gem_Kid
			star_material_beginner = Mat_Gem_Star_Kid
			star_power_material_beginner = Mat_Gem_Kid_SP
			star_power_star_material_beginner = Mat_Gem_Star_Kid_SP
			gem_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid
			star_power_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid_SP
			gem_deadnote_material_beginner = Mat_Gem_Kid_Dead
			star_deadnote_material_beginner = Mat_Gem_star_Kid_Dead
			gem_band_moment_material_tapping = Mat_Placeholder
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_material_guitar_accent = Mat_Gem_Accent_Open
			star_material_guitar_accent = Mat_Gem_Star_Accent_Open
			star_power_material_guitar_accent = Mat_Gem_Accent_Open_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_Open_SP
			solo_material = Mat_Placeholder
			solo_star_material = Mat_Placeholder
			solo_star_power_material = Mat_Placeholder
			solo_star_power_star_material = Mat_Placeholder
			solo_whammy_material = Mat_Placeholder
			solo_whammy_star_material = Mat_Placeholder
			star_power_material_band_moment_tapping = Mat_Placeholder
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			name = button_b
		}
	}
	{
		green = {
			gem_material = Mat_Gem_Green
			gem_hammer_material = Mat_Gem_Hammer_Green
			star_material = Mat_Gem_Star_Green
			star_hammer_material = Mat_Gem_Star_Hammer_Green
			whammy_material = Mat_Whammy_Green
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Green
			solo_star_material = Mat_Gem_Star_Tapping_Green
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Green
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Green
			star_material_drum = Mat_Gem_Drum_Star_Green
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Green
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Green
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Green
			star_material_guitar_accent = Mat_Gem_Star_Accent_Green
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Green
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Green
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Green
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Green
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Green
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_g
		}
		red = {
			gem_material = Mat_Gem_Red
			gem_hammer_material = Mat_Gem_Hammer_Red
			star_material = Mat_Gem_Star_Red
			star_hammer_material = Mat_Gem_Star_Hammer_Red
			whammy_material = Mat_Whammy_Red
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Red
			solo_star_material = Mat_Gem_Star_Tapping_Red
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Red
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Red
			star_material_drum = Mat_Gem_Drum_Star_Red
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Red
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Red
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Red
			star_material_guitar_accent = Mat_Gem_Star_Accent_Red
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Red
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Red
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Red
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Red
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Red
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_r
		}
		yellow = {
			gem_material = Mat_Gem_Yellow
			gem_hammer_material = Mat_Gem_Hammer_Yellow
			star_material = Mat_Gem_Star_Yellow
			star_hammer_material = Mat_Gem_Star_Hammer_Yellow
			whammy_material = Mat_Whammy_Yellow
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Yellow
			solo_star_material = Mat_Gem_Star_Tapping_Yellow
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Yellow
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Yellow
			star_material_drum = Mat_Gem_Drum_Star_Yellow
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Yellow
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Yellow
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Yellow
			star_material_guitar_accent = Mat_Gem_Star_Accent_Yellow
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Yellow
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Yellow
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Yellow
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Yellow
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Yellow
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_y
		}
		blue = {
			gem_material = Mat_Gem_Blue
			gem_hammer_material = Mat_Gem_Hammer_Blue
			star_material = Mat_Gem_Star_Blue
			star_hammer_material = Mat_Gem_Star_Hammer_Blue
			whammy_material = Mat_Whammy_Blue
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Blue
			solo_star_material = Mat_Gem_Star_Tapping_Blue
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Blue
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Blue
			star_material_drum = Mat_Gem_Drum_Star_Blue
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Blue
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Blue
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_Blue
			star_material_guitar_accent = Mat_Gem_Star_Accent_Blue
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Blue
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Blue
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Blue
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Blue
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Blue
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_b
		}
		orange = {
			gem_material = Mat_Gem_Orange
			gem_hammer_material = Mat_Gem_Hammer_Orange
			star_material = Mat_Gem_Star_Orange
			star_hammer_material = Mat_Gem_Star_Hammer_Orange
			whammy_material = Mat_Whammy_Orange
			star_power_material = Mat_Gem_SP
			star_power_star_material = Mat_Gem_Star_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_SP
			star_power_hammer_material = Mat_Gem_Hammer_SP
			star_power_whammy_material = Mat_Whammy_SP
			solo_material = Mat_Gem_Tapping_Orange
			solo_star_material = Mat_Gem_Star_Tapping_Orange
			solo_star_power_material = Mat_Gem_Tapping_SP
			solo_star_power_star_material = Mat_Gem_Star_Tapping_SP
			solo_whammy_material = Mat_Whammy_Tapping_Orange
			solo_whammy_star_material = Mat_Whammy_Tapping_SP
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_material_drum = Mat_Gem_Drum_Orange
			star_material_drum = Mat_Gem_Drum_Star_Orange
			star_power_material_drum = Mat_Gem_Drum_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_SP
			gem_material_drum_accent = Mat_Gem_Drum_Accent_Orange
			star_material_drum_accent = Mat_Gem_Drum_Star_Accent_Orange
			star_power_material_drum_accent = Mat_Gem_Drum_Accent_SP
			star_power_star_material_drum_accent = Mat_Gem_Drum_Star_Accent_SP
			gem_material_guitar_accent = Mat_Gem_Accent_orange
			star_material_guitar_accent = Mat_Gem_Star_Accent_orange
			star_power_material_guitar_accent = Mat_Gem_Accent_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_SP
			gem_deadnote_material = Mat_Gem_Dead
			star_deadnote_material = Mat_Gem_Star_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Dead
			solo_deadnote_material = Mat_Gem_Tapping_Dead
			solo_star_deadnote_material = Mat_Gem_Star_Tapping_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Dead
			gem_deadnote_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Dead
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_deadnote_material_drum = Mat_Gem_Drum_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Dead
			gem_deadnote_material_drum_accent = Mat_Gem_Drum_Accent_Dead
			star_deadnote_material_drum_accent = Mat_Gem_Drum_Star_Accent_Dead
			gem_deadnote_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Dead
			gem_deadnote_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Deadnote
			star_power_material_band_moment = Mat_Gem_Band_Moment_SP
			star_power_material_band_moment_tapping = Mat_Gem_Tapping_Band_Moment_SP
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_SP
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_SP
			star_power_material_band_moment_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_SP
			gem_band_moment_material = Mat_Gem_Band_Moment_Orange
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_Orange
			gem_band_moment_material_drum_accent = Mat_Gem_Drum_Accent_Band_Moment_Orange
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Orange
			gem_band_moment_material_tapping = Mat_Gem_Tapping_Band_Moment_Orange
			gem_band_moment_whammy = Mat_Whammy_Dead
			name = button_o
		}
		white = {
			gem_material = Mat_Gem_Open
			gem_hammer_material = Mat_Gem_Hammer_Open
			star_material = Mat_Gem_Star_Open
			star_hammer_material = Mat_Gem_Star_Hammer_Open
			whammy_material = Mat_Placeholder
			star_power_material = Mat_Gem_Open_SP
			star_power_star_material = Mat_Gem_Star_Open_SP
			star_power_hammer_star_material = Mat_Gem_Star_Hammer_Open_SP
			star_power_hammer_material = Mat_Gem_Hammer_Open_SP
			star_power_whammy_material = Mat_Whammy_SP
			gem_deadnote_material = Mat_Gem_Open_Dead
			star_deadnote_material = Mat_Gem_Star_Open_Dead
			gem_deadnote_material_Hammer_on = Mat_Gem_Hammer_Open_Dead
			star_deadnote_hammer_material = Mat_Gem_Star_Hammer_Open_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Band_Moment_Open_Dead
			gem_deadnote_band_moment_hammer_material = Mat_Gem_Hammer_Band_Moment_Open_Dead
			dead_whammy = Mat_Whammy_Dead
			gem_band_moment_material = Mat_Gem_Band_Moment_Open
			star_power_material_band_moment = Mat_Gem_Band_Moment_Open_SP
			gem_band_moment_material_hammer_on = Mat_Gem_Hammer_Band_Moment_Open
			star_power_material_band_moment_hammer_on = Mat_Gem_Hammer_Band_Moment_Open_SP
			gem_material_drum = Mat_Gem_Drum_Kick
			star_material_drum = Mat_Gem_Drum_Star_Kick
			star_power_material_drum = Mat_Gem_Drum_Kick_SP
			star_power_star_material_drum = Mat_Gem_Drum_Star_Kick_SP
			gem_deadnote_material_drum = Mat_Gem_Drum_Kick_Dead
			star_deadnote_material_drum = Mat_Gem_Drum_Star_Kick_Dead
			gem_deadnote_band_moment_material = Mat_Gem_Drum_Band_Moment_kick_Dead
			gem_band_moment_material_drum = Mat_Gem_Drum_Band_Moment_kick
			star_power_material_band_moment_drum = Mat_Gem_Drum_Band_Moment_kick_SP
			gem_band_moment_whammy = Mat_Placeholder
			gem_material_beginner = Mat_Gem_Kid
			star_material_beginner = Mat_Gem_Star_Kid
			star_power_material_beginner = Mat_Gem_Kid_SP
			star_power_star_material_beginner = Mat_Gem_Star_Kid_SP
			gem_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid
			star_power_band_moment_material_beginner = Mat_Gem_Band_Moment_Kid_SP
			gem_deadnote_material_beginner = Mat_Gem_Kid_Dead
			star_deadnote_material_beginner = Mat_Gem_star_Kid_Dead
			gem_band_moment_material_tapping = Mat_Placeholder
			gem_deadnote_material_tapping = Mat_Gem_Tapping_Dead
			gem_material_guitar_accent = Mat_Gem_Accent_Open
			star_material_guitar_accent = Mat_Gem_Star_Accent_Open
			star_power_material_guitar_accent = Mat_Gem_Accent_Open_SP
			star_power_star_material_guitar_accent = Mat_Gem_Star_Accent_Open_SP
			solo_material = Mat_Placeholder
			solo_star_material = Mat_Placeholder
			solo_star_power_material = Mat_Placeholder
			solo_star_power_star_material = Mat_Placeholder
			solo_whammy_material = Mat_Placeholder
			solo_whammy_star_material = Mat_Placeholder
			star_power_material_band_moment_tapping = Mat_Placeholder
			gray_material = Mat_Placeholder
			gray_hammer_material = Mat_Placeholder
			gray_whammy_material = Mat_Whammy_Dead
			name = button_b
		}
	}
]

script setup_models 
	tod_manager_create_perm_lights
	LightShow_CreatePermModels
endscript

script get_notetrack_part_text 
	if NOT GotParam \{part}
		GetPlayerInfo <player> part
	endif
	if (<part> = bass)
		<part> = 'rhythm_'
	elseif (<part> = rhythm)
		ScriptAssert \{qs(0xed4aab7e)}
	elseif (<part> = Drum)
		<part> = 'drum_'
	else
		if GotParam \{fullname}
			<part> = 'guitar'
		else
			<part> = ''
		endif
	endif
	return part = <part>
endscript

script get_gem_array_name 
	RequireParams \{[
			song_name
			difficulty
		]
		all}
	get_notetrack_part_text player = <player> song_name = <song_name> part = <part>
	get_song_prefix song = <song_name>
	get_difficulty_text_nl difficulty = <difficulty> no_rhythm
	if (<song_name> = jamsession)
		blank_part = <part>
		<vocals> = 0
		if GotParam \{player}
			GetPlayerInfo <player> part
			if checksumequals a = <part> b = vocals
				<vocals> = 1
			endif
		endif
		if (<vocals> = 1)
			FormatText \{checksumname = gem_array
				'jamsession_song_vocals'
				AddToStringLookup = true}
			<part> = <blank_part>
		else
			<part> = <blank_part>
			FormatText checksumname = gem_array '%s_song_%p%d' s = <song_prefix> p = <part> d = <difficulty_text_nl> AddToStringLookup = true
		endif
	else
		FormatText checksumname = gem_array '%s_song_%p%d' s = <song_prefix> p = <part> d = <difficulty_text_nl> AddToStringLookup = true
	endif
	return gem_array = <gem_array>
endscript

script get_fretbar_array_name 
	RequireParams \{[
			song_name
		]
		all}
	get_song_prefix song = <song_name>
	FormatText checksumname = fretbar_array '%s_fretbars' s = <song_prefix> AddToStringLookup = true
	return fretbar_array = <fretbar_array>
endscript

script get_timsig_array_name 
	RequireParams \{[
			song_name
		]
		all}
	get_song_prefix song = <song_name>
	FormatText checksumname = timesig_array '%s_timesig' s = <song_prefix> AddToStringLookup = true
	return timesig_array = <timesig_array>
endscript

script get_starpower_array_name 
	RequireParams \{[
			song_name
			difficulty
		]
		all}
	get_song_prefix song = <song_name>
	if (<part> = vocals)
		FormatText checksumname = star_array '%s_vocals_Star' s = <song_prefix> p = <part> AddToStringLookup = true
	else
		get_notetrack_part_text player = <player> song_name = <song_name> part = <part>
		get_difficulty_text_nl difficulty = <difficulty> no_rhythm
		FormatText checksumname = star_array '%s_%p%d_Star' s = <song_prefix> p = <part> d = <difficulty_text_nl> AddToStringLookup = true
	endif
	return star_array = <star_array>
endscript

script get_tapping_array_name 
	RequireParams \{[
			song_name
			difficulty
		]
		all}
	get_notetrack_part_text player = <player> song_name = <song_name> part = <part>
	get_song_prefix song = <song_name>
	get_difficulty_text_nl difficulty = <difficulty> no_rhythm
	FormatText checksumname = tapping_array '%s_%p%d_Tapping' s = <song_prefix> p = <part> d = <difficulty_text_nl> AddToStringLookup = true
	return tapping_array = <tapping_array>
endscript

script get_drum_fill_array_name 
	RequireParams \{[
			song_name
			difficulty
		]
		all}
	get_song_prefix song = <song_name>
	get_difficulty_text_nl difficulty = <difficulty> no_rhythm
	FormatText checksumname = drumfill_array '%s_%d_DrumFill' s = <song_prefix> d = <difficulty_text_nl> AddToStringLookup = true
	return drumfill_array = <drumfill_array>
endscript

script get_marker_array_name 
	RequireParams \{[
			song_name
		]
		all}
	get_notetrack_part_text player = <player> song_name = <song_name> part = <part> fullname
	get_song_prefix song = <song_name>
	FormatText checksumname = marker_array '%s_%p_Markers' s = <song_prefix> p = <part> AddToStringLookup = true
	return marker_array = <marker_array>
endscript

script get_band_moment_array_name 
	RequireParams \{[
			song_name
		]
		all}
	get_song_prefix song = <song_name>
	FormatText checksumname = band_moment_array '%s_BandMoment' s = <song_prefix> AddToStringLookup = true
	return band_moment_array = <band_moment_array>
endscript

script setup_gemarrays \{player = 1}
	get_gem_array_name song_name = <song_name> player = <player> difficulty = <difficulty>
	get_fretbar_array_name song_name = <song_name>
	SetPlayerInfo <player> current_song_name = <song_name>
	beat_time = 0
	SongFileManager func = get_num_fretbar_notes song_name = <song_name>
	if (<num_fretbar_notes> > 0)
		SongFileManager func = get_fretbar_note song_name = <song_name> index = 1
		beat_time = <fretbar_time>
	endif
	SetPlayerInfo <player> current_song_beat_time = <beat_time>
	casttofloat \{beat_time}
	SetPlayerInfo <player> playline_song_beat_time = <beat_time>
	return gem_array = <gem_array> fretbar_array = <fretbar_array> song_prefix = <song_prefix> difficulty_text_nl = <difficulty_text_nl>
endscript

script flag_extended_sustains 
	GetPlayerInfo <player> current_song_gem_array out = gem_array
	GetArraySize ($<gem_array>)
	gem_array_size = <array_size>
	GetArraySize \{$gem_colors}
	gem_color_array_size = <array_size>
	index = 0
	last_extended_time = 0
	extended_start_index = 0
	curr_pattern_array = [1 1 1 1 1]
	GetArraySize <curr_pattern_array>
	curr_pattern_array_size = <array_size>
	if (<gem_array_size> <= 0)
		return
	endif
	begin
	curr_time = ($<gem_array> [<index>])
	curr_length = ($<gem_array> [(<index> + 1)])
	curr_bitfield = ($<gem_array> [(<index> + 2)])
	bit_count = 0
	extended_sustain_bit = (<gem_color_array_size> + 1)
	begin
	set_bitfield curr_bitfield = <curr_bitfield> bit = <extended_sustain_bit> value = (<curr_pattern_array> [<bit_count>])
	<extended_sustain_bit> = (<extended_sustain_bit> + 1)
	<bit_count> = (<bit_count> + 1)
	repeat <curr_pattern_array_size>
	SetArrayElement arrayName = <gem_array> GlobalArray index = (<index> + 2) newValue = <curr_bitfield>
	if ((<index> + 3) >= <gem_array_size>)
		break
	endif
	next_time = ($<gem_array> [(<index> + 3)])
	next_length = ($<gem_array> [(<index> + 4)])
	next_bitfield = ($<gem_array> [(<index> + 5)])
	if (<next_time> < (<curr_time> + <curr_length>))
		update_pattern_array_extended_sustains curr_bitfield = <curr_bitfield> curr_pattern_array = <curr_pattern_array>
		if (<last_extended_time> = 0)
			<extended_start_index> = <index>
		endif
		<last_extended_time> = (<curr_time> + <curr_length>)
	elseif (<curr_time> < <last_extended_time>)
		update_pattern_array_extended_sustains curr_bitfield = <curr_bitfield> curr_pattern_array = <curr_pattern_array>
		extended_end_index = <index>
		extended_index = <extended_start_index>
		begin
		if (<extended_index> > <extended_end_index>)
			break
		endif
		<curr_time> = ($<gem_array> [<extended_index>])
		<curr_length> = ($<gem_array> [(<extended_index> + 1)])
		<curr_bitfield> = ($<gem_array> [(<extended_index> + 2)])
		bit_count = 0
		extended_sustain_bit = (<gem_color_array_size> + 1)
		value_bitfield = <curr_bitfield>
		begin
		if NOT ((<value_bitfield> / 2) * 2 = <value_bitfield>)
			set_bitfield curr_bitfield = <curr_bitfield> bit = <extended_sustain_bit> value = 1
		else
			set_bitfield curr_bitfield = <curr_bitfield> bit = <extended_sustain_bit> value = (<curr_pattern_array> [<bit_count>])
		endif
		<value_bitfield> = (<value_bitfield> / 2)
		<extended_sustain_bit> = (<extended_sustain_bit> + 1)
		<bit_count> = (<bit_count> + 1)
		repeat <curr_pattern_array_size>
		SetArrayElement arrayName = <gem_array> GlobalArray index = (<extended_index> + 2) newValue = <curr_bitfield>
		debug_get_bitfield_text curr_bitfield = <curr_bitfield> num_bits = (<gem_color_array_size> + 6)
		printf channel = extended qs(0xbb0293f2) a = <extended_index> b = <curr_time> c = <curr_bitfield> d = <bitfield_text>
		<extended_index> = (<extended_index> + 3)
		repeat
		printf \{channel = extended
			qs(0x03ac90f0)}
		<last_extended_time> = 0
		<curr_pattern_array> = [1 1 1 1 1]
	else
		<last_extended_time> = 0
		<curr_pattern_array> = [1 1 1 1 1]
	endif
	<index> = (<index> + 3)
	repeat
	printf channel = extended qs(0x95b6c4ad) s = <gem_array_size>
endscript

script update_pattern_array_extended_sustains 
	GetArraySize <curr_pattern_array>
	value_bitfield = <curr_bitfield>
	index = 0
	begin
	if NOT ((<value_bitfield> / 2) * 2 = <value_bitfield>)
		SetArrayElement arrayName = curr_pattern_array index = <index> newValue = 0
	endif
	<value_bitfield> = (<value_bitfield> / 2)
	index = (<index> + 1)
	repeat <array_size>
	return curr_pattern_array = <curr_pattern_array>
endscript

script set_bitfield 
	if (<value> != 1 && <value> != 0)
		return
	endif
	new_bit = 1
	if (<bit> > 0)
		begin
		<new_bit> = (<new_bit> * 2)
		repeat <bit>
	endif
	bit_on = 0
	value_bitfield = <curr_bitfield>
	begin
	<bit_on> = 0
	if NOT ((<value_bitfield> / 2) * 2 = <value_bitfield>)
		<bit_on> = 1
	endif
	<value_bitfield> = (<value_bitfield> / 2)
	repeat (<bit> + 1)
	if (<bit_on> = 0 && <value> = 1)
		<curr_bitfield> = (<curr_bitfield> + <new_bit>)
	endif
	if (<bit_on> = 1 && <value> = 0)
		<curr_bitfield> = (<curr_bitfield> - <new_bit>)
	endif
	return curr_bitfield = <curr_bitfield>
endscript

script debug_get_bitfield_text 
	gem_count = 0
	bitfield_text = 'pattern:'
	value_bitfield = <curr_bitfield>
	begin
	value = 0
	if NOT ((<value_bitfield> / 2) * 2 = <value_bitfield>)
		value = 1
	endif
	<value_bitfield> = (<value_bitfield> / 2)
	if (<value>)
		switch <gem_count>
			case 0
			FormatText TextName = bitfield_text '%sg' s = <bitfield_text>
			case 1
			FormatText TextName = bitfield_text '%sr' s = <bitfield_text>
			case 2
			FormatText TextName = bitfield_text '%sy' s = <bitfield_text>
			case 3
			FormatText TextName = bitfield_text '%sb' s = <bitfield_text>
			case 4
			FormatText TextName = bitfield_text '%so' s = <bitfield_text>
			default
			FormatText TextName = bitfield_text '%s1' s = <bitfield_text>
		endswitch
	else
		if (<gem_count> < 5)
			FormatText TextName = bitfield_text '%s-' s = <bitfield_text>
		else
			FormatText TextName = bitfield_text '%s0' s = <bitfield_text>
		endif
	endif
	if (<gem_count> = 4)
		FormatText TextName = bitfield_text '%s open:' s = <bitfield_text>
	endif
	if (<gem_count> = 5)
		FormatText TextName = bitfield_text '%s hammer:' s = <bitfield_text>
	endif
	if (<gem_count> = 6)
		FormatText TextName = bitfield_text '%s ext_sus:' s = <bitfield_text>
	endif
	gem_count = (<gem_count> + 1)
	repeat <num_bits>
	return bitfield_text = <bitfield_text>
endscript

script calc_health_invincible_time 
	SongFileManager func = get_song_end_time song_name = <song>
	health_invincible_time = 0.0
	GameMode_GetType
	if (<type> = career || <type> = quickplay)
		GetPlayerInfo <player> difficulty
		switch <difficulty>
			case beginner
			health_invincible_time = (<total_end_time> * $health_invincible_time_percentage_beginner / 100.0)
			case easy
			health_invincible_time = (<total_end_time> * $health_invincible_time_percentage_easy / 100.0)
			case medium
			health_invincible_time = (<total_end_time> * $health_invincible_time_percentage_medium / 100.0)
		endswitch
	endif
	SetPlayerInfo <player> health_invincible_time = <health_invincible_time>
endscript

script gem_scroller \{player = 1}
	check_song_for_zero_difficulty song = <song_name>
	setup_gemarrays song_name = <song_name> difficulty = <difficulty> player = <player>
	get_notetrack_part_text player = <player> song_name = <song_name>
	calc_health_invincible_time song = <song_name> player = <player>
	if PlayerInfoEquals <player> part = Drum
		SetPlayerInfo <player> check_time_early = ($drum_time_early * $current_speedfactor)
		SetPlayerInfo <player> check_time_late = ($drum_time_late * $current_speedfactor)
	else
		SetPlayerInfo <player> check_time_early = ($check_time_early * $current_speedfactor)
		SetPlayerInfo <player> check_time_late = ($check_time_late * $current_speedfactor)
	endif
	FormatText checksumname = input_array 'input_arrayp%p' p = <player>
	InputArrayCreate name = <input_array>
	GetFirstPlayer \{on_screen
		out = first}
	if (<player> = <first>)
		if ($input_mode = record)
			if are_replays_enabled
				GetNumPlayersInGame
				GetPlayerInfo \{1
					controller
					out = controller1}
				GetPlayerInfo \{2
					controller
					out = controller2}
				GetPlayerInfo \{3
					controller
					out = controller3}
				GetPlayerInfo \{4
					controller
					out = controller4}
				GetPlayerInfo \{1
					difficulty
					out = difficulty1}
				GetPlayerInfo \{2
					difficulty
					out = difficulty2}
				GetPlayerInfo \{3
					difficulty
					out = difficulty3}
				GetPlayerInfo \{4
					difficulty
					out = difficulty4}
				GetPlayerInfo \{1
					part
					out = part1}
				GetPlayerInfo \{2
					part
					out = part2}
				GetPlayerInfo \{3
					part
					out = part3}
				GetPlayerInfo \{4
					part
					out = part4}
				ClearDataBuffer \{name = replay}
				DataBufferPutChecksum name = replay value = <song_name>
				DataBufferPutChecksum name = replay value = ($current_transition)
				DataBufferPutInt name = replay value = <num_players>
				DataBufferPutInt name = replay value = <controller1>
				DataBufferPutInt name = replay value = <controller2>
				DataBufferPutInt name = replay value = <controller3>
				DataBufferPutInt name = replay value = <controller4>
				DataBufferPutChecksum name = replay value = <difficulty1> bytes = 16
				DataBufferPutChecksum name = replay value = <difficulty2> bytes = 16
				DataBufferPutChecksum name = replay value = <difficulty3> bytes = 16
				DataBufferPutChecksum name = replay value = <difficulty4> bytes = 16
				DataBufferPutChecksum name = replay value = <part1> bytes = 16
				DataBufferPutChecksum name = replay value = <part2> bytes = 16
				DataBufferPutChecksum name = replay value = <part3> bytes = 16
				DataBufferPutChecksum name = replay value = <part4> bytes = 16
				GetRandomSeeds
				DataBufferPutInt name = replay value = <seed1>
				DataBufferPutInt name = replay value = <seed2>
				DataBufferPutInt name = replay value = <seed3>
				DataBufferPutInt name = replay value = <seed4>
				DataBufferPutInt name = replay value = <seed5>
				DataBufferPutInt name = replay value = <seed6>
			endif
		endif
	endif
	<gem_offset> = ($time_gem_offset)
	<input_offset> = ($time_input_offset)
	get_lag_values
	audio_offset = (<audio_offset> * $current_speedfactor)
	<input_offset> = (<input_offset> - <audio_offset>)
	<gem_offset> = (<gem_offset> - <audio_offset>)
	<gem_offset> = (<gem_offset> - <video_offset>)
	Change time_drum_midi_offset_with_lag = ($time_drum_midi_offset + <audio_offset> + <video_offset>)
	Change time_gem_offset_with_lag = ($time_gem_offset - <audio_offset> - <video_offset>)
	if ($game_mode != tutorial && $game_mode != practice && $calibrate_lag_enabled = 0 && $medley_mode_on = 0)
		GetFirstPlayer \{on_screen
			out = first}
		if (<player> = <first>)
			BandManager_StartAllAnimIterators song_name = <song_name> time_offset = <gem_offset>
			if ($DrumTest = 1)
				killspawnedscript \{name = drummer_controlscript}
				spawnscriptnow \{drummer_controlscript}
			endif
			spawnscriptlater WatchForStartPlaying_iterator params = {time_offset = <gem_offset>}
			spawnscriptlater Tempo_matching_iterator params = {song_name = <song_name> difficulty = <difficulty> thin_fretbars
				time_offset = <gem_offset> skipleadin = 0 player = <player>}
			if ($game_mode != p4_quickplay)
			endif
		elseif PlayerInfoEquals <player> part = Drum
			GetPlayerInfo <player> band_member out = id
			if NOT (<id> = Drummer)
			endif
		endif
	endif
	GetPlayerInfo <player> scroll_time
	GetPlayerInfo <player> check_time_early
	GetPlayerInfo <player> bot_play
	GetPlayerInfo <player> is_local_client
	GetPlayerInfo <player> server_id
	easy_scroll_time = ($difficulty_list_props.easy.scroll_time)
	GameMode_GetType
	fill_input_offset = (((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0)
	CastToInteger \{fill_input_offset}
	FormatText checksumname = input_array 'input_arrayp%p' p = <player>
	if ($calibrate_lag_enabled = 0)
		spawnscriptlater gem_array_events params = {iterator_text = 'fill_array' song_name = <song_name> difficulty = <difficulty> input_array = <input_array>
			time_offset = <fill_input_offset> strum_function = fill_input_array skipleadin = (<scroll_time> * 1000.0) player = <player>
			not_player_specific = true add_part_to_event_id = true}
	endif
	<do_bot> = 0
	if ((<bot_play> = 1) || (<is_local_client> = 0))
		<do_bot> = 1
	endif
	if (<do_bot> = 1)
		FormatText checksumname = botresponse_array 'botresponse_arrayp%p' p = <player>
		InputArrayCreate name = <botresponse_array>
		<stagger_offset> = 0.0
		if PlayerInfoEquals <player> part = Drum
			Mod a = <player> b = 2
			if (<Mod> = 0)
				<stagger_offset> = 17.0
			endif
		endif
		spawnscriptlater gem_iterator params = {iterator_text = 'fill_botresponsearray' song_name = <song_name> difficulty = <difficulty> part = <part> input_array = <botresponse_array>
			time_offset = ((((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0) + <stagger_offset>) strum_function = fill_input_array skipleadin = (<scroll_time> * 1000.0)
			player = <player>}
		spawnscriptlater gem_iterator params = {iterator_text = 'adjust_botresponsearray' song_name = <song_name> difficulty = <difficulty> part = <part> use_input_array = 'botresponse_array'
			time_offset = (((((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0) + 200) + <stagger_offset>) strum_function = adjust_input_array_for_note_miss skipleadin = (<scroll_time> * 1000.0)
			player = <player>}
		spawnscriptlater gem_iterator params = {iterator_text = 'bot' song_name = <song_name> difficulty = <difficulty> part = <part> use_input_array = 'botresponse_array'
			time_offset = (((<check_time_early> * 1000.0) + <input_offset> - ($check_time_late * 1000.0)) + <stagger_offset>) strum_function = check_buttons_bot skipleadin = (<scroll_time> * 1000.0)
			player = <player>}
		printf channel = log qs(0xda3b9ce1) s = <player>
	endif
	SetPlayerInfo <player> gem_offset = <gem_offset>
	SetPlayerInfo <player> time_offset = (((<scroll_time> - $destroy_time) * 1000.0) + <gem_offset>)
	spawnscriptlater gem_iterator params = {iterator_text = 'create_gem' song_name = <song_name> difficulty = <difficulty> part = <part> use_input_array = 'input_array'
		use_player_info_time_offset gem_function = create_gem skipleadin = (<scroll_time> * 1000.0)
		player = <player>}
	get_song_prefix song = <song_name>
	FormatText checksumname = guitar_stream '%s_guitar' s = <song_prefix> AddToStringLookup = true
	if GotParam \{looping}
		GetPlayerInfo <player> controller
		RestartPlayerServerInput {
			player = <player>
			controller = <controller>
			guitar_stream = <guitar_stream>
			time_offset = ((<check_time_early> * 1000.0) + <input_offset>)
			song_name = <song_name>
		}
		vocals_mute_all_mics \{mute = false}
	else
		CreatePlayerServer id = <server_id> player = <player>
		GetPlayerInfo <player> controller
		AddPlayerServerInput {id = <server_id>
			player = <player>
			controller = <controller>
			guitar_stream = <guitar_stream>
			time_offset = ((<check_time_early> * 1000.0) + <input_offset>)
			song_name = <song_name>
		}
		AddPlayerServerHighway id = <server_id> player = <player> fill_input_offset = <fill_input_offset>
		if ($is_network_game)
			AddNetworkPlayerOutputs id = <server_id> player = <player> onscreen = 1
		endif
	endif
	if NOT PlayerInfoEquals <player> part = vocals
		if ($calibrate_lag_enabled = 0)
			AddPlayerServerFretbarIterator {fretbar_id = CreateFretbar id = <server_id> song_name = <song_name> difficulty = <difficulty> thin_fretbars
				use_player_info_time_offset fretbar_function = Create2DFretbar skipleadin = (<scroll_time> * 1000.0)
				player = <player>}
		endif
	endif
	spawnscriptlater fretbar_update_tempo params = {song_name = <song_name> difficulty = <difficulty> part = <part>
		time_offset = ((<check_time_early> * 1000.0) + <gem_offset>) player = <player> skipleadin = (<scroll_time> * 1000.0)}
	spawnscriptlater fretbar_update_hammer_on_tolerance params = {song_name = <song_name> difficulty = <difficulty> part = <part>
		time_offset = (((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0) player = <player> skipleadin = (<scroll_time> * 1000.0)}
	if ($calibrate_lag_enabled = 1)
		return
	endif
	GetPlayerInfo <player> is_onscreen
	GetFirstPlayer \{on_screen
		out = first}
	if (<player> = <first>)
		AddPlayerServerFretbarIterator {fretbar_id = PreFretbarEvent id = <server_id> song_name = <song_name> difficulty = <difficulty>
			time_offset = (($prefretbar_time * 1000.0)) fretbar_function = GuitarEvent_PreFretbar skipleadin = 0 player = <player>}
		AddPlayerServerFretbarIterator {fretbar_id = FretbarEvent id = <server_id> song_name = <song_name> difficulty = <difficulty>
			time_offset = <gem_offset> fretbar_function = GuitarEvent_Fretbar skipleadin = 0 player = <player>}
		if ($Debug_Audible_Downbeat = 1)
			AddPlayerServerFretbarIterator {fretbar_id = FretbarEventEarly id = <server_id> song_name = <song_name> difficulty = <difficulty>
				time_offset = (<gem_offset> + ($check_time_early * 1000.0)) fretbar_function = GuitarEvent_Fretbar_Early skipleadin = 0 player = <player>}
			AddPlayerServerFretbarIterator {fretbar_id = FretbarEventLate id = <server_id> song_name = <song_name> difficulty = <difficulty>
				time_offset = (<gem_offset> - ($check_time_late * 1000.0)) fretbar_function = GuitarEvent_Fretbar_Late skipleadin = 0 player = <player>}
		endif
		ExtendCrc <song_name> '_scriptevents' out = script_events
		if GlobalExists name = <script_events> type = array
			uses_new_performance = true
		else
			uses_new_performance = false
		endif
		GetArraySize \{$scripts_array}
		array_count = 0
		begin
		event_string = ($scripts_array [<array_count>].name)
		if (<event_string> = 'performance' && <uses_new_performance> = true)
			printf qs(0xaead9239) a = <event_string>
		else
			<lead_ms> = ($scripts_array [<array_count>].lead_ms)
			spawnscriptlater event_iterator params = {song_name = <song_name> difficulty = <difficulty>
				event_string = ($scripts_array [<array_count>].name) time_offset = (<gem_offset> + <lead_ms>) skipleadin = 0 player = <player>}
			spawnscriptlater notemap_startiterator params = {song_name = <song_name> difficulty = <difficulty>
				event_string = ($scripts_array [<array_count>].name) time_offset = (<gem_offset> + <lead_ms>) skipleadin = 0 player = <player>}
		endif
		array_count = (<array_count> + 1)
		repeat <array_size>
		spawnscriptlater notemap_startiterator params = {song_name = <song_name> difficulty = <difficulty>
			event_string = 'drums' time_offset = (<gem_offset> + $time_drum_midi_offset_with_lag) skipleadin = 0 player = <player>}
		if ($medley_mode_on)
			spawnscriptlater \{medley_startiterator
				params = {
					time_offset = 0
					skipleadin = 0
				}}
		endif
		if GotParam \{looping}
			return
		endif
		spawnscriptnow lightshow_iterator params = {song_name = <song_name> time_offset = (<gem_offset> + $lightshow_offset_ms) skipleadin = 0}
		if (<song_name> = jamsession)
			printf \{channel = marccam
				qs(0xf6cc5c6e)}
			spawnscriptlater autocut_cameracuts_iterator params = {song_name = <song_name> time_offset = <gem_offset> skipleadin = 0}
		else
			printf \{channel = marccam
				qs(0x0bc42383)}
			spawnscriptlater cameracuts_iterator params = {song_name = <song_name> time_offset = <gem_offset> skipleadin = 0}
		endif
	endif
	if (<type> != practice)
		spawnscriptlater win_song params = {<...>}
	endif
endscript
failed_song = 0

script win_song 
	Change \{failed_song = 0}
	GetFirstPlayer \{out = first_player}
	if (<player> = <first_player>)
		Change \{num_players_finished = 0}
	endif
	SongFileManager func = get_song_end_time song_name = <song_name>
	printf qs(0xd27f443b) s = <total_end_time>
	TimeMarkerReached_SetParams time_offset = 0 time = <total_end_time>
	begin
	if TimeMarkerReached
		break
	endif
	wait \{1
		gameframe}
	repeat
	GetNumPlayersInGame
	if (<num_players> = 2)
		wait_on_player = 2
	else
		wait_on_player = 1
	endif
	printf \{qs(0x2736fd96)
		s = $Song_Win_Delay}
	wait \{$Song_Win_Delay
		seconds}
	Change num_players_finished = ($num_players_finished + 1)
	printf qs(0xa4b6cd96) i = ($num_players_finished) f = <num_players>
	GetNumPlayersInGame \{on_screen}
	if ($num_players_finished >= <num_players_shown> || $medley_song_won = 1)
		Change \{medley_song_won = 0}
		if ($is_network_game)
			spawnscriptnow \{online_end_song}
		else
			printf \{qs(0xaf979d44)}
			ExtendCrcPlayer song_won <player> out = type
			broadcastevent type = <type>
		endif
	endif
endscript

script load_songqpak \{async = 0
		resetZone = 0}
	printf \{'load_songqpak'}
	printstruct <...>
	printf '$current_song_qpak = %d' d = ($current_song_qpak)
	printf '$current_song_qpak_performance = %d' d = ($current_song_qpak_performance)
	get_song_performance song = <song_name>
	if NOT (<song_name> = $current_song_qpak &&
			<song_performance> = $current_song_qpak_performance)
		if (<resetZone> = 1)
			Transitions_ResetZone \{Profile = $Profile_Ven_Camera_Obj}
			if (<async> = 1)
				wait \{1
					gameframe}
			endif
		endif
		if (<song_name> = jamsession)
			unload_songqpak
		else
			jamsession_unload \{song_prefix = 'jamsession'}
			if (<song_performance> = 0)
				song_perf_ext = ''
			else
				FormatText TextName = song_perf_ext '_perf%i' i = (<song_performance> + 1)
			endif
			get_song_prefix song = <song_name>
			is_song_downloaded song_checksum = <song_name>
			if (<download> = 1)
				FormatText TextName = songqpak ($dlc_songpak_spec) i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			else
				GMan_SongTool_GetCurrentSongVersion
				FormatText TextName = songqpak 'songs/%i%s_song.pak' i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			endif
			printf channel = loading qs(0x5d13d0b1) i = <songqpak>
			if NOT load_song_pak songqpak = <songqpak> async = <async> song_name = <song_name>
				spawnscriptnow \{DownloadContentLost}
				return
			endif
		endif
		if ($use_old_system_setup = 0)
			band_load_anim_paks async = <async> song = <song_name>
		endif
		vocals_setappropriatefont song_name = <song_name>
		Change current_song_qpak = <song_name>
		Change current_song_qpak_performance = <song_performance>
		if GotParam \{song_prefix}
			FormatText checksumname = song_setup '%s_setup' s = <song_prefix>
			if ScriptExists <song_setup>
				spawnscriptnow <song_setup>
			endif
		endif
	endif
endscript

script unload_songqpak 
	if ($notetracker_quickplay_active = 1)
		return
	endif
	if NOT ($current_song_qpak = None)
		if ($current_song_qpak = jamsession)
			jamsession_unload \{song_prefix = 'jamsession'}
		else
			if ($current_song_qpak_performance = 0)
				song_perf_ext = ''
			else
				FormatText TextName = song_perf_ext '_perf%i' i = ($current_song_qpak_performance + 1)
			endif
			get_song_prefix song = ($current_song_qpak)
			is_song_downloaded song_checksum = ($current_song_qpak)
			if (<download> = 1)
				FormatText TextName = songqpak ($dlc_songpak_spec) i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			else
				FormatText TextName = songqpak 'songs/%i%s_song.pak' i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			endif
			printf channel = loading qs(0x055f66fb) i = <songqpak>
			unload_song_pak songqpak = <songqpak>
		endif
		Change \{current_song_qpak = None}
		Change \{current_song_qpak_performance = 0}
	endif
endscript

script unpause_loading_scripts 
	unpausespawnedscript \{Crowd_Loading_Surge}
	unpausespawnedscript \{Loading_Screen_Crowd_Swell}
	unpausespawnedscript \{Crowd_Loading_Whistle}
endscript
playing_song = 0

script song_allowed_in_random_selection 
	if StructureContains structure = (($gh_songlist_props).<song_checksum>) allowed_in_quickplay
		if (($<songlist_props>.<song_checksum>).allowed_in_quickplay = 0)
			return \{false}
		endif
	endif
	if StructureContains structure = (($gh_songlist_props).<song_checksum>) allowed_in_random
		if (($<songlist_props>.<song_checksum>).allowed_in_random = 0)
			return \{false}
		endif
	endif
	if StructureContains structure = (($gh_songlist_props).<song_checksum>) never_show_in_setlist
		return \{false}
	endif
	return \{true}
endscript

script song_has_vocal_phrases 
	if StructureContains structure = ($gh_songlist_props.<song_checksum>) trivia_no_phrases
		return \{false}
	endif
	return \{true}
endscript

script get_random_song 
	if ($random_songs_on_disc_only = 1)
		GetSonglistSize \{on_disc_only = true}
	else
		GetSonglistSize
	endif
	printf 'get_random_song: songlist size %d' d = <array_size>
	if (<array_size> <= 0)
		ScriptAssert \{'get_random_song: Unexpected songlist size 0'}
	endif
	begin
	GetRandomValue name = index integer a = 0 b = (<array_size> -1)
	use_song = true
	GetSonglistChecksum index = <index>
	accept_song = true
	if GotParam \{reject_song}
		if (<reject_song> = <song_checksum>)
			accept_song = false
		endif
	endif
	if (<accept_song> = true)
		if IsSongAvailable song = <song_checksum>
			if is_song_downloaded song_checksum = <song_checksum>
				break
			endif
		endif
	endif
	repeat
	printf 'get_random_song: picked %s' s = <song_checksum>
	return song = <song_checksum>
endscript

script start_gem_scroller \{starttime = 0
		practice_intro = 0
		endtime = 99999999
		loading_transition = 0
		restarting = 0}
	if ($g_has_inited_highway_scale_targets = 0)
		ResetYieldInfo \{Yield = false}
	endif
	if ($game_mode = freeplay)
		reset_song_time \{starttime = -100000}
	endif
	Change \{start_gem_scroller_running = 1}
	if GotParam \{song_name}
		printscriptinfo \{qs(0x00000000)}
		dump
		ScriptAssert \{qs(0x8f819fda)}
	endif
	GameMode_GetType
	GMan_SongFunc \{func = get_current_song}
	song = <current_song>
	determine_if_moments_should_play
	GetPakManCurrent \{map = zones}
	if GotParam \{pak}
		if NOT StructureContains \{structure = $LevelZones
				$current_level}
			ScriptAssert \{'No level named %s, check LevelZones in venuelist.q for available levels'
				s = $current_level}
		endif
		if NOT (<pak> = (($LevelZones.$current_level).zone))
			SetViewportProperties \{viewport = bg_viewport
				active = false}
			crowd_system_deinit
			wait \{4
				gameframes}
			venue_system_init
			wait \{4
				gameframes}
			crowd_system_init
			wait \{4
				gameframes}
			SetViewportProperties \{viewport = bg_viewport
				active = true}
			set_game_system_status \{system = Crowd
				state = on}
			set_game_system_status \{system = venue
				state = on}
		endif
	endif
	guitar_support_init_audio {
		loading_transition = <loading_transition>
		restarting = <restarting>
	}
	Change \{Star_power_verb_is_on = 0}
	SetSoundBussParams {Crowd_Star_Power = {vol = (($default_BussSet.Crowd_Star_Power.vol) -50) pitch = 0.0} time = 0.1}
	SetSoundBussParams {UI_Star_Power_Delay = {vol = (($default_BussSet.UI_Star_Power_Delay.vol)) pitch = 0.0} time = 0.1}
	<note_input> = $disable_note_input
	Change \{disable_note_input = 1}
	Change last_start_pressed_device = ($primary_controller)
	unpause_loading_scripts
	guitar_support_init_players <...>
	if ($notetracker_quickplay_active = 0)
		guitar_support_load_anims \{state = ingame}
	endif
	spawnscriptnow \{dynamic_ad_start}
	if ($end_credits = 2)
		Change \{end_credits = 0}
	endif
	if ($notetracker_quickplay_active = 0)
		guitar_support_init_venue loading_transition = <loading_transition>
	endif
	guitar_support_load_song {
		song = <song>
		song_name = <song>
		starttime = <starttime>
		song_start_time = <starttime>
	}
	get_song_section_array player = <player>
	Change current_section_array = <song_section_array>
	Change \{current_section_array_entry = 0}
	if (<loading_transition> = 0)
		Change \{playing_song = 1}
	endif
	if ($notetracker_quickplay_active = 0)
		if ($use_old_system_setup = 1)
			guitar_support_init_band loading_transition = <loading_transition> async = 1
		else
			Band_ClearAnimTempo
			band_start_anims
			start_loop_cameras \{name = musician1}
			start_loop_cameras \{name = musician2}
			start_loop_cameras \{name = musician3}
			start_loop_cameras \{name = musician4}
		endif
	endif
	BandManager_InvisibleCharactersCheat
	mark_unsafe_for_shutdown
	Yield
	Menu_Music_Off
	if ScriptExists \{Crowd_Swells_During_Stats_Screen}
		killspawnedscript \{name = Crowd_Swells_During_Stats_Screen}
	endif
	if IsSoundEventPlaying \{Surge_During_Stats_Screen}
		StopSoundEvent \{Surge_During_Stats_Screen
			fade_time = 1.5
			fade_type = linear}
	endif
	Yield
	Change current_starttime = <starttime>
	Change current_endtime = <endtime>
	Change \{showing_raise_axe = 0}
	Yield
	call_startup_scripts <...> song_name = <song>
	Yield
	killspawnedscript \{name = switch_to_no_band_camera}
	stop_cameracut
	guitar_support_load_hud <...>
	starttimeafterintro = <starttime>
	printf qs(0x9e16a5e5) s = ($current_transition)
	if ($current_transition = None)
		if GetNodeFlag \{LS_ENCORE_POST}
			Change \{current_transition = restartencore}
		else
			Change \{current_transition = fastintro}
		endif
	endif
	get_lag_values
	<transition_lag_offset> = (0 - <video_offset> - <audio_offset>)
	Yield
	Transition_GetTime type = ($current_transition)
	starttime = (<starttime> - <transition_time> - <transition_lag_offset>)
	if ($finalbandintro_transition_playing = 1)
		Transition_GetTime \{type = finalbandintro}
		starttime = (<starttime> - <transition_time>)
	endif
	if (<loading_transition> = 0)
		Yield
		setslomo \{0.001}
		reset_song_time starttime = <starttime>
	endif
	Yield
	if NOT ($use_character_debug_cam = 1)
	endif
	Yield
	Select_Visualizer_Bank
	if ($game_mode = practice)
		practicemode_init
	endif
	Yield \{'preload_song'}
	GetGlobalTags \{user_options}
	Yield
	GetArraySize \{$currently_holding
		param = holding_size}
	holding_count = 0
	begin
	SetArrayElement arrayName = currently_holding GlobalArray index = <holding_count> newValue = 0
	holding_count = (<holding_count> + 1)
	repeat <holding_size>
	Yield
	launch_fill_array_iterator song = <song>
	Yield
	create_highways_and_hud = true
	if ScreenElementExists \{id = hud_root}
		create_highways_and_hud = false
	endif
	if (<create_highways_and_hud> = true)
		create_highway_root_window
		Yield
		setup_band_hud
		Yield \{'setup_band_hud'}
	elseif ($game_mode = freeplay)
		freeplay_destroy_stats_ui
	endif
	GetNumPlayersInGame
	if (<num_players> > 0)
		GetFirstPlayer
		begin
		if (<player> = -1)
			break
		endif
		GetPlayerInfo <player> difficulty
		Yield
		GetPlayerInfo <player> is_onscreen out = player_on_screen
		GetGlobalTags \{user_options}
		GetPlayerInfo <player> part
		if (<player_on_screen>)
			if (<create_highways_and_hud> = true)
				if (<part> != vocals)
					if (<type> = freeplay)
						skip_highway_move = true
					else
						skip_highway_move = false
					endif
					setup_highway <...> skip_highway_move = <skip_highway_move>
				else
					SetArrayElement GlobalArray arrayName = highway_pos_table index = (<player> -1) newValue = ($highway_guitar1)
				endif
			endif
		endif
		Yield \{'setup_highway'}
		Yield
		if (<player_on_screen> = 1)
			printf qs(0x1c0eae59) d = <player>
			gem_scroller <...> song_name = <song>
		else
			printf qs(0xbaccf57e) d = <player>
			GetPlayerInfo <player> server_id
			CreatePlayerServer id = <server_id> player = <player>
			AddNetworkPlayerOutputs id = <server_id> player = <player> onscreen = 0
		endif
		Yield \{'ss gem_scroller'}
		if PlayerInfoEquals <player> is_local_client = 1
			spawnscriptlater check_for_star_power params = {<...>}
		endif
		Yield
		if (<player_on_screen> = 1)
			if ($medley_mode_on = 0)
				calc_songscoreinfo player = <player>
			endif
		endif
		if NOT GotParam \{no_score_update}
			spawnscriptnow update_score_fast params = {player = <player> player_on_screen = <player_on_screen>}
		endif
		if (<type> = freeplay)
			get_highway_hud_menu_parent player = <player>
			if ScreenElementExists id = <menu_parent>
				<menu_parent> :Obj_KillSpawnedScript name = freeplay_dropout_player_if_inactive
				<menu_parent> :Obj_SpawnScript freeplay_dropout_player_if_inactive params = {player = <player>}
				<menu_parent> :Obj_KillSpawnedScript name = freeplay_controller_pulling_observer
				<menu_parent> :Obj_SpawnScript freeplay_controller_pulling_observer params = {player = <player>}
			endif
		endif
		if (<song> = jamsession)
			spawnscriptnow jam_input_whammy_spawned id = jam_input_spawns params = {player = <player>}
		endif
		GetNextPlayer player = <player>
		repeat <num_players>
	endif
	Yield
	create_highway_visualizer
	GetPakManCurrent \{map = zones}
	Yield
	if (<loading_transition> = 0)
		if ($game_mode != tutorial)
			if NOT ($game_mode = practice)
				apply_band_logo_to_venue \{step = apply}
			endif
		endif
	endif
	Yield
	GH3_Set_Guitar_Verb_And_Echo_to_Dry
	SetupSongDSP
	if (<song> = jamsession)
		begin_jam_song
	endif
	Yield
	if (<loading_transition> = 1)
		printf \{qs(0xe36e0626)}
		mark_safe_for_shutdown
		Change \{transition_song_loading_hack = 0}
		Transition_Wait
		Change \{transition_song_loading_hack = 1}
		Change \{playing_song = 1}
		Yield \{'Transition_Wait'}
		StopRendering
		setslomo \{0.001}
		Transition_GetTime type = ($current_transition)
		songtime = (0 - <transition_time> - <transition_lag_offset> - <transition_lag_offset>)
		reset_song_time starttime = <songtime>
	endif
	if ($output_gpu_log = 1)
		Change \{gpu_log_start_logging = 1}
	endif
	if ($is_network_game)
		if (<loading_transition> = 0)
			unpausespawnedscript \{ui_event_block}
			ui_event_wait_for_safe
			generic_net_sync \{callback = start_first_net_song}
		endif
	endif
	Yield
	GameMode_GetType
	if (<type> = competitive)
		if (($competitive_rules = faceoff) || ($competitive_rules = team_faceoff) || ($competitive_rules = elimination) || ($competitive_rules = team_elimination))
			SetScoreScaling
		endif
	endif
	Transition_Play type = ($current_transition)
	Change \{current_transition = None}
	Yield \{'Transition_Play'}
	printf \{'KeepControllersAlive - song start'}
	KeepInGameControllersAlive
	Change \{check_for_unplugged_controllers = 1}
	Yield
	wait \{1
		gameframe}
	Yield \{'wait 1 gameframe'}
	if (<loading_transition> = 0)
		StopRendering
		Yield \{'StopRendering'}
		destroy_loading_screen
		Yield
	endif
	GameEvent_SongBegin
	if NOT ($in_sing_a_long = true)
		Init_Achievements
	endif
	setslomo \{$current_speedfactor}
	Yield
	if NOT ($calibrate_lag_enabled = 1)
		spawnscriptnow begin_song_after_intro params = {starttimeafterintro = <starttimeafterintro>}
	endif
	GetNumPlayersInGame
	if (<num_players> > 0)
		GetFirstPlayer
		begin
		init_star_power_debug player = <player>
		GetNextPlayer player = <player>
		repeat <num_players>
	endif
	Yield
	if ($finalbandintro_transition_playing = 1)
		spawnscriptlater \{wait_and_play_finalbandintro_transition}
	endif
	Yield
	mark_safe_for_shutdown
	Change disable_note_input = <note_input>
	if ($game_mode = practice)
		practice_mode_setup_sounds
	endif
	if ($game_mode = freeplay)
		if (<create_highways_and_hud> = false)
			set_active_highway_props \{alpha = 1
				time = 0.66}
			spawnscriptnow \{prepass_delay_show
				params = {
					time = 1.0
				}}
		endif
	endif
	spawnscriptnow \{game_fader}
	Change \{start_gem_scroller_running = 0}
endscript

script prepass_delay_show 
	wait <time> seconds
	set_active_highway_prepass_props \{alpha = 1}
endscript

script game_fader 
	wait \{10
		gameframes}
	fadetoblack \{off
		time = 0.0
		no_wait}
endscript

script launch_fill_array_iterator \{offset = 0}
	<gem_offset> = ($time_gem_offset - <offset>)
	get_lag_values
	<gem_offset> = (<gem_offset> - <audio_offset>)
	<gem_offset> = (<gem_offset> - <video_offset>)
	part_idx = 0
	parts_list = [guitar bass Drum]
	begin
	get_notetrack_part_text part = (<parts_list> [<part_idx>])
	easy_scroll_time = ($difficulty_list_props.easy.scroll_time)
	fill_input_offset = (((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0)
	spawnscriptlater gem_iterator params = {iterator_text = 'fill_array' song_name = <song> part = <part> part_crc = (<parts_list> [<part_idx>])
		time_offset = <fill_input_offset> strum_function = fill_input_array skipleadin = 0 not_player_specific = true add_part_to_event_id = true}
	part_idx = (<part_idx> + 1)
	repeat 3
endscript

script wait_and_play_finalbandintro_transition 
	FinalBandIntro_TransitionSetup
	Transition_Wait
	Transition_Play \{type = finalbandintro}
endscript

script begin_song_after_intro 
	begin
	GetSongTimeMs
	if (<time> >= <starttimeafterintro>)
		break
	endif
	wait \{1
		gameframe}
	repeat
	GMan_SendCallbackToAllGoals \{suffix = 'song_started'}
	Change \{lightshow_usetonemap = 1}
	begin_song
endscript

script kill_gem_scroller \{no_render = 0
		type = Normal
		stop_song = 1
		destroy_band = 1}
	if (<type> = Normal)
		mark_unsafe_for_shutdown
		if ($is_network_game = 1)
			kill_intro_celeb_ui
		endif
		printf \{qs(0x60e6d670)}
		if NOT GotParam \{restarting}
			StopRendering
		endif
		disable_highway_prepass
		printf \{qs(0x1395270d)}
		invalidate_globaltags
		printf \{qs(0x9c9eabc0)}
	endif
	spawnscriptnow \{dynamic_ad_stop}
	Change \{lightshow_allow_mood_changes = true}
	Change \{lightshow_last_mood_requested = None}
	printf \{chanel = sfx
		qs(0xc423c5b1)}
	Change \{crowd_in_jam_mode_song_state = 0}
	Change last_start_pressed_device = ($primary_controller)
	PrintMissingDrumPatterns
	destroy_sp_proto_hud_elements
	destroy_rock_meter
	if NOT (<type> = restart)
		LaunchGemEvent \{event = kill_objects}
		DestroyPlayerServer \{id = all}
		if (<stop_song> = 1)
			DeInitSongAudioSystem \{no_script_wait = 1}
		endif
		Kill_StarPower_Camera \{changecamera = 0}
		Kill_Group_Starpower_Anim
		SetPlayerInfo \{1
			star_power_amount = 0.0}
		SetPlayerInfo \{2
			star_power_amount = 0.0}
		SetPlayerInfo \{3
			star_power_amount = 0.0}
		SetPlayerInfo \{4
			star_power_amount = 0.0}
		Kill_StarPower_StageFX \{player = 1
			ifEmpty = 0}
		Kill_StarPower_StageFX \{player = 2
			ifEmpty = 0}
		Kill_StarPower_StageFX \{player = 3
			ifEmpty = 0}
		Kill_StarPower_StageFX \{player = 4
			ifEmpty = 0}
		Change \{showing_raise_axe = 0}
		if ($game_mode = practice)
			practicemode_deinit
		endif
		notemap_deinit
		Destroy2DParticleSystem \{id = all}
		killspawnedscript \{name = Do_StarPower_TeslaFX}
		killspawnedscript \{name = Create_StarPower_TeslaFX}
	endif
	if NOT (<type> = Outro)
		if ScreenElementExists \{id = starpower_container_leftp1}
			LegacyDoScreenElementMorph \{id = starpower_container_leftp1
				alpha = 0}
		endif
		if ScreenElementExists \{id = starpower_container_leftp2}
			LegacyDoScreenElementMorph \{id = starpower_container_leftp2
				alpha = 0}
		endif
		if ScreenElementExists \{id = starpower_container_rightp1}
			LegacyDoScreenElementMorph \{id = starpower_container_rightp1
				alpha = 0}
		endif
		if ScreenElementExists \{id = starpower_container_rightp2}
			LegacyDoScreenElementMorph \{id = starpower_container_rightp2
				alpha = 0}
		endif
		kill_debug_elements
		GameEvent_VenueExit
		GuitarEvent_VenueExit
		destroy_credits_menu
		deinit_star_power_debug
		killspawnedscript \{name = move_2d_elements_to_default}
		killspawnedscript \{name = wait_and_play_you_rock_movie}
		killspawnedscript \{name = star_power_activate_and_drain}
		killspawnedscript \{name = highway_pulse_multiplier_loss}
		killspawnedscript \{name = update_combo_meter_spawned}
		killspawnedscript \{name = update_star_meter_spawned}
		kill_pulsate_star_power_bulbs \{player = 1}
		kill_pulsate_star_power_bulbs \{player = 2}
		stop_custom_song
		killspawnedscript \{name = guitar_jam_drum_playback}
		killspawnedscript \{name = jam_input_whammy_spawned}
		jam_stop_all_samples
		jam_deinit_reverb
	endif
	got_param_restarting = false
	if GotParam \{restarting}
		got_param_restarting = true
	endif
	GetMaxLocalPlayers
	player = 1
	begin
	if NOT (<type> = Outro)
		SetPlayerInfo <player> star_power_used = 0
		SetPlayerInfo <player> whammy_on = 0
	endif
	if NOT (<type> = Outro)
		if ($game_mode != freeplay || (<type> = Normal && <got_param_restarting> = false))
			destroy_highway <...>
		endif
	endif
	if NOT (<type> = restart)
		GuitarEvent_KillSong <...> loading_transition = 1
		destroy_hud player = <player>
		if ($game_mode != freeplay)
			vocals_destroy_highway player = <player>
		endif
	endif
	player = (<player> + 1)
	repeat <max_players>
	if NOT (<type> = restart)
		if ($game_mode != freeplay || (<type> = Normal && <got_param_restarting> = false))
			destroy_band_hud
		endif
		kill_startup_script <...>
		killspawnedscript \{name = GuitarEvent_MissedNote}
		killspawnedscript \{name = GuitarEvent_UnnecessaryNote}
		killspawnedscript \{name = GuitarEvent_HitNotes}
		killspawnedscript \{name = GuitarEvent_HitNote}
		killspawnedscript \{name = GuitarEvent_StarPowerOn}
		killspawnedscript \{name = GuitarEvent_StarPowerOff}
		killspawnedscript \{name = GuitarEvent_StarHitNote}
		killspawnedscript \{name = GuitarEvent_StarSequenceBonus}
		killspawnedscript \{name = GuitarEvent_StarMissNote}
		killspawnedscript \{name = Create_Revival_Highway_glow}
		killspawnedscript \{name = Create_Revival_Vocal_Highway_glow}
		killspawnedscript \{name = GuitarEvent_WhammyOn}
		killspawnedscript \{name = GuitarEvent_WhammyOff}
		killspawnedscript \{name = GuitarEvent_StarWhammyOn}
		killspawnedscript \{name = GuitarEvent_StarWhammyOff}
		killspawnedscript \{name = GuitarEvent_Note_Window_Open}
		killspawnedscript \{name = GuitarEvent_Note_Window_Close}
		killspawnedscript \{name = GuitarEvent_crowd_poor_medium}
		killspawnedscript \{name = GuitarEvent_crowd_medium_good}
		killspawnedscript \{name = GuitarEvent_crowd_medium_poor}
		killspawnedscript \{name = GuitarEvent_crowd_good_medium}
		killspawnedscript \{name = GuitarEvent_CreateFirstGem}
		killspawnedscript \{name = highway_pulse_black}
		killspawnedscript \{name = GuitarEvent_HitNote_Spawned}
		killspawnedscript \{name = hit_note_fx}
		killspawnedscript \{name = Do_StarPower_StageFX}
		killspawnedscript \{name = Do_StarPower_Camera}
		killspawnedscript \{name = first_gem_fx}
		killspawnedscript \{name = gem_iterator}
		killspawnedscript \{name = gem_array_stepper}
		killspawnedscript \{name = gem_array_events}
		killspawnedscript \{name = gem_step}
		killspawnedscript \{name = gem_step_end}
		killspawnedscript \{name = WatchForStartPlaying_iterator}
		killspawnedscript \{name = DrumControlScript_Iterator}
		killspawnedscript \{name = drummer_controlscript}
		killspawnedscript \{name = DrumDroid_Timers}
		killspawnedscript \{name = Drummer_Hold_Hit_Arm_R}
		killspawnedscript \{name = Drummer_Hold_Hit_Arm_L}
		killspawnedscript \{name = Tempo_matching_iterator}
		killspawnedscript \{name = MomentCamera_PlayAnim_Spawned}
		ClearMeasureCallbacks
		ClearBeatCallbacks
		killspawnedscript \{name = gem_scroller}
		killspawnedscript \{name = button_checker}
		killspawnedscript \{name = check_buttons}
		killspawnedscript \{name = fretbar_update_tempo}
		killspawnedscript \{name = fretbar_update_hammer_on_tolerance}
		killspawnedscript \{name = move_whammy}
		killspawnedscript \{name = move_highway_2d}
		killspawnedscript \{name = update_score_fast}
		killspawnedscript \{name = check_for_star_power}
		killspawnedscript \{name = wait_for_inactive}
		killspawnedscript \{name = GuitarEvent_PreFretbar}
		killspawnedscript \{name = GuitarEvent_Fretbar}
		killspawnedscript \{name = pulsate_all_star_power_bulbs}
		killspawnedscript \{name = pulsate_star_power_bulb}
		killspawnedscript \{name = rock_meter_star_power_on}
		killspawnedscript \{name = rock_meter_star_power_off}
		killspawnedscript \{name = hud_activated_star_power}
		killspawnedscript \{name = hud_move_note_scorebar}
		killspawnedscript \{name = hud_lightning_alert}
		killspawnedscript \{name = net_whammy_pitch_shift}
		killspawnedscript \{name = net_control_whammy_pitch_loop}
		killspawnedscript \{name = star_power_whammy}
		killspawnedscript \{name = show_star_power_ready}
		killspawnedscript \{name = hud_glowburst_alert}
		Change \{star_power_ready_on_p1 = 0}
		Change \{star_power_ready_on_p2 = 0}
		killspawnedscript \{name = event_iterator}
		killspawnedscript \{name = win_song}
		killspawnedscript \{name = hand_note_iterator}
		killspawnedscript \{name = show_coop_raise_axe_for_starpower}
		killspawnedscript \{name = net_whammy_pitch_shift}
		killspawnedscript \{name = Crowd_AllPlayAnim}
		killspawnedscript \{name = hud_activated_star_power_spawned}
		killspawnedscript \{name = play_intro}
		killspawnedscript \{name = begin_song_after_intro}
		kill_medley_spawned_scripts
		printf \{qs(0x6d543328)}
		killspawnedscript \{id = song_event_scripts}
		printf \{qs(0xa785200e)}
		Destroy_AllWhammyFX
		killspawnedscript \{name = morph_scroll_speed}
		destroy_intro
	endif
	if NOT (<type> = Outro)
		killspawnedscript \{name = move_highway_prepass}
		killspawnedscript \{name = waitandkillhighway}
		killspawnedscript \{name = testlevel_debug}
		destroy_net_popup
		LightShow_Shutdown
		TurnOffEncoreGodray
		DestroyParticlesByGroupID \{groupID = zoneparticles}
		Transition_KillAll
		killspawnedscript \{name = wait_and_play_finalbandintro_transition}
		killspawnedscript \{name = GuitarEvent_SongFailed_Spawned}
		if NOT GotParam \{for_credits_venue}
			killspawnedscript \{name = GuitarEvent_SongWon_Spawned}
			killspawnedscript \{name = Cheer_Before_Explosion}
			killspawnedscript \{name = You_Rock_Waiting_Crowd_SFX}
			killspawnedscript \{name = waitandkillhighway}
			killspawnedscript \{name = wait_and_play_you_rock_movie}
			killspawnedscript \{name = create_exploding_text}
		endif
		deinit_jam_audio \{keep_drumkit}
	endif
	if (<type> = Outro)
		if GotParam \{kill_cameracuts_iterator}
			killspawnedscript \{name = cameracuts_iterator}
			killspawnedscript \{name = autocut_cameracuts_iterator}
		endif
		end_song <...>
	endif
	if (<type> = Normal)
		killspawnedscript \{id = zone_scripts}
		GetPakManCurrentName \{map = zones}
		FormatText checksumname = zone_killsong '%s_KillSong' s = <pakname>
		if ScriptExists <zone_killsong>
			<zone_killsong>
		endif
		if IsPS3
			if ($game_mode = p2_pro_faceoff)
				printf \{'hiding h2h glitch'}
				hide_glitch \{num_frames = 90}
			endif
		endif
		if NOT GotParam \{freeplay_visualizer_hack}
			destroy_movie_viewport
		endif
		destroy_bg_viewport
		if ($game_mode != tutorial)
			if ($use_old_system_setup = 1)
				if (<destroy_band> = 0)
					Drummer_Kill_Spawnscripts
					BandManager_StopAllAnimIterators
					band_unload_anim_paks
					prepare_band_for_main_menu
				else
					persistent_band_stop_and_unload_anims
				endif
			endif
		endif
		destroy_vocalist_dummy
		destroy_all_camera_lock_targets
		destroy_cameracuts
		reset_parts_with_mic
		restore_idle_faces
		Change \{structurename = musician1_info
			stance = Stance_Old}
		Change \{structurename = musician1_info
			next_stance = Stance_FrontEnd}
		Change \{structurename = musician1_info
			current_anim = Idle}
		Change \{structurename = musician1_info
			cycle_anim = true}
		Change \{structurename = musician1_info
			next_anim = None}
		Change \{structurename = musician1_info
			playing_missed_note = false}
		Change \{structurename = musician2_info
			stance = Stance_Old}
		Change \{structurename = musician2_info
			next_stance = Stance_FrontEnd}
		Change \{structurename = musician2_info
			current_anim = Idle}
		Change \{structurename = musician2_info
			cycle_anim = true}
		Change \{structurename = musician2_info
			next_anim = None}
		Change \{structurename = musician2_info
			playing_missed_note = false}
		Change \{structurename = musician3_info
			stance = Stance_Old}
		Change \{structurename = musician3_info
			next_stance = Stance_FrontEnd}
		Change \{structurename = musician3_info
			current_anim = Idle}
		Change \{structurename = musician3_info
			cycle_anim = true}
		Change \{structurename = musician3_info
			next_anim = None}
		Change \{structurename = musician3_info
			playing_missed_note = false}
		Change \{structurename = musician4_info
			stance = Stance_Old}
		Change \{structurename = musician4_info
			next_stance = Stance_FrontEnd}
		Change \{structurename = musician4_info
			current_anim = Idle}
		Change \{structurename = musician4_info
			cycle_anim = true}
		Change \{structurename = musician4_info
			next_anim = None}
		Change \{structurename = musician4_info
			playing_missed_note = false}
		destroy_debug_measure_text
		kill_character_scripts
		Change \{check_for_unplugged_controllers = 0}
		shut_down_practice_mode
		destroy_menu \{menu_id = you_rock_container}
		KillMovie \{TextureSlot = 1}
	endif
	if (<type> = Normal)
		printf \{qs(0x0c77f0ad)}
		wait \{2
			gameframes}
		printf \{qs(0xfa6acfe6)}
		if (<stop_song> = 1)
			end_song
		endif
		if NOT (<no_render> = 1)
			if ($shutdown_game_for_signin_change_flag = 0)
				StartRendering
			endif
		endif
		printf \{qs(0xad55869c)}
		mark_safe_for_shutdown
		Change \{playing_song = 0}
		broadcastevent \{type = kill_gem_scroller_done}
	endif
	if ($medley_mode_on && $failed_song = 0)
		if GotParam \{restarting}
			shutdown_for_medley \{restarting}
		else
			shutdown_for_medley
		endif
	endif
	Destroy_Band_Failing_Vignette
	killspawnedscript \{name = do_diff_change_spawned}
	killspawnedscript \{name = wait_and_change_difficulty}
	killspawnedscript \{name = BM_Wait_For_Death}
	kill_highway_visualizer
	if ($game_mode = freeplay)
		set_all_highway_prepass_props \{alpha = 0}
		set_all_highway_props \{alpha = 0
			time = 0.66}
	endif
endscript

script restart_gem_scroller \{no_render = 0
		loading_transition = 0
		restarting = 1}
	Yield
	mark_unsafe_for_shutdown
	disable_pause
	Change \{hack_global_to_allow_jam_songs_to_patch_a_single_frame_that_restart_gem_scroller_is_not_running = 0}
	if GotParam \{replay}
		if are_replays_enabled
			Change \{input_mode = Play}
			ReadDataBuffer name = replay FileName = <replay>
			DataBufferGetChecksum \{name = replay}
			<song_name> = <checksum>
			DataBufferGetChecksum \{name = replay}
			Change current_transition = <checksum>
			DataBufferGetInt \{name = replay}
			if (<int> > 0)
				DataBufferGetInt \{name = replay}
				SetPlayerInfo 1 controller = <int>
				DataBufferGetInt \{name = replay}
				SetPlayerInfo 2 controller = <int>
				DataBufferGetInt \{name = replay}
				SetPlayerInfo 3 controller = <int>
				DataBufferGetInt \{name = replay}
				SetPlayerInfo 4 controller = <int>
			else
				DataBufferGetInt \{name = replay}
				DataBufferGetInt \{name = replay}
				DataBufferGetInt \{name = replay}
				DataBufferGetInt \{name = replay}
				SetPlayerInfo \{1
					controller = -1}
				SetPlayerInfo \{2
					controller = -1}
				SetPlayerInfo \{3
					controller = -1}
				SetPlayerInfo \{4
					controller = -1}
			endif
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			<difficulty> = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			<difficulty2> = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			<difficulty3> = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			<difficulty4> = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			SetPlayerInfo 1 part = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			SetPlayerInfo 2 part = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			SetPlayerInfo 3 part = <checksum>
			DataBufferGetChecksum \{name = replay
				bytes = 16}
			SetPlayerInfo 4 part = <checksum>
			DataBufferGetInt \{name = replay}
			<seed1> = <int>
			DataBufferGetInt \{name = replay}
			<seed2> = <int>
			DataBufferGetInt \{name = replay}
			<seed3> = <int>
			DataBufferGetInt \{name = replay}
			<seed4> = <int>
			DataBufferGetInt \{name = replay}
			<seed5> = <int>
			DataBufferGetInt \{name = replay}
			<seed6> = <int>
			SetRandomSeeds seed1 = <seed1> seed2 = <seed2> seed3 = <seed3> seed4 = <seed4> seed5 = <seed5> seed6 = <seed6>
			Change \{replay_suspend = 1}
		endif
	else
		Change \{input_mode = record}
	endif
	Yield
	if (<loading_transition> = 0)
		PauseGame
	endif
	<allow_unfocus> = 1
	ui_event_get_top
	if ((<base_name> = 'song_breakdown') && ($last_song_played = jamsession))
		printf \{channel = bkutcher
			qs(0xbc19ca49)}
		<allow_unfocus> = 0
	endif
	if (<allow_unfocus> = 1)
		FinalPrintf \{'unfocusing root window'}
		LaunchEvent \{type = unfocus
			target = root_window}
		FinalPrintf \{'done unfocusing root window'}
	endif
	Yield
	if (<loading_transition> = 0)
		kill_gem_scroller no_render = <no_render> restarting
		mark_unsafe_for_shutdown
	endif
	Yield \{'kill_gem_scroller'}
	start_gem_scroller <...>
	Yield
	Change \{check_for_unplugged_controllers = 1}
	UnBindGuitarControllerStatus
	Yield
	LaunchEvent \{type = focus
		target = root_window}
	Yield
	killspawnedscript \{name = YieldMonitor}
	if (<loading_transition> = 0)
		if GameIsPaused
			gh3_start_pressed
		endif
	endif
endscript

script reset_song_time \{starttime = 0}
	Change current_deltatime = (1.0 / 60.0)
	Change current_time = (<starttime> / 1000.0)
	if ($input_mode = Play)
		Change \{replay_suspend = 0}
	endif
	ResetSongTimer starttime = (<starttime> / 1000.0)
endscript

script fill_input_array 
	ScriptAssert \{qs(0x6838c90b)}
endscript

script create_gem 
	Create2DGem <...>
endscript

script gem_iterator \{song_name = test
		difficulty = easy
		array_type = qs(0x13e59f9f)
		not_player_specific = false
		add_part_to_event_id = false}
	if (<not_player_specific> = false)
		spawnscriptnow gem_array_events params = {<...>}
	endif
	if (<not_player_specific> = false)
		if ($medley_mode_on = 0)
			if PlayerInfoEquals <player> part = vocals
				GameMode_GetType
				if (<type> != freeplay)
					return
				endif
				if NOT GotParam \{use_input_array}
					return
				endif
			endif
		endif
	endif
	if GotParam \{use_input_array}
		get_difficulty_text_nl difficulty = <difficulty> no_rhythm
		spawnscriptnow gem_array_stepper params = {<...>}
	else
		spawnscriptnow gem_array_stepper params = {<...> difficulty = easy difficulty_text_nl = 'easy'}
		spawnscriptnow gem_array_stepper params = {<...> difficulty = medium difficulty_text_nl = 'medium'}
		spawnscriptnow gem_array_stepper params = {<...> difficulty = hard difficulty_text_nl = 'hard'}
		spawnscriptnow gem_array_stepper params = {<...> difficulty = expert difficulty_text_nl = 'expert'}
	endif
endscript

script gem_array_events \{not_player_specific = false
		add_part_to_event_id = false}
	GetPlayerInfo <player> difficulty
	get_difficulty_text_nl difficulty = <difficulty> no_rhythm
	get_notetrack_part_text player = <player>
	printf qs(0xe2471912) i = <iterator_text> d = <difficulty_text_nl>
	ClearEventHandlerGroup \{iterator_group}
	if (<not_player_specific> = false)
		ExtendCrcPlayer gem_step_event <player> out = id
	elseif (<add_part_to_event_id> = true)
		ExtendCrc gem_step_event <part> out = id
	else
		id = gem_step_event
	endif
	ExtendCRCWithString checksum = <id> string = <iterator_text>
	<id> = <ExtendedChecksum>
	ExtendCRCWithString checksum = <id> string = <difficulty_text_nl>
	<id> = <ExtendedChecksum>
	SetEventHandler response = call_script event = <id> Scr = gem_step params = {<...>} group = iterator_group
	if (<not_player_specific> = false)
		ExtendCrcPlayer gem_step_begin <player> out = id
	elseif (<add_part_to_event_id> = true)
		ExtendCrc gem_step_begin <part> out = id
	else
		id = gem_step_begin
	endif
	ExtendCRCWithString checksum = <id> string = <iterator_text>
	<id> = <ExtendedChecksum>
	ExtendCRCWithString checksum = <id> string = <difficulty_text_nl>
	<id> = <ExtendedChecksum>
	SetEventHandler response = call_script event = <id> Scr = gem_step_begin params = {<...>} group = iterator_group
	if (<not_player_specific> = false)
		ExtendCrcPlayer gem_step_end <player> out = id
	elseif (<add_part_to_event_id> = true)
		ExtendCrc gem_step_end <part> out = id
	else
		id = gem_step_end
	endif
	ExtendCRCWithString checksum = <id> string = <iterator_text>
	<id> = <ExtendedChecksum>
	ExtendCRCWithString checksum = <id> string = <difficulty_text_nl>
	<id> = <ExtendedChecksum>
	SetEventHandler response = call_script event = <id> Scr = gem_step_end params = {<...>} group = iterator_group
	if NOT GotParam \{use_input_array}
		ExtendCrcPlayer restart_gem_array_events <player> out = id
		SetEventHandler response = switch_script event = <id> Scr = gem_array_events params = {<...>} group = iterator_group
	endif
	printf qs(0xb5097e09) s = <difficulty_text_nl>
	Block
	ExtendedChecksum = null
	iterator_text = 'null'
	difficulty_text_nl = 'null'
endscript

script gem_step 
	GemStep
endscript

script gem_step_begin 
	if ($medley_mode_on)
		spawnscriptnow medley_gem_step_begin params = {
			medley_index = <medley_index>
			next_medley_index = <next_medley_index>
			medley_time = <medley_time>
			song = <song>
			wait_time = <wait_time>
		}
	endif
endscript

script gem_step_end 
	if ($medley_mode_on && $medley_song_won = 0)
		Change \{medley_song_won = -1}
		wait \{3
			seconds}
		Change \{medley_song_won = 1}
	endif
endscript

script gem_array_stepper 
	gem_array_stepper_CFunc_Setup
	begin
	if gem_array_stepper_CFunc
		break
	endif
	wait \{1
		gameframe}
	repeat
	gem_array_stepper_CFunc_Cleanup
endscript

script default_startup 
endscript

script call_startup_scripts 
	Change \{current_startup_script = default_startup}
	GetGlobalTags \{user_options}
	get_song_struct song = <song_name>
	setlagoffsets song_struct = <song_struct>
	if StructureContains structure = <song_struct> name = startup_script
		Change current_startup_script = (<song_struct>.startup_script)
	endif
	if StructureContains structure = <song_struct> name = exit_Script
		Change current_exit_script = (<song_struct>.exit_Script)
	else
	endif
	if StructureContains structure = <song_struct> name = hammer_on_measure_scale
		Change hammer_on_measure_scale = (<song_struct>.hammer_on_measure_scale)
	else
		Change \{hammer_on_measure_scale = $default_hammer_on_measure_scale}
	endif
	spawnscriptnow ($current_startup_script) params = {<...>}
endscript

script addlagoffsets 
	audio_lag_ms = 0
	gem_lag_ms = 0
	input_lag_ms = 0
	drum_midi_lag_ms = 0
	prefretbar_time = 0
	GetPlatform
	if StructureContains structure = <settings> name = <Platform>
		AddParams (<settings>.<Platform>)
	endif
	Change time_audio_offset = ($time_audio_offset + <audio_lag_ms>)
	Change time_gem_offset = ($time_gem_offset + <gem_lag_ms>)
	Change time_input_offset = ($time_input_offset + <input_lag_ms>)
	Change time_drum_midi_offset = ($time_drum_midi_offset + <drum_midi_lag_ms>)
	Change prefretbar_time = ($prefretbar_time + <prefretbar_time>)
endscript

script setlagoffsets 
	Change \{time_audio_offset = 0.0}
	Change \{time_gem_offset = 0.0}
	Change \{time_input_offset = 0.0}
	Change \{time_drum_midi_offset = 0.0}
	Change \{prefretbar_time = 0.0}
	addlagoffsets settings = ($default_lag_settings)
	practice_settings = None
	if ($game_mode = practice && $current_speedfactor != 1.0)
		if NOT PlayerInfoEquals \{1
				part = Drum}
			if ($current_speedfactor >= 0.8)
				practice_settings = practice_slow_lag_settings
			elseif ($current_speedfactor >= 0.6)
				practice_settings = practice_slower_lag_settings
			else
				practice_settings = practice_slowest_lag_settings
			endif
		else
			if ($current_speedfactor >= 0.8)
				practice_settings = practice_drum_slow_lag_settings
			elseif ($current_speedfactor >= 0.6)
				practice_settings = practice_drum_slower_lag_settings
			else
				practice_settings = practice_drum_slowest_lag_settings
			endif
		endif
	endif
	if NOT (<practice_settings> = None)
		addlagoffsets settings = ($<practice_settings>)
	endif
	if IsDolbyDigitalEnabled
		addlagoffsets settings = ($default_lag_settings_dolbydigital)
		ExtendCrc <practice_settings> '_dolbydigital' out = practice_settings_dolbydigital
		if GlobalExists name = <practice_settings_dolbydigital>
			addlagoffsets settings = ($<practice_settings_dolbydigital>)
		endif
	endif
	if StructureContains structure = <song_struct> name = gem_offset
		Change time_gem_offset = ($time_gem_offset + (<song_struct>.gem_offset))
	endif
	if StructureContains structure = <song_struct> name = input_offset
		Change time_input_offset = ($time_input_offset + (<song_struct>.input_offset))
	endif
endscript

script kill_startup_script 
	if NOT ($current_startup_script = nothing)
		killspawnedscript name = ($current_startup_script)
	endif
	if NOT ($current_exit_script = nothing)
		spawnscriptnow ($current_exit_script) params = {<...>}
	endif
endscript

script setup_dynamic_ad_recording_for_zone \{zone = 0x00000000}
	printf \{qs(0xa273b378)}
	printstruct <...>
	DynamicAdManager_CacheGlob glob = <zone>
endscript
load_venue_reapply_band_logo = 0

script Load_Venue \{block_scripts = 0}
	printf \{qs(0xd1e18ed5)}
	GetPakManCurrent \{map = zones}
	if GotParam \{pak}
		if NOT StructureContains \{structure = $LevelZones
				$current_level}
			ScriptAssert \{'No level named %s, check LevelZones in venuelist.q for available levels'
				s = $current_level}
		endif
		if (<pak> = (($LevelZones.$current_level).zone))
			Transitions_ResetZone
			return
		else
			printf \{channel = marc
				qs(0x993ca23d)}
			Change \{encore_transitioned_played = false}
			LightShow_SetMapping \{clear}
			Destroy_Crowd_Models
			destroy_visualizer
			EngineCleanupLevel
			SetPakManCurrentBlock map = zones pak = None block_scripts = <block_scripts>
		endif
	else
	endif
	ResetPulseEvents
	FormatText TextName = FileName '%s.pak' s = (($LevelZones.$current_level).name)
	GetContentFolderIndexFromFile <FileName>
	if (<device> = content)
		if NOT Downloads_OpenContentFolder content_index = <content_index>
			DownloadContentLost
			return
		endif
	endif
	if NOT SetPakManCurrentBlock map = zones pak = (($LevelZones.$current_level).zone) block_scripts = <block_scripts>
		DownloadContentLost
		return
	endif
	if (<device> = content)
		Downloads_CloseContentFolder content_index = <content_index>
	endif
	VenueTypeDecision
	if ($end_credits = 0)
		Setup_All_Crowd_Sounds_Based_On_Zone
	endif
	spawnscriptnow \{Skate8_SFX_Backgrounds_New_Area
		params = {
			BG_SFX_Area = $Current_Crowd_Looping_BG_Area_Good
			fadeintime = 10.0
			fadeintype = linear
		}}
	spawnscriptnow \{Game_Start_Crowd_Cheer}
	if NodeFlagExists \{NODEFLAG_VIEWERLIGHTS}
		if ($current_level = load_z_viewer ||
				$current_level = viewer)
			ChangeNodeFlag \{NODEFLAG_VIEWERLIGHTS
				0}
			ChangeNodeFlag \{NODEFLAG_VIEWERLIGHTS
				1}
			($default_loading_screen.Destroy)
		else
			ChangeNodeFlag \{NODEFLAG_VIEWERLIGHTS
				0}
		endif
	endif
	if ($load_venue_reapply_band_logo = 1)
		apply_band_logo_to_venue \{step = apply}
		Change \{load_venue_reapply_band_logo = 0}
	endif
endscript

script start_song \{device_num = 0
		practice_intro = 0
		endtime = 999999999}
	mark_unsafe_for_shutdown
	persistent_band_pause_all_characters
	if ($is_network_game = 0)
		xenon_singleplayer_session_init
	endif
	set_rich_presence_game_mode
	if ($autotest_on = 1)
		Change current_transition = ($autotest_transition)
	elseif NOT ($debug_current_transition = None)
		Change current_transition = ($debug_current_transition)
	else
		Transition_SelectTransition practice_intro = <practice_intro>
	endif
	GameMode_GetType
	if (($is_network_game = 0) || (<type> = career))
		if NOT GotParam \{starttime}
			if GotParam \{uselaststarttime}
				starttime = ($current_starttime)
			else
				starttime = 0
			endif
		endif
		if NOT GotParam \{difficulty}
			GetPlayerInfo \{1
				difficulty}
		endif
		if NOT GotParam \{difficulty2}
			GetPlayerInfo \{2
				difficulty
				out = difficulty2}
		endif
		if GotParam \{song_name}
			if (<song_name> = jamsession)
				if musicstudio_mainobj :MusicStudio_IsInMusicStudio
					GMan_SongTool_SetCurrentSong song = <song_name>
				endif
			else
				GMan_SongTool_SetCurrentSong song = <song_name>
			endif
		endif
		restart_gem_scroller {
			difficulty = <difficulty>
			difficulty2 = <difficulty2>
			starttime = <starttime>
			practice_intro = <practice_intro>
			endtime = <endtime>
			restarting = 0
		}
	endif
	Change \{check_for_unplugged_controllers = 1}
endscript

script YieldMonitor 
	begin
	wait \{1
		gameframe}
	YieldPing
	repeat
endscript

script restart_song \{practice_intro = 0
		loading_transition = 0}
	if ($shutdown_game_for_signin_change_flag = 1)
		return
	endif
	mark_unsafe_for_shutdown
	disable_pause
	persistent_band_pause_all_characters
	Change \{finalbandintro_transition_playing = 0}
	GMan_SongTool_GetCurrentSong
	if ($medley_mode_on)
		get_medley_song \{index = 0}
		current_song = <medley_song>
		medley_reset \{restarting}
	endif
	if (<loading_transition> = 1)
		ResetYieldInfo \{Yield = true}
		printf \{qs(0x2fc96321)}
		killspawnedscript \{name = YieldMonitor}
		spawnscriptnow \{YieldMonitor}
		Yield
		BandManager_StopAllAnimIterators
		Drummer_Kill_Spawnscripts
		kill_gem_scroller \{type = restart}
		Yield \{'kill_gem_scroller'}
		setup_bg_viewport
		Yield \{'setup_bg_viewport'}
		killspawnedscript \{name = switch_to_no_band_camera}
		stop_cameracut
		create_cameracuts \{in_game = 1}
		Transition_SelectTransition practice_intro = <practice_intro>
		if ($current_transition = intro)
			Change \{current_transition = loadingintro}
		endif
		Yield
		songtime = 0
		Transition_GetTime \{type = loading}
		songtime = (<songtime> - <transition_time>)
		Transition_GetTime type = ($current_transition)
		songtime = (<songtime> - <transition_time>)
		reset_song_time starttime = <songtime>
		Yield
		GameMode_GetType
		if ((($is_network_game) = 1) && (<type> = competitive || <type> = quickplay))
			Transition_Play \{type = onlineloading}
		else
			Transition_Play \{type = loading}
		endif
		Yield
		Yield
		UnpauseGame
		Yield
		Yield
		Yield
		Yield
		if ($use_old_system_setup = 1)
			persistent_band_stop_and_unload_anims
		endif
		load_songqpak song_name = <current_song> async = 1 resetZone = 1
		Yield \{'load_songqpak'}
		Change \{finished_gig_band_rebuild = 0}
		if ($use_old_system_setup = 1)
			persistent_band_prepare_for_song \{async = 1}
		endif
	else
		printf \{qs(0x224b28e2)}
		ResetYieldInfo \{Yield = false}
	endif
	Yield
	StopSoundEvent \{Crowd_Fail_Song_SFX}
	Yield
	if (<loading_transition> = 0 &&
			<practice_intro> = 0)
		if NOT ($debug_current_transition = None)
			Change current_transition = ($debug_current_transition)
		elseif ($current_transition = forceintro)
			Change \{current_transition = fastintro}
			Transition_SelectTransition practice_intro = <practice_intro>
		elseif ($current_transition = forcelongintro)
			Change \{current_transition = intro}
		else
			Change \{current_transition = fastintro}
		endif
		if (GetNodeFlag LS_ENCORE_POST)
			Change \{current_transition = restartencore}
		endif
		if ($debug_encore)
			Change \{current_transition = Encore}
		endif
	endif
	Yield \{'Select Transition Logic'}
	UnpauseGame
	Yield
	GetPlayerInfo \{1
		difficulty
		out = difficulty1}
	GetPlayerInfo \{2
		difficulty
		out = difficulty2}
	starttime = ($current_starttime)
	if (<practice_intro> = 1)
		starttime = ($practice_start_time)
		endtime = ($practice_end_time)
	endif
	if (<loading_transition> = 0)
		no_render = 1
	else
		no_render = 0
	endif
	if NOT musicstudio_mainobj :MusicStudio_IsInMusicStudio
		if (<current_song> = jamsession)
			printf \{channel = bkutcher
				qs(0xb5b862fb)}
			Change \{transition_song_loading_hack = 0}
			Change \{hack_global_to_allow_jam_songs_to_patch_a_single_frame_that_restart_gem_scroller_is_not_running = 1}
			if (<loading_transition> = 0)
				kill_gem_scroller \{type = Normal}
				jam_quickplay_get_and_start_song
			endif
			return
		endif
	else
		create_loading_screen
	endif
	restart_gem_scroller {
		difficulty = <difficulty1>
		difficulty2 = <difficulty2>
		starttime = <starttime>
		practice_intro = <practice_intro>
		endtime = <endtime>
		loading_transition = <loading_transition>
		no_render = <no_render>
	}
endscript

script debug_flash_star 
	begin
	LaunchGemEvent \{event = debug_star}
	wait \{8
		gameframes}
	LaunchGemEvent \{event = debug_gem}
	wait \{8
		gameframes}
	repeat
endscript

script set_gray_active_markers 
	GMan_SongTool_GetCurrentSong
	get_song_prefix song = <current_song>
	FormatText checksumname = marker_array '%s_guitar_markers' s = <song_prefix>
	if GotParam \{indices}
		GetArraySize <indices>
		if (<array_size> > 0)
			Change \{gray_gems = 1}
			ResetNonGrayMarkers
			<idx> = 0
			begin
			<index> = (<indices> [<idx>])
			if (<index> >= $practice_start_index)
				if (<index> < $practice_end_index)
					starttime = ($<marker_array> [<index>].time)
					endtime = ($<marker_array> [(<index> + 1)].time)
					AddNonGrayMarker start = <starttime> end = <endtime>
				endif
			endif
			<idx> = (<idx> + 1)
			repeat <array_size>
		endif
	elseif GotParam \{index}
		Change \{gray_gems = 1}
		if (<index> >= $practice_start_index)
			if (<index> < $practice_end_index)
				starttime = ($<marker_array> [<index>].time)
				endtime = ($<marker_array> [(<index> + 1)].time)
				AddNonGrayMarker start = <starttime> end = <endtime>
			endif
		endif
	endif
endscript

script set_alpha_out_markers 
	GMan_SongTool_GetCurrentSong
	get_song_prefix song = <current_song>
	FormatText checksumname = marker_array '%s_guitar_markers' s = <song_prefix>
	if GotParam \{indices}
		GetArraySize <indices>
		if (<array_size> > 0)
			ResetAlphaOutMarkers
			<idx> = 0
			begin
			<index> = (<indices> [<idx>])
			if (<index> >= $practice_start_index)
				if (<index> < $practice_end_index)
					starttime = ($<marker_array> [<index>].time)
					endtime = ($<marker_array> [(<index> + 1)].time)
					AddAlphaOutMarker start = <starttime> end = <endtime>
				endif
			endif
			<idx> = (<idx> + 1)
			repeat <array_size>
		endif
	endif
endscript

script cache_song_end_time 
	GMan_SongTool_GetCurrentSong
	SongFileManager func = get_song_end_time song_name = <current_song>
	CacheSongEndTime time = <total_end_time>
endscript

script medley_startiterator 
	Medley_iterator_CFunc_Setup
	begin
	if Medley_iterator_CFunc
		break
	endif
	repeat
	Medley_iterator_CFunc_Cleanup
endscript

script KeepInGameControllersAlive 
	GetFirstPlayer \{local}
	GameMode_GetType
	begin
	if (<player> < 0)
		break
	endif
	if (<type> = freeplay)
		if NOT PlayerInfoEquals <player> freeplay_state = dropped
			in_game = 1
		endif
	else
		if PlayerInfoEquals <player> in_game = 1
			in_game = 1
		endif
	endif
	if GotParam \{in_game}
		GetPlayerInfo <player> controller
		if (<controller> < 4)
			if NOT GotParam \{controllers}
				controllers = []
			endif
			AddArrayElement array = <controllers> element = <controller>
			controllers = <array>
		endif
	endif
	GetNextPlayer player = <player> local
	RemoveParameter \{in_game}
	repeat
	if GotParam \{controllers}
		printf \{qs(0x8b56c3b6)}
		printstruct <...>
		KeepControllersAlive controllers = <controllers>
	endif
endscript
