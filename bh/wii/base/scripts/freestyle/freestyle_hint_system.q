freestyle_hint_data = [
	{
		time_condition_param = hints_solo_note_time
		repeat_param = hints_repeat_solo_note
		trigger_time_secs = 3.0
		repeat_time_secs = 6.0
		instruments = {
			all
		}
		hint_text = qs(0xe5c2b7d6)
	}
	{
		time_condition_param = hints_note_time
		repeat_param = hints_repeat_note
		trigger_time_secs = 10.0
		repeat_time_secs = 20.0
		instruments = {
			guitar
			bass
		}
		hint_text = qs(0x2905284a)
	}
	{
		time_condition_param = hints_note_time
		repeat_param = hints_repeat_note
		trigger_time_secs = 10.0
		repeat_time_secs = 20.0
		instruments = {
			drums_kit
		}
		hint_text = qs(0x61e408aa)
	}
	{
		time_condition_param = hints_note_time
		repeat_param = hints_repeat_note
		trigger_time_secs = 15.0
		repeat_time_secs = 30.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0x87c7a2b9)
	}
	{
		time_condition_param = hints_helper_notes_time
		repeat_param = hints_repeat_helper_notes
		trigger_time_secs = 20.0
		repeat_time_secs = 250.0
		instruments = {
			guitar
			bass
			drums_kit
		}
		hint_text = qs(0xf781f0b4)
	}
	{
		time_condition_param = hints_helper_notes_time
		repeat_param = hints_repeat_helper_notes
		trigger_time_secs = 40.0
		repeat_time_secs = 480.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0xf781f0b4)
	}
	{
		time_condition_param = hints_drum_assist_time
		repeat_param = hints_repeat_drum_assist
		trigger_time_secs = 30.0
		repeat_time_secs = 180.0
		instruments = {
			drums_kit
		}
		hint_text = qs(0xbdf023d2)
	}
	{
		time_condition_param = hints_drum_assist_time
		repeat_param = hints_repeat_drum_assist
		trigger_time_secs = 45.0
		repeat_time_secs = 240.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0x80f0ef1f)
	}
	{
		time_condition_param = hints_tilt_time
		repeat_param = hints_repeat_tilt
		trigger_time_secs = 30.0
		repeat_time_secs = 60.0
		instruments = {
			guitar
			bass
		}
		hint_text = qs(0xc7a2052f)
	}
	{
		time_condition_param = hints_z_time
		repeat_param = hints_repeat_z
		trigger_time_secs = 60.0
		repeat_time_secs = 120.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0x97df37b3)
	}
	{
		time_condition_param = hints_lick_time
		repeat_param = hints_repeat_lick
		trigger_time_secs = $freestyle_hint_lick_trigger_time
		repeat_time_secs = 120.0
		instruments = {
			guitar
		}
		hint_text = qs(0x2db3a01b)
	}
	{
		time_condition_param = hints_hold_lick_time
		repeat_param = hints_repeat_hold_lick
		trigger_time_secs = $freestyle_hint_lick_trigger_time
		repeat_time_secs = 120.0
		instruments = {
			guitar
		}
		hint_text = qs(0xa7ff2401)
	}
	{
		time_condition_param = hints_riff_time
		repeat_param = hints_repeat_riff
		trigger_time_secs = $freestyle_hint_riff_trigger_time
		repeat_time_secs = 120.0
		instruments = {
			guitar
		}
		hint_text = qs(0xe1a38d19)
	}
	{
		time_condition_param = hints_riff_time
		repeat_param = hints_repeat_riff
		trigger_time_secs = $freestyle_hint_riff_trigger_time
		repeat_time_secs = 120.0
		instruments = {
			bass
		}
		hint_text = qs(0xab00ae4a)
	}
	{
		time_condition_param = hints_hold_riff_time
		repeat_param = hints_repeat_hold_riff
		trigger_time_secs = $freestyle_hint_riff_trigger_time
		repeat_time_secs = 120.0
		instruments = {
			guitar
			bass
		}
		hint_text = qs(0x48f2fe1d)
	}
	{
		time_condition_param = hints_hopo_time
		repeat_param = hints_repeat_hopo
		trigger_time_secs = 60.0
		repeat_time_secs = 120.0
		instruments = {
			guitar
			bass
		}
		hint_text = qs(0xd4e84a98)
	}
	{
		time_condition_param = hints_ab_time
		repeat_param = hints_repeat_ab
		trigger_time_secs = 60.0
		repeat_time_secs = 120.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0x07ca796c)
	}
	{
		time_condition_param = hints_roll_time
		repeat_param = hints_repeat_roll
		trigger_time_secs = 90.0
		repeat_time_secs = 180.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0xded64dc0)
	}
	{
		time_condition_param = hints_accent_time
		repeat_param = hints_repeat_accent
		trigger_time_secs = 90.0
		repeat_time_secs = 120.0
		instruments = {
			guitar
			bass
		}
		hint_text = qs(0x97b2b22a)
	}
	{
		time_condition_param = hints_hat_mode_time
		repeat_param = hints_repeat_hat_mode
		trigger_time_secs = 90.0
		repeat_time_secs = 120.0
		instruments = {
			drums_kit
		}
		hint_text = qs(0x77b7b0b6)
	}
	{
		time_condition_param = hints_hat_mode_time
		repeat_param = hints_repeat_hat_mode
		trigger_time_secs = 120.0
		repeat_time_secs = 240.0
		instruments = {
			drums_nunchuk
		}
		hint_text = qs(0x77b7b0b6)
	}
	{
		time_condition_param = hints_audio_effect_time
		repeat_param = hints_repeat_audio_effect
		trigger_time_secs = 120.0
		repeat_time_secs = 240.0
		instruments = {
			guitar
			bass
		}
		hint_text = qs(0x1660e1e4)
	}
]
freestyle_hint_message_duration_secs = 7.0
freestyle_hint_needed_lick_hold_time_secs = 1.0
freestyle_hint_needed_riff_hold_time_secs = 1.0
freestyle_hint_riff_trigger_time = 60.0
freestyle_hint_lick_trigger_time = 45.0
freestyle_enable_hint_system = FALSE
freestyle_hint_count = 0
freestyle_hint_current_check_index = 0

script freestyle_init_hint_system 
	Player = 0
	begin
	freestyle_get_player_param Player = <Player> param = has_highway
	if (<has_highway> = true)
		freestyle_hud_create_help_text Player = <Player>
	endif
	freestyle_set_player_param Player = <Player> param = hint_showing value = -1
	freestyle_set_player_param Player = <Player> param = hint_cancelled value = FALSE
	<Player> = (<Player> + 1)
	repeat $freestyle_max_players
	GetArraySize \{$freestyle_hint_data}
	Change freestyle_hint_count = <array_Size>
	Change \{freestyle_hint_current_check_index = 0}
	Change \{freestyle_enable_hint_system = FALSE}
endscript

script freestyle_deinit_hint_system 
endscript

script freestyle_reset_hint_system 
	if ($freestyle_game_mode = watch)
		return
	endif
	Change \{freestyle_hint_current_check_index = 0}
	Player = 0
	GetStartTime
	begin
	hint = 0
	begin
	time_condition_param = ($freestyle_hint_data [<hint>].time_condition_param)
	repeat_param = ($freestyle_hint_data [<hint>].repeat_param)
	freestyle_set_player_param Player = <Player> param = <time_condition_param> value = <starttime>
	freestyle_set_player_param Player = <Player> param = <repeat_param> value = 0
	freestyle_set_player_param Player = <Player> param = hints_last_tilt_played value = -1
	<hint> = (<hint> + 1)
	repeat $freestyle_hint_count
	<Player> = (<Player> + 1)
	repeat $freestyle_max_players
endscript

script freestyle_update_hint_system 
	if ($freestyle_enable_hint_system = FALSE)
		return
	endif
	freestyle_update_hint_stats
	freestyle_update_hint_triggers
	Change freestyle_hint_current_check_index = ($freestyle_hint_current_check_index + 1)
	if ($freestyle_hint_current_check_index >= $freestyle_hint_count)
		Change \{freestyle_hint_current_check_index = 0}
	endif
endscript

script freestyle_update_hint_stats 
	if ($freestyle_game_mode = watch)
		return
	endif
	GetStartTime
	Player = 0
	begin
	if ($freestyle_player_data [<Player>].instrument_handler = guitar)
		if getguitareventplaying Player = <Player>
			if (<noteclass_playing> = riff)
				getelapsedtime starttime = ($freestyle_player_data [<Player>].hints_riff_time)
				if (<ElapsedTime> >= ($freestyle_hint_needed_riff_hold_time_secs * 1000))
					freestyle_set_player_param Player = <Player> param = hints_hold_riff_time value = <starttime>
				endif
			elseif (<noteclass_playing> = lick)
				getelapsedtime starttime = ($freestyle_player_data [<Player>].hints_lick_time)
				if (<ElapsedTime> >= ($freestyle_hint_needed_lick_hold_time_secs * 1000))
					freestyle_set_player_param Player = <Player> param = hints_hold_lick_time value = <starttime>
				endif
			endif
		endif
	endif
	if ($freestyle_player_data [<Player>].soloing = FALSE)
		freestyle_set_player_param Player = <Player> param = hints_solo_note_time value = <starttime>
	endif
	if ($freestyle_player_data [<Player>].gem_track_visible = FALSE)
		freestyle_set_player_param Player = <Player> param = hints_helper_notes_time value = <starttime>
	endif
	<Player> = (<Player> + 1)
	repeat $freestyle_max_players
endscript

script freestyle_update_hint_triggers 
	if ($freestyle_game_mode = watch)
		return
	endif
	Player = 0
	begin
	if ($freestyle_player_data [<Player>].hint_showing < 0)
		freestyle_update_player_hint_triggers Player = <Player>
	else
		freestyle_update_player_hint_message Player = <Player>
	endif
	<Player> = (<Player> + 1)
	repeat $freestyle_max_players
endscript

script freestyle_update_player_hint_message 
	RequireParams \{[
			Player
		]
		all}
	if ($freestyle_player_data [<Player>].help_text_showing = true)
		if ($freestyle_player_data [<Player>].hint_cancelled = FALSE)
			if NOT freestyle_hint_condition_met Player = <Player> hint = ($freestyle_player_data [<Player>].hint_showing)
				freestyle_hud_hide_help_text Player = <Player>
				freestyle_set_player_param Player = <Player> param = hint_cancelled value = true
			endif
		endif
	else
		freestyle_set_player_param Player = <Player> param = hint_showing value = -1
	endif
endscript

script freestyle_update_player_hint_triggers 
	RequireParams \{[
			Player
		]
		all}
	has_highway = ($freestyle_player_data [<Player>].has_highway)
	hints = ($freestyle_player_data [<Player>].hints)
	if ((<hints> = true) && (<has_highway> = true))
		hint = ($freestyle_hint_current_check_index)
		if freestyle_hint_is_applicable Player = <Player> hint = <hint>
			if freestyle_should_trigger_hint Player = <Player> hint = <hint>
				freestyle_hud_show_help_text {
					Player = <Player>
					text = ($freestyle_hint_data [<hint>].hint_text)
					Duration = $freestyle_hint_message_duration_secs
				}
				GetStartTime
				repeat_param = ($freestyle_hint_data [<hint>].repeat_param)
				freestyle_set_player_param Player = <Player> param = <repeat_param> value = <starttime>
				freestyle_set_player_param Player = <Player> param = hint_showing value = <hint>
				freestyle_set_player_param Player = <Player> param = hint_cancelled value = FALSE
			endif
		endif
	endif
endscript

script freestyle_hint_is_applicable 
	RequireParams \{[
			Player
			hint
		]
		all}
	if StructureContains structure = ($freestyle_hint_data [<hint>].instruments) all
		return \{true}
	endif
	instrument = ($freestyle_player_data [<Player>].instrument)
	instrument_handler = ($freestyle_player_data [<Player>].instrument_handler)
	if StructureContains structure = ($freestyle_hint_data [<hint>].instruments) <instrument>
		return \{true}
	endif
	if (<instrument> = drums)
		if StructureContains structure = ($freestyle_hint_data [<hint>].instruments) <instrument_handler>
			return \{true}
		endif
	endif
	return \{FALSE}
endscript

script freestyle_hint_condition_met 
	RequireParams \{[
			Player
			hint
		]
		all}
	time_condition_param = ($freestyle_hint_data [<hint>].time_condition_param)
	time_condition_value = ($freestyle_player_data [<Player>].<time_condition_param>)
	getelapsedtime starttime = <time_condition_value>
	trigger_time_secs = ($freestyle_hint_data [<hint>].trigger_time_secs)
	switch (<time_condition_param>)
		case hints_hold_lick_time
		<trigger_time_secs> = (<trigger_time_secs> + $freestyle_hint_needed_lick_hold_time_secs + 0.1)
		case hints_hold_riff_time
		<trigger_time_secs> = (<trigger_time_secs> + $freestyle_hint_needed_riff_hold_time_secs + 0.1)
	endswitch
	if (<ElapsedTime> >= (<trigger_time_secs> * 1000))
		return \{true}
	endif
	return \{FALSE}
endscript

script freestyle_should_trigger_hint 
	RequireParams \{[
			Player
			hint
		]
		all}
	if freestyle_hint_condition_met Player = <Player> hint = <hint>
		repeat_param = ($freestyle_hint_data [<hint>].repeat_param)
		repeat_value = ($freestyle_player_data [<Player>].<repeat_param>)
		getelapsedtime starttime = <repeat_value>
		repeat_time_secs = ($freestyle_hint_data [<hint>].repeat_time_secs)
		if ((<repeat_value> = 0) || (<ElapsedTime> >= (<repeat_time_secs> * 1000)))
			return \{true}
		endif
	endif
	return \{FALSE}
endscript

script freestyle_hint_notify_guitar_note_played 
	GetStartTime
	getguitaractivetilt Player = <Player>
	freestyle_set_player_param Player = <Player> param = hints_note_time value = <starttime>
	if (<active_tilt> != $freestyle_player_data [<Player>].hints_last_tilt_played)
		freestyle_set_player_param Player = <Player> param = hints_tilt_time value = <starttime>
		freestyle_set_player_param Player = <Player> param = hints_last_tilt_played value = <active_tilt>
	endif
	if freestyle_is_hopo_note note_flags = <noteflags_triggered>
		freestyle_set_player_param Player = <Player> param = hints_hopo_time value = <starttime>
	endif
	if freestyle_is_accent_note note_flags = <noteflags_triggered>
		freestyle_set_player_param Player = <Player> param = hints_accent_time value = <starttime>
	endif
	if (<noteclass_triggered> = lick)
		freestyle_set_player_param Player = <Player> param = hints_lick_time value = <starttime>
	elseif (<noteclass_triggered> = riff)
		freestyle_set_player_param Player = <Player> param = hints_riff_time value = <starttime>
	endif
	if ($freestyle_player_data [<Player>].soloing = true)
		freestyle_set_player_param Player = <Player> param = hints_solo_note_time value = <starttime>
	endif
endscript

script freestyle_hint_notify_drum_note_played 
	if ($freestyle_enable_hint_system = FALSE)
		return
	endif
	if ($freestyle_game_mode = watch)
		return
	endif
	GetStartTime
	if (<auto_play_note> = FALSE)
		freestyle_set_player_param Player = <Player> param = hints_note_time value = <starttime>
		if ($freestyle_player_data [<Player>].soloing = true)
			freestyle_set_player_param Player = <Player> param = hints_solo_note_time value = <starttime>
		endif
	endif
endscript

script freestyle_hint_notify_audio_effect_changed 
	RequireParams \{[
			Player
		]
		all}
	GetStartTime
	freestyle_set_player_param Player = <Player> param = hints_audio_effect_time value = <starttime>
endscript

script freestyle_hint_notify_hat_mode_changed 
	RequireParams \{[
			Player
		]
		all}
	GetStartTime
	freestyle_set_player_param Player = <Player> param = hints_hat_mode_time value = <starttime>
endscript

script freestyle_hint_notify_drum_helper_changed 
	RequireParams \{[
			Player
		]
		all}
	GetStartTime
	freestyle_set_player_param Player = <Player> param = hints_drum_assist_time value = <starttime>
endscript
