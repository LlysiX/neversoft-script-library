progression_beat_game_last_song = 0
progression_unlock_tier_last_song = 0
progression_got_sponsored_last_song = 0
progression_play_completion_movie = 0
progression_completion_tier = 1
progression_unlocked_guitar = -1
progression_unlocked_guitar2 = -1
progression_unlocked_type = guitar
gh3_career_songs = {
	prefix = 'career'
	num_tiers = 8
	initial_movie = 'singleplayer_01'
	tier1 = {
		title = "1. Starting out small"
		songs = [
			slowride
			talkdirtytome
			hitmewithyourbestshot
			storyofmylife
			rocknrollallnite
		]
		encorep1
		level = load_z_party
		defaultunlocked = 4
		completion_movie = 'singleplayer_02'
		setlist_icon = setlist_icon_backyard
	}
	tier2 = {
		title = "2. Your first real gig"
		songs = [
			mississippiqueen
			schoolsout
			sunshineofyourlove
			barracuda
			bosstom
			bullsonparade
		]
		encorep1
		boss
		level = load_z_dive
		completion_movie = 'singleplayer_03'
		setlist_icon = setlist_icon_bar
	}
	tier3 = {
		title = "3. Making the video"
		songs = [
			whenyouwereyoung
			missmurder
			theseeker
			laydown
			paintitblack
		]
		encorep1
		level = load_z_video
		completion_movie = 'singleplayer_04'
		setlist_icon = setlist_icon_videoshoot
	}
	tier4 = {
		title = "4. European Invasion"
		songs = [
			paranoid
			anarchyintheuk
			koolthing
			mynameisjonas
			evenflow
		]
		encorep1
		level = load_z_artdeco
		completion_movie = 'singleplayer_05'
		setlist_icon = setlist_icon_odeon
	}
	tier5 = {
		title = "5. Bighouse blues"
		songs = [
			holidayincambodia
			rockulikeahurricane
			sameoldsonganddance
			lagrange
			bossslash
			welcometothejungle
		]
		encorep1
		boss
		level = load_z_prison
		completion_movie = 'singleplayer_06'
		setlist_icon = setlist_icon_prison
	}
	tier6 = {
		title = "6. The Hottest band on Earth"
		songs = [
			blackmagicwoman
			cherubrock
			blacksunshine
			themetal
			pridenjoy
		]
		encorep1
		level = load_z_wikker
		completion_movie = 'singleplayer_07'
		setlist_icon = setlist_icon_desert
	}
	tier7 = {
		title = "7. Live in Japan"
		songs = [
			beforeiforget
			stricken
			threesandsevens
			knightsofcydonia
			cultofpersonality
		]
		encorep1
		level = load_z_budokan
		completion_movie = 'singleplayer_08'
		setlist_icon = setlist_icon_megadome
	}
	tier8 = {
		title = "8. Battle for your soul"
		songs = [
			rainingblood
			cliffsofdover
			numberofthebeast
			one
			bossdevil
		]
		boss
		level = load_z_hell
		completion_movie = 'singleplayer_end'
		setlist_icon = setlist_icon_hell
	}
}
gh3_general_songs = {
	prefix = 'general'
	num_tiers = 8
	tier1 = {
		title = "1. Starting out small"
		songs = [
			slowride
			talkdirtytome
			hitmewithyourbestshot
			storyofmylife
			rocknrollallnite
			sabotage
		]
		encorep1
		encorep2
		level = load_z_party
		defaultunlocked = 4
		setlist_icon = setlist_icon_backyard
	}
	tier2 = {
		title = "2. Your first real gig"
		songs = [
			mississippiqueen
			schoolsout
			sunshineofyourlove
			barracuda
			bullsonparade
			reptilia
		]
		encorep1
		encorep2
		level = load_z_dive
		defaultunlocked = 4
		setlist_icon = setlist_icon_bar
	}
	tier3 = {
		title = "3. Making the video"
		songs = [
			whenyouwereyoung
			missmurder
			theseeker
			laydown
			paintitblack
			suckmykiss
		]
		encorep1
		encorep2
		level = load_z_video
		setlist_icon = setlist_icon_videoshoot
	}
	tier4 = {
		title = "4. European Invasion"
		songs = [
			paranoid
			anarchyintheuk
			koolthing
			mynameisjonas
			evenflow
			citiesonflame
		]
		encorep1
		encorep2
		level = load_z_artdeco
		setlist_icon = setlist_icon_odeon
	}
	tier5 = {
		title = "5. Bighouse Blues"
		songs = [
			holidayincambodia
			rockulikeahurricane
			sameoldsonganddance
			lagrange
			welcometothejungle
			helicopter
		]
		encorep1
		encorep2
		level = load_z_prison
		setlist_icon = setlist_icon_prison
	}
	tier6 = {
		title = "6. The Hottest band on Earth"
		songs = [
			blackmagicwoman
			cherubrock
			blacksunshine
			themetal
			pridenjoy
			monsters
		]
		encorep1
		encorep2
		level = load_z_wikker
		setlist_icon = setlist_icon_desert
	}
	tier7 = {
		title = "7. Live in Japan"
		songs = [
			beforeiforget
			stricken
			threesandsevens
			knightsofcydonia
			cultofpersonality
		]
		encorep1
		level = load_z_budokan
		setlist_icon = setlist_icon_megadome
	}
	tier8 = {
		title = "8. Battle for your Soul"
		songs = [
			rainingblood
			cliffsofdover
			numberofthebeast
			one
		]
		level = load_z_hell
		setlist_icon = setlist_icon_hell
	}
}
gh3_generalp2_songs = {
	prefix = 'general'
	num_tiers = 8
	tier1 = {
		title = "1. Starting out small"
		songs = [
			slowride
			talkdirtytome
			hitmewithyourbestshot
			storyofmylife
			rocknrollallnite
			sabotage
		]
		encorep1
		encorep2
		level = load_z_party
		defaultunlocked = 4
		setlist_icon = setlist_icon_backyard
	}
	tier2 = {
		title = "2. Your first real gig"
		songs = [
			mississippiqueen
			schoolsout
			sunshineofyourlove
			barracuda
			bullsonparade
			reptilia
		]
		encorep1
		encorep2
		level = load_z_dive
		defaultunlocked = 4
		setlist_icon = setlist_icon_bar
	}
	tier3 = {
		title = "3. Making the video"
		songs = [
			whenyouwereyoung
			missmurder
			theseeker
			laydown
			paintitblack
			suckmykiss
		]
		encorep1
		encorep2
		level = load_z_video
		setlist_icon = setlist_icon_videoshoot
	}
	tier4 = {
		title = "4. European Invasion"
		songs = [
			paranoid
			anarchyintheuk
			koolthing
			mynameisjonas
			evenflow
			citiesonflame
		]
		encorep1
		encorep2
		level = load_z_artdeco
		setlist_icon = setlist_icon_odeon
	}
	tier5 = {
		title = "5. Bighouse Blues"
		songs = [
			holidayincambodia
			rockulikeahurricane
			sameoldsonganddance
			lagrange
			welcometothejungle
			helicopter
		]
		encorep1
		encorep2
		level = load_z_prison
		setlist_icon = setlist_icon_prison
	}
	tier6 = {
		title = "6. The Hottest band on Earth"
		songs = [
			blackmagicwoman
			cherubrock
			blacksunshine
			themetal
			pridenjoy
			monsters
		]
		encorep1
		encorep2
		level = load_z_wikker
		setlist_icon = setlist_icon_desert
	}
	tier7 = {
		title = "7. Live in Japan"
		songs = [
			beforeiforget
			stricken
			threesandsevens
			knightsofcydonia
			cultofpersonality
		]
		encorep1
		level = load_z_budokan
		setlist_icon = setlist_icon_megadome
	}
	tier8 = {
		title = "8. Battle for your Soul"
		songs = [
			rainingblood
			cliffsofdover
			numberofthebeast
			one
		]
		level = load_z_hell
		setlist_icon = setlist_icon_hell
	}
}
gh3_generalp2_songs_coop = {
	prefix = 'general'
	num_tiers = 8
	tier1 = {
		title = "1. Starting out small"
		songs = [
			slowride
			talkdirtytome
			hitmewithyourbestshot
			storyofmylife
			rocknrollallnite
			sabotage
		]
		encorep1
		encorep2
		level = load_z_party
		defaultunlocked = 4
		setlist_icon = setlist_icon_backyard
	}
	tier2 = {
		title = "2. Your first real gig"
		songs = [
			mississippiqueen
			schoolsout
			sunshineofyourlove
			barracuda
			bullsonparade
			reptilia
		]
		encorep1
		encorep2
		level = load_z_dive
		defaultunlocked = 4
		setlist_icon = setlist_icon_bar
	}
	tier3 = {
		title = "3. Making the video"
		songs = [
			whenyouwereyoung
			missmurder
			theseeker
			laydown
			suckmykiss
		]
		encorep1
		encorep2
		level = load_z_video
		setlist_icon = setlist_icon_videoshoot
	}
	tier4 = {
		title = "4. European Invasion"
		songs = [
			paranoid
			anarchyintheuk
			koolthing
			mynameisjonas
			evenflow
			citiesonflame
		]
		encorep1
		encorep2
		level = load_z_artdeco
		setlist_icon = setlist_icon_odeon
	}
	tier5 = {
		title = "5. Bighouse Blues"
		songs = [
			holidayincambodia
			rockulikeahurricane
			sameoldsonganddance
			lagrange
			welcometothejungle
			helicopter
		]
		encorep1
		encorep2
		level = load_z_prison
		setlist_icon = setlist_icon_prison
	}
	tier6 = {
		title = "6. The Hottest band on Earth"
		songs = [
			blackmagicwoman
			cherubrock
			blacksunshine
			themetal
			pridenjoy
			monsters
		]
		encorep1
		encorep2
		level = load_z_wikker
		setlist_icon = setlist_icon_desert
	}
	tier7 = {
		title = "7. Live in Japan"
		songs = [
			beforeiforget
			stricken
			threesandsevens
			knightsofcydonia
			cultofpersonality
		]
		encorep1
		level = load_z_budokan
		setlist_icon = setlist_icon_megadome
	}
	tier8 = {
		title = "8. Battle for your Soul"
		songs = [
			rainingblood
			cliffsofdover
			numberofthebeast
			one
		]
		level = load_z_hell
		setlist_icon = setlist_icon_hell
	}
}
gh3_career_numsongtoprogress = {
	easy = 3
	medium = 3
	hard = 4
	expert = 4
}
gh3_career_progression = [
	{
		name = set_initial_states
		type = scr
		atom_script = progression_init
		atom_params = {
		}
	}
	{
		name = career_tier1_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 1
		}
		depends_on = [
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 1
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier1_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 1
		}
		depends_on = [
			{
				type = atom
				atom = career_tier1_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier1_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 1
		}
		depends_on = [
			{
				type = atom
				atom = career_tier1_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 1
				}
			}
		]
	}
	{
		name = career_tier1_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 1
		}
		depends_on = [
			{
				type = atom
				atom = career_tier1_songscomplete
			}
			{
				type = atom
				atom = career_tier1_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier2_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 2
		}
		depends_on = [
			{
				type = atom
				atom = career_tier1_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 2
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier2_bossunlock
		type = scr
		atom_script = progression_tierbossunlock
		atom_params = {
			tier = 2
		}
		depends_on = [
			{
				type = atom
				atom = career_tier2_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier2_bosscomplete
		type = scr
		atom_script = progression_tierbosscomplete
		atom_params = {
			tier = 2
		}
		depends_on = [
			{
				type = atom
				atom = career_tier2_bossunlock
			}
			{
				type = scr
				scr = progression_checkbosscomplete
				params = {
					tier = 2
				}
			}
		]
	}
	{
		name = career_tier2_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 2
		}
		depends_on = [
			{
				type = atom
				atom = career_tier2_songscomplete
			}
			{
				type = atom
				atom = career_tier2_bosscomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier2_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 2
		}
		depends_on = [
			{
				type = atom
				atom = career_tier2_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 2
				}
			}
		]
	}
	{
		name = career_tier2_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 2
		}
		depends_on = [
			{
				type = atom
				atom = career_tier2_songscomplete
			}
			{
				type = atom
				atom = career_tier2_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
			{
				type = atom
				atom = career_tier2_bosscomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier3_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 3
		}
		depends_on = [
			{
				type = atom
				atom = career_tier2_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 3
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier3_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 3
		}
		depends_on = [
			{
				type = atom
				atom = career_tier3_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier3_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 3
		}
		depends_on = [
			{
				type = atom
				atom = career_tier3_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 3
				}
			}
		]
	}
	{
		name = career_tier3_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 3
		}
		depends_on = [
			{
				type = atom
				atom = career_tier3_songscomplete
			}
			{
				type = atom
				atom = career_tier3_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier4_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 4
		}
		depends_on = [
			{
				type = atom
				atom = career_tier3_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 4
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier4_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 4
		}
		depends_on = [
			{
				type = atom
				atom = career_tier4_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier4_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 4
		}
		depends_on = [
			{
				type = atom
				atom = career_tier4_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 4
				}
			}
		]
	}
	{
		name = career_tier4_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 4
		}
		depends_on = [
			{
				type = atom
				atom = career_tier4_songscomplete
			}
			{
				type = atom
				atom = career_tier4_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier5_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 5
		}
		depends_on = [
			{
				type = atom
				atom = career_tier4_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 5
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier5_bossunlock
		type = scr
		atom_script = progression_tierbossunlock
		atom_params = {
			tier = 5
		}
		depends_on = [
			{
				type = atom
				atom = career_tier5_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier5_bosscomplete
		type = scr
		atom_script = progression_tierbosscomplete
		atom_params = {
			tier = 5
		}
		depends_on = [
			{
				type = atom
				atom = career_tier5_bossunlock
			}
			{
				type = scr
				scr = progression_checkbosscomplete
				params = {
					tier = 5
				}
			}
		]
	}
	{
		name = career_tier5_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 5
		}
		depends_on = [
			{
				type = atom
				atom = career_tier5_songscomplete
			}
			{
				type = atom
				atom = career_tier5_bosscomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier5_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 5
		}
		depends_on = [
			{
				type = atom
				atom = career_tier5_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 5
				}
			}
		]
	}
	{
		name = career_tier5_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 5
		}
		depends_on = [
			{
				type = atom
				atom = career_tier5_songscomplete
			}
			{
				type = atom
				atom = career_tier5_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
			{
				type = atom
				atom = career_tier5_bosscomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier6_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 6
		}
		depends_on = [
			{
				type = atom
				atom = career_tier5_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 6
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier6_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 6
		}
		depends_on = [
			{
				type = atom
				atom = career_tier6_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier6_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 6
		}
		depends_on = [
			{
				type = atom
				atom = career_tier6_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 6
				}
			}
		]
	}
	{
		name = career_tier6_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 6
		}
		depends_on = [
			{
				type = atom
				atom = career_tier6_songscomplete
			}
			{
				type = atom
				atom = career_tier6_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier7_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 7
		}
		depends_on = [
			{
				type = atom
				atom = career_tier6_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 7
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier7_encoreunlock
		type = scr
		atom_script = progression_tierencoreunlock
		atom_params = {
			tier = 7
		}
		depends_on = [
			{
				type = atom
				atom = career_tier7_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier7_encorecomplete
		type = scr
		atom_script = progression_tierencorecomplete
		atom_params = {
			tier = 7
		}
		depends_on = [
			{
				type = atom
				atom = career_tier7_encoreunlock
			}
			{
				type = scr
				scr = progression_checkencorecomplete
				params = {
					tier = 7
				}
			}
		]
	}
	{
		name = career_tier7_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 7
		}
		depends_on = [
			{
				type = atom
				atom = career_tier7_songscomplete
			}
			{
				type = atom
				atom = career_tier7_encorecomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = career_tier8_songscomplete
		type = scr
		atom_script = progression_tiersongscomplete
		atom_params = {
			tier = 8
		}
		depends_on = [
			{
				type = atom
				atom = career_tier7_complete
			}
			{
				type = scr
				scr = progression_checksongcomplete
				params = {
					tier = 8
					numsongstoprogress = $gh3_career_numsongtoprogress
				}
			}
		]
	}
	{
		name = career_tier8_bossunlock
		type = scr
		atom_script = progression_tierbossunlock
		atom_params = {
			tier = 8
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_songscomplete
			}
			{
				type = scr
				scr = progression_alwaysblock
				required = [
					0
					0
					0
					0
				]
			}
		]
	}
	{
		name = career_tier8_bosscomplete
		type = scr
		atom_script = progression_tierbosscomplete
		atom_params = {
			tier = 8
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_bossunlock
			}
			{
				type = scr
				scr = progression_checkbosscomplete
				params = {
					tier = 8
				}
			}
		]
	}
	{
		name = career_tier8_complete
		type = scr
		atom_script = progression_tiercomplete
		atom_params = {
			tier = 8
			finished_game
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_songscomplete
			}
			{
				type = atom
				atom = career_tier8_bosscomplete
				required = [
					1
					1
					1
					1
				]
			}
		]
	}
	{
		name = unlock_guitar1
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 1
			for_difficulty
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_complete
			}
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = easy
					mode = p1_career
				}
			}
		]
	}
	{
		name = unlock_guitar2
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 2
			for_stars
		}
		depends_on = [
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = easy
					mode = p1_career
				}
			}
			{
				type = scr
				scr = progression_checksong5star
				params = {
				}
			}
		]
	}
	{
		name = unlock_guitar3
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 3
			for_difficulty
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_complete
			}
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = medium
					mode = p1_career
				}
			}
		]
	}
	{
		name = unlock_guitar4
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 4
			for_stars
		}
		depends_on = [
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = medium
					mode = p1_career
				}
			}
			{
				type = scr
				scr = progression_checksong5star
				params = {
				}
			}
		]
	}
	{
		name = unlock_guitar5
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 5
			for_difficulty
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_complete
			}
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = hard
					mode = p1_career
				}
			}
		]
	}
	{
		name = unlock_guitar6
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 6
			for_stars
		}
		depends_on = [
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = hard
					mode = p1_career
				}
			}
			{
				type = scr
				scr = progression_checksong5star
				params = {
				}
			}
		]
	}
	{
		name = unlock_guitar7
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 7
			for_difficulty
		}
		depends_on = [
			{
				type = atom
				atom = career_tier8_complete
			}
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = expert
					mode = p1_career
				}
			}
		]
	}
	{
		name = unlock_guitar8
		type = scr
		atom_script = progression_unlockguitar
		atom_params = {
			guitar = 8
			for_stars
		}
		depends_on = [
			{
				type = scr
				scr = progression_checkdiff
				params = {
					diff = expert
					mode = p1_career
				}
			}
			{
				type = scr
				scr = progression_checksong5star
				params = {
				}
			}
		]
	}
	{
		name = end_of_first_update
		type = scr
		atom_script = progression_endoffirstupdate
		atom_params = {
		}
	}
]
cash_system_rules = [
	{
		diff = easy
		newstars = 3
		oldstars = 0
		cash = 75
	}
	{
		diff = easy
		newstars = 4
		oldstars = 0
		cash = 175
	}
	{
		diff = easy
		newstars = 5
		oldstars = 0
		cash = 300
	}
	{
		diff = easy
		newstars = 4
		oldstars = 3
		cash = 100
	}
	{
		diff = easy
		newstars = 5
		oldstars = 3
		cash = 225
	}
	{
		diff = easy
		newstars = 5
		oldstars = 4
		cash = 125
	}
	{
		diff = medium
		newstars = 3
		oldstars = 0
		cash = 150
	}
	{
		diff = medium
		newstars = 4
		oldstars = 0
		cash = 350
	}
	{
		diff = medium
		newstars = 5
		oldstars = 0
		cash = 600
	}
	{
		diff = medium
		newstars = 4
		oldstars = 3
		cash = 200
	}
	{
		diff = medium
		newstars = 5
		oldstars = 3
		cash = 450
	}
	{
		diff = medium
		newstars = 5
		oldstars = 4
		cash = 250
	}
	{
		diff = hard
		newstars = 3
		oldstars = 0
		cash = 300
	}
	{
		diff = hard
		newstars = 4
		oldstars = 0
		cash = 700
	}
	{
		diff = hard
		newstars = 5
		oldstars = 0
		cash = 1200
	}
	{
		diff = hard
		newstars = 4
		oldstars = 3
		cash = 400
	}
	{
		diff = hard
		newstars = 5
		oldstars = 3
		cash = 900
	}
	{
		diff = hard
		newstars = 5
		oldstars = 4
		cash = 500
	}
	{
		diff = expert
		newstars = 3
		oldstars = 0
		cash = 450
	}
	{
		diff = expert
		newstars = 4
		oldstars = 0
		cash = 1050
	}
	{
		diff = expert
		newstars = 5
		oldstars = 0
		cash = 1800
	}
	{
		diff = expert
		newstars = 4
		oldstars = 3
		cash = 600
	}
	{
		diff = expert
		newstars = 5
		oldstars = 3
		cash = 1350
	}
	{
		diff = expert
		newstars = 5
		oldstars = 4
		cash = 750
	}
]

script progression_init 
	printf \{"Progression_Init"}
	tier = 0
	get_progression_globals game_mode = ($game_mode)
	if ($game_mode = p1_career || $game_mode = p2_career)
		formattext checksumname = tiername 'tier%i' i = (<tier> + 1)
		change current_level = ($<tier_global>.<tiername>.level)
	endif
	change \{setlist_previous_tier = 1}
	change \{setlist_previous_song = 0}
	change \{setlist_previous_tab = tab_setlist}
endscript

script progression_endoffirstupdate 
	change \{end_credits = 0}
	change \{progression_beat_game_last_song = 0}
	change \{progression_unlock_tier_last_song = 0}
	change \{progression_got_sponsored_last_song = 0}
	change \{progression_play_completion_movie = 0}
	change \{progression_unlocked_guitar = -1}
	change \{progression_unlocked_guitar2 = -1}
	change \{progression_unlocked_type = guitar}
endscript

script progression_tiersongscomplete 
	printf \{"Progression_TierSongsComplete"}
endscript

script progression_tierencoreunlock 
	printf \{"Progression_TierEncoreUnlock"}
	get_progression_globals game_mode = ($game_mode)
	progression_getencoresong tier_global = <tier_global> tier = <tier>
	setglobaltags progression params = {encore_song = <song>}
	setglobaltags progression params = {next_tier = <tier>}
	setglobaltags progression params = {next_song_count = <song_count>}
	change setlist_previous_tier = <tier>
	change setlist_previous_song = <song_count>
	change \{current_transition = preencore}
	progression_unlocksong tier_global = <tier_global> song = <song> encore = 1
	get_progression_globals \{game_mode = p1_quickplay}
	progression_unlocksong tier_global = <tier_global> song = <song>
	get_progression_globals \{game_mode = p2_battle}
	progression_unlocksong tier_global = <tier_global> song = <song>
endscript

script progression_tierencorecomplete 
	printf \{"Progression_TierEncoreComplete"}
	change \{progression_got_sponsored_last_song = 1}
	change \{progression_play_completion_movie = 1}
	change progression_completion_tier = <tier>
endscript

script progression_tierbossunlock 
	printf \{"Progression_TierBossUnlock"}
	get_progression_globals game_mode = ($game_mode)
	progression_getbosssong tier_global = <tier_global> tier = <tier>
	setglobaltags progression params = {boss_song = <song>}
	setglobaltags progression params = {next_tier = <tier>}
	setglobaltags progression params = {next_song_count = <song_count>}
	change setlist_previous_tier = <tier>
	change setlist_previous_song = <song_count>
	change \{current_transition = preboss}
	progression_unlocksong tier_global = <tier_global> song = <song> boss = 1
endscript

script progression_tierbosscomplete 
	printf \{"Progression_TierBossComplete"}
endscript

script progression_tiercomplete 
	printf \{"Progression_TierComplete"}
	get_progression_globals game_mode = ($game_mode)
	setlist_prefix = ($<tier_global>.prefix)
	formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
	setglobaltags <tiername> params = {complete = 1}
	if gotparam \{finished_game}
		if ($devil_finish = 0)
			printf \{"FINISHED GAME"}
			change \{end_credits = 0}
			if NOT ($progression_beat_game_last_song = 1)
				if ($current_song = bossdevil)
					change \{end_credits = 1}
					formattext \{checksumname = bonus_song_checksum
						'%p_song%i_tier%s'
						p = 'bonus'
						i = 25
						s = 1}
					setglobaltags <bonus_song_checksum> params = {unlocked = 1}
					setglobaltags ($gh3_bonus_songs.tier1.songs [24]) params = {unlocked = 1}
				endif
			endif
			change \{progression_beat_game_last_song = 1}
		endif
		get_difficulty_text_nl difficulty = ($current_difficulty)
		formattext checksumname = gametype_checksum '%p_%s' p = <setlist_prefix> s = <difficulty_text_nl>
		setglobaltags <gametype_checksum> params = {complete = 1}
		if ($game_mode = p1_career)
			formattext checksumname = bandname_id 'band%i_info_%g' i = ($current_band) g = 'p1_career'
			formattext checksumname = hendrix_checksum 'hendrix_achievement_%s' s = <difficulty_text_nl>
			getglobaltags <bandname_id> param = <hendrix_checksum>
			if ((<...>.<hendrix_checksum>) = 0)
				setglobaltags \{achievement_info
					params = {
						hendrix_achievement_lefty_off = 1
					}}
			elseif ((<...>.<hendrix_checksum>) = 1)
				setglobaltags \{achievement_info
					params = {
						hendrix_achievement_lefty_on = 1
					}}
			endif
			if ($current_difficulty = hard || $current_difficulty = expert)
				if NOT isguitarcontroller controller = ($player1_status.controller)
					writeachievements \{achievement = buy_a_guitar_already}
				endif
			endif
		endif
	else
		tier = (<tier> + 1)
		progression_unlocktier tier = <tier>
		formattext checksumname = tiername 'tier%i' i = <tier>
		progression_unlockvenue level_checksum = ($<tier_global>.<tiername>.level)
	endif
endscript

script progression_unlockvenue 
	get_current_band_checksum
	final_checksum = <band_checksum>
	extendcrc <final_checksum> ($levelzones.<level_checksum>.name) out = final_checksum
	setglobaltags <final_checksum> params = {unlocked = 1}
	formattext checksumname = venue_checksum 'venue_%s' s = ($levelzones.<level_checksum>.name)
	setglobaltags <venue_checksum> params = {unlocked = 1}
endscript

script progression_unlocktier 
	get_progression_globals game_mode = ($game_mode)
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	change \{progression_unlock_tier_last_song = 1}
	change current_level = ($<tier_global>.<tier_checksum>.level)
	change setlist_previous_tier = <tier>
	change \{setlist_previous_song = 0}
	progression_getnumtiersong tier_global = <tier_global> tier = <tier>
	song_count = 0
	current_tier_global = <tier_global>
	begin
	progression_gettiersong tier_global = <current_tier_global> tier = <tier> song_count = <song_count>
	progression_unlocksong tier_global = <current_tier_global> song = <song>
	get_progression_globals \{game_mode = p1_quickplay}
	progression_unlocksong tier_global = <tier_global> song = <song>
	get_progression_globals \{game_mode = p2_battle}
	progression_unlocksong tier_global = <tier_global> song = <song>
	song_count = (<song_count> + 1)
	repeat <tier_size>
	if gotparam \{complete}
		get_progression_globals game_mode = ($game_mode)
		setlist_prefix = ($<tier_global>.prefix)
		formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
		setglobaltags <tiername> params = {complete = 1}
	endif
endscript

script progression_checksongcomplete 
	printf \{"Progression_CheckSongComplete"}
	get_progression_globals game_mode = ($game_mode)
	songlist = <tier_global>
	progression_getdifficulty
	songs_required = (<numsongstoprogress>.<difficulty>)
	setlist_prefix = (<songlist>.prefix)
	formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	getarraysize (<songlist>.<tier_checksum>.songs)
	array_count = 0
	begin
	formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<array_count> + 1) s = <tier> addtostringlookup = true
	getglobaltags <song_checksum> param = stars
	if (<stars> > 2)
		songs_required = (<songs_required> - 1)
	endif
	array_count = (<array_count> + 1)
	repeat <array_size>
	setglobaltags <tiername> params = {num_songs_to_progress = <songs_required>}
	if (<songs_required> > 0)
		return \{false}
	else
		return \{true}
	endif
endscript

script progression_checkencorecomplete 
	printf \{"Progression_CheckEncoreComplete"}
	get_progression_globals game_mode = ($game_mode)
	progression_getencoresong tier_global = <tier_global> tier = <tier>
	getglobaltags <song_checksum> param = stars
	if (<stars> > 2)
		return \{true}
	endif
	return \{false}
endscript

script progression_checkbosscomplete 
	printf \{"Progression_CheckBossComplete"}
	get_progression_globals game_mode = ($game_mode)
	progression_getbosssong tier_global = <tier_global> tier = <tier>
	getglobaltags <song_checksum> param = stars
	if (<stars> > 2)
		return \{true}
	endif
	return \{false}
endscript

script progression_checksong5star 
	printf \{"Progression_CheckSong5Star"}
	get_progression_globals game_mode = ($game_mode)
	songlist = <tier_global>
	tier = 1
	begin
	setlist_prefix = (<songlist>.prefix)
	formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	getarraysize (<songlist>.<tier_checksum>.songs)
	getglobaltags <tiername> param = unlocked
	if (<unlocked> = 0)
		return \{false}
	endif
	array_count = 0
	begin
	formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<array_count> + 1) s = <tier> addtostringlookup = true
	getglobaltags <song_checksum> param = unlocked
	getglobaltags <song_checksum> param = stars
	if NOT progression_isbosssong tier_global = <tier_global> tier = <tier> song = (<songlist>.<tier_checksum>.songs [<array_count>])
		if NOT (<stars> = 5)
			return \{false}
		endif
	endif
	array_count = (<array_count> + 1)
	repeat <array_size>
	tier = (<tier> + 1)
	repeat (<songlist>.num_tiers)
	return \{true}
endscript

script progression_checkallsongscompleted 
	printf \{"Progression_CheckAllSongsCompleted"}
	get_progression_globals game_mode = ($game_mode)
	songlist = <tier_global>
	tier = 1
	begin
	setlist_prefix = (<songlist>.prefix)
	formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	getarraysize (<songlist>.<tier_checksum>.songs)
	getglobaltags <tiername> param = unlocked
	if (<unlocked> = 0)
		return \{false}
	endif
	array_count = 0
	begin
	formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<array_count> + 1) s = <tier> addtostringlookup = true
	getglobaltags <song_checksum> param = unlocked
	getglobaltags <song_checksum> param = stars
	if NOT (<stars> > 2)
		return \{false}
	endif
	array_count = (<array_count> + 1)
	repeat <array_size>
	tier = (<tier> + 1)
	repeat (<songlist>.num_tiers)
	return \{true}
endscript

script progression_alwaysblock 
	printf \{"Progression_AlwaysBlock"}
	return \{false}
endscript

script progression_checkdiff 
	printf \{"Progression_CheckDiff"}
	progression_getdifficulty
	if NOT (<diff> = <difficulty>)
		return \{false}
	endif
	if gotparam \{mode}
		if NOT ($game_mode = <mode>)
			return \{false}
		endif
	endif
	return \{true}
endscript

script progression_unlockguitar 
	printf \{"Progression_UnlockGuitar"}
	if gotparam \{guitar}
		setglobaltags ($secret_guitars [(<guitar> - 1)].id) params = {unlocked_for_purchase = 1}
		if ($progression_unlocked_guitar = -1)
			change progression_unlocked_guitar = ($secret_guitars [(<guitar> - 1)].id)
		else
			change progression_unlocked_guitar2 = ($secret_guitars [(<guitar> - 1)].id)
		endif
		change \{progression_unlocked_type = guitar}
	else
		setglobaltags ($secret_basses [(<bass> - 1)].id) params = {unlocked_for_purchase = 1}
		if ($progression_unlocked_guitar = -1)
			change progression_unlocked_guitar = ($secret_basses [(<bass> - 1)].id)
		else
			change progression_unlocked_guitar2 = ($secret_basses [(<bass> - 1)].id)
		endif
		change \{progression_unlocked_type = bass}
	endif
endscript

script progression_songfailed 
	printf \{"Progression_SongFailed"}
	if ($coop_dlc_active = 1)
		return
	endif
	if ($game_mode = p1_career ||
			$game_mode = p2_career)
		updateatoms \{name = progression}
	endif
	change \{achievements_songwonflag = 0}
	updateatoms \{name = achievement}
endscript

script progression_songwon 
	printf \{"Progression_SongWon"}
	additional_cash = 0
	change \{progression_beat_game_last_song = 0}
	change \{progression_unlock_tier_last_song = 0}
	change \{progression_got_sponsored_last_song = 0}
	change \{progression_play_completion_movie = 0}
	player = 1
	begin
	formattext checksumname = player_status 'player%i_status' i = <player>
	new_stars = 3
	if ($<player_status>.score >= $<player_status>.base_score * 2.8)
		new_stars = 5
	elseif ($<player_status>.score >= $<player_status>.base_score * 2)
		new_stars = 4
	endif
	change structurename = <player_status> stars = <new_stars>
	player = (<player> + 1)
	repeat $current_num_players
	if ($coop_dlc_active = 1)
		if ($player1_status.total_notes = $player1_status.notes_hit)
			if NOT ($player1_status.total_notes = 0)
				writeachievements \{achievement = leaders_of_the_pack}
			endif
		endif
		return
	endif
	get_difficulty_text_nl difficulty = ($current_difficulty)
	get_song_prefix song = ($current_song)
	formattext checksumname = songname '%s_%d' s = <song_prefix> d = <difficulty_text_nl>
	if ($player1_status.total_notes > 0)
		p1_percent_complete = (100 * $player1_status.notes_hit / $player1_status.total_notes)
		if (<p1_percent_complete> = 100)
			if ($game_mode = p1_quickplay)
				setglobaltags <songname> params = {percent100 = 1}
			endif
			if ($game_mode = p1_quickplay ||
					$game_mode = p1_career)
				setglobaltags <songname> params = {achievement_gold_star = 1}
			endif
		endif
	endif
	if ($game_mode = p1_career ||
			$game_mode = p2_career)
		get_progression_globals game_mode = ($game_mode) use_current_tab = 1
		songlist = <tier_global>
		get_band_game_mode_name
		formattext checksumname = bandname_id 'band%i_info_%g' i = ($current_band) g = <game_mode_name>
		setglobaltags <bandname_id> params = {first_play = 0}
		getglobaltags \{progression
			params = current_tier}
		getglobaltags \{progression
			params = current_song_count}
		song_count = <current_song_count>
		if gotparam \{current_tier}
			setlist_prefix = ($<songlist>.prefix)
			formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<song_count> + 1) s = <current_tier> addtostringlookup = true
			formattext checksumname = tier_checksum 'tier%s' s = <current_tier>
			if progression_isbosssong tier_global = <tier_global> tier = <current_tier> song = (<tier_global>.<tier_checksum>.songs [<song_count>])
				change \{structurename = player1_status
					stars = 5}
			endif
			getglobaltags <song_checksum> param = stars
			getglobaltags <song_checksum> param = score
			if ($game_mode = p1_career)
				new_score = ($player1_status.score)
				new_stars = ($player1_status.stars)
			else
				new_score = ($player1_status.score + $player2_status.score)
				new_stars = (($player1_status.stars + $player1_status.stars) / 2)
			endif
			if ($player1_status.total_notes > 0)
				p1_percent_complete = (100 * $player1_status.notes_hit / $player1_status.total_notes)
				if (<p1_percent_complete> = 100)
					setglobaltags <song_checksum> params = {percent100 = 1}
				endif
			endif
			if (<new_stars> > <stars>)
				setglobaltags <song_checksum> params = {stars = <new_stars>}
				if ($current_tab = tab_setlist)
					if NOT structurecontains structure = (<tier_global>.<tier_checksum>) nocash
						progression_awardcash old_stars = <stars> new_stars = <new_stars>
					endif
				endif
			endif
			if (<new_score> > <score>)
				casttointeger \{new_score}
				setglobaltags <song_checksum> params = {score = <new_score>}
			endif
			progression_calcsetlistnextsong tier_global = <tier_global>
		endif
	endif
	achievements_songwon additional_cash = <additional_cash>
	if ($game_mode = p1_career || $game_mode = p2_career)
		updateatoms \{name = progression}
	endif
	change \{achievements_songwonflag = 1}
	updateatoms \{name = achievement}
endscript
end_credits = 0
boss_devil_score = 0

script progression_endcredits 
	printf \{"CREDITS BEGIN"}
	change boss_devil_score = ($player1_status.score)
	change \{current_level = load_z_credits}
	ui_flow_manager_respond_to_action \{action = select_retry}
	change \{current_song = thrufireandflames}
	create_loading_screen
	load_venue
	restart_gem_scroller song_name = ($current_song) difficulty = ($current_difficulty) difficulty2 = ($current_difficulty2) starttime = 0 end_credits_restart = 1
	destroy_loading_screen
	start_flow_manager \{flow_state = career_play_song_fs}
	spawnscriptnow \{scrolling_list_begin}
endscript

script progression_endcredits_done 
	if ($end_credits = 1)
		change structurename = player1_status score = ($boss_devil_score)
		change \{boss_devil_score = 0}
	endif
	destroy_credits_menu
endscript

script playmovie_endcredits 
	killmovie \{textureslot = 1}
	preloadmovie \{movie = 'Fret_Flames'
		textureslot = 1
		texturepri = -2
		no_loop
		no_hold}
	begin
	if (ismoviepreloaded textureslot = 1)
		startpreloadedmovie \{textureslot = 1}
		return
	endif
	wait \{1
		gameframe}
	repeat
endscript

script progression_calcsetlistnextsong 
	if ($current_tab = tab_setlist)
		setlist_prefix = ($<tier_global>.prefix)
		num_tiers = ($<tier_global>.num_tiers)
		tier = 1
		begin
		formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
		getglobaltags <tiername> param = unlocked
		if (<unlocked> = 0)
			tier = (<tier> - 1)
			break
		endif
		tier = (<tier> + 1)
		repeat <num_tiers>
		if (<tier> > <num_tiers>)
			tier = <num_tiers>
		endif
		found = 0
		progression_getbosssong tier_global = <tier_global> tier = <tier>
		if (<song_count> = -1 && found = 0)
			formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<song_count> + 1) s = <tier> addtostringlookup = true
			getglobaltags <song_checksum> param = unlocked
			if (<unlocked> = 1)
				found = 1
			endif
		endif
		progression_getencoresong tier_global = <tier_global> tier = <tier>
		if (<song_count> = -1 && found = 0)
			formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<song_count> + 1) s = <tier> addtostringlookup = true
			getglobaltags <song_checksum> param = unlocked
			if (<unlocked> = 1)
				found = 1
			endif
		endif
		if (<found> = 0)
			formattext checksumname = tier_checksum 'tier%s' s = <tier>
			getarraysize (<tier_global>.<tier_checksum>.songs)
			song_count = 0
			begin
			formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<song_count> + 1) s = <tier> addtostringlookup = true
			getglobaltags <song_checksum> param = stars
			getglobaltags <song_checksum> param = unlocked
			if (<stars> < 3 && <unlocked> = 1)
				found = 1
				break
			endif
			song_count = (<song_count> + 1)
			repeat <array_size>
		endif
		if (<found> = 1)
			change setlist_previous_tier = <tier>
			change setlist_previous_song = <song_count>
		endif
	endif
endscript

script progression_awardcash 
	printf \{"Progression_AwardCash"}
	cash = -1
	getarraysize \{$cash_system_rules}
	array_count = 0
	begin
	progression_getdifficulty
	if (<difficulty> = $cash_system_rules [<array_count>].diff)
		if (<new_stars> = $cash_system_rules [<array_count>].newstars)
			if (<old_stars> = $cash_system_rules [<array_count>].oldstars)
				cash = ($cash_system_rules [<array_count>].cash)
			endif
		endif
	endif
	array_count = (<array_count> + 1)
	repeat <array_size>
	if (<new_stars> = <old_stars>)
		cash = 0
	endif
	if (<cash> = -1)
		printstruct <...>
		scriptassert \{"Cash Rules not found"}
	endif
	change structurename = player1_status new_cash = (<cash> + $player1_status.new_cash)
	additional_cash = <cash>
	get_current_band_info
	getglobaltags <band_info>
	<cash> = (<cash> + <additional_cash>)
	setglobaltags <band_info> params = {cash = <cash>}
	printf "cash = %d" d = <cash>
	return additional_cash = <additional_cash>
endscript

script progression_countcompletedsongsincurrenttier 
	completed_songs = 0
	get_progression_globals game_mode = ($game_mode)
	if NOT (<tier_global> = 0 || $setlist_selection_tier = 0)
		progression_getnumtiersong tier_global = <tier_global> tier = ($setlist_selection_tier) all
		song_count = 0
		begin
		progression_gettiersong tier_global = <tier_global> tier = ($setlist_selection_tier) song_count = <song_count>
		getglobaltags <song_checksum> param = stars
		if NOT (<stars> = 0)
			completed_songs = (<completed_songs> + 1)
		endif
		song_count = (<song_count> + 1)
		repeat <tier_size>
	endif
	return {completed_songs = <completed_songs>}
endscript

script progression_getnumtiersong 
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	getarraysize ($<tier_global>.<tier_checksum>.songs)
	if gotparam \{all}
		return tier_size = <array_size>
	endif
	if structurecontains structure = ($<tier_global>.<tier_checksum>) encorep1
		array_size = (<array_size> - 1)
	endif
	if structurecontains structure = ($<tier_global>.<tier_checksum>) encorep2
		array_size = (<array_size> - 1)
	endif
	if structurecontains structure = ($<tier_global>.<tier_checksum>) boss
		array_size = (<array_size> - 1)
	endif
	return tier_size = <array_size>
endscript

script progression_gettiersong 
	setlist_prefix = ($<tier_global>.prefix)
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<song_count> + 1) s = <tier>
	song = ($<tier_global>.<tier_checksum>.songs [<song_count>])
	return song = <song> song_checksum = <song_checksum>
endscript

script progression_getbosssong 
	setlist_prefix = ($<tier_global>.prefix)
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	if NOT structurecontains structure = ($<tier_global>.<tier_checksum>) boss
		return \{song_count = -1
			song = none
			song_checksum = none}
	endif
	getarraysize ($<tier_global>.<tier_checksum>.songs)
	array_count = (<array_size> - 1)
	if structurecontains structure = ($<tier_global>.<tier_checksum>) encorep1
		array_count = (<array_count> - 1)
	endif
	formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<array_count> + 1) s = <tier>
	song = ($<tier_global>.<tier_checksum>.songs [<array_count>])
	return song_count = <array_count> song = <song> song_checksum = <song_checksum>
endscript

script progression_getencoresong \{type = any}
	setlist_prefix = ($<tier_global>.prefix)
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	if (<type> = any)
		if NOT structurecontains structure = ($<tier_global>.<tier_checksum>) encorep1
			if NOT structurecontains structure = ($<tier_global>.<tier_checksum>) encorep2
				return \{song_count = -1
					song = none
					song_checksum = none}
			endif
		endif
	endif
	if (<type> = p1)
		if NOT structurecontains structure = ($<tier_global>.<tier_checksum>) encorep1
			return \{song_count = -1
				song = none
				song_checksum = none}
		endif
	endif
	if (<type> = p2)
		if NOT structurecontains structure = ($<tier_global>.<tier_checksum>) encorep2
			return \{song_count = -1
				song = none
				song_checksum = none}
		endif
	endif
	getarraysize ($<tier_global>.<tier_checksum>.songs)
	array_count = (<array_size> - 1)
	if (<type> = p1)
		if structurecontains structure = ($<tier_global>.<tier_checksum>) encorep2
			array_count = (<array_count> - 1)
		endif
	endif
	formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<array_count> + 1) s = <tier>
	song = ($<tier_global>.<tier_checksum>.songs [<array_count>])
	return song_count = <array_count> song = <song> song_checksum = <song_checksum>
endscript

script progression_isbosssong 
	if NOT gotparam \{tier}
		return \{false}
	endif
	query_song = <song>
	progression_getbosssong <...>
	if (<song> = <query_song>)
		return \{true}
	endif
	return \{false}
endscript

script progression_isencoresong 
	query_song = <song>
	progression_getencoresong <...> type = p1
	printstruct <...>
	if (<song> = <query_song>)
		return \{true}
	endif
	progression_getencoresong <...> type = p2
	printstruct <...>
	if (<song> = <query_song>)
		return \{true}
	endif
	return \{false}
endscript

script progression_unlocksong \{encore = 0
		boss = 0
		unlocked = 0}
	setlist_prefix = ($<tier_global>.prefix)
	tier = 1
	begin
	formattext checksumname = tiername '%ptier%i' p = <setlist_prefix> i = <tier>
	formattext checksumname = tier_checksum 'tier%s' s = <tier>
	getarraysize ($<tier_global>.<tier_checksum>.songs)
	array_count = 0
	begin
	if ($<tier_global>.<tier_checksum>.songs [<array_count>] = <song>)
		formattext checksumname = song_checksum '%p_song%i_tier%s' p = <setlist_prefix> i = (<array_count> + 1) s = <tier>
		setglobaltags <song_checksum> params = {unlocked = 1}
		if (<encore> = 1)
			setglobaltags <tiername> params = {encore_unlocked = 1}
		elseif (<boss> = 1)
			setglobaltags <tiername> params = {boss_unlocked = 1}
		endif
		setglobaltags <tiername> params = {unlocked = 1}
	endif
	array_count = (<array_count> + 1)
	repeat <array_size>
	tier = (<tier> + 1)
	repeat ($<tier_global>.num_tiers)
endscript

script progression_getdifficulty 
	difficulty = ($current_difficulty)
	if ($game_mode = p2_career)
		get_minimum_difficulty difficulty1 = ($current_difficulty) difficulty2 = ($current_difficulty2)
		difficulty = <minimum_difficulty>
	endif
	return difficulty = <difficulty>
endscript

script progression_setprogressionnodeflags 
	if ($coop_dlc_active = 1)
		change \{game_mode = p2_career}
	endif
	changenodeflag \{ls_always
		1}
	ls_encore = 0
	ls_3_5 = 0
	get_progression_globals game_mode = ($game_mode)
	tier = ($setlist_selection_tier)
	if ($coop_dlc_active = 0)
		if ($game_mode = p1_career ||
				$game_mode = p2_career)
			if progression_isencoresong tier_global = <tier_global> tier = <tier> song = ($current_song)
				ls_encore = 1
			endif
			progression_getdifficulty
			progression_countcompletedsongsincurrenttier
			if (<difficulty> = easy || <difficulty> = medium)
				if (<completed_songs> >= 2)
					ls_3_5 = 1
				endif
			else
				if (<completed_songs> >= 3)
					ls_3_5 = 1
				endif
			endif
		endif
	endif
	printf "Progression_SetProgressionNodeFlags encore = %d 3_5 = %i" d = <ls_encore> i = <ls_3_5>
	if (<ls_encore> = 1)
		changenodeflag \{ls_3_5_pre
			0}
		changenodeflag \{ls_3_5_post
			1}
		changenodeflag \{ls_encore_pre
			0}
		changenodeflag \{ls_encore_post
			1}
	elseif (<ls_3_5> = 1)
		changenodeflag \{ls_3_5_pre
			0}
		changenodeflag \{ls_3_5_post
			1}
		changenodeflag \{ls_encore_pre
			1}
		changenodeflag \{ls_encore_post
			0}
	else
		changenodeflag \{ls_3_5_pre
			1}
		changenodeflag \{ls_3_5_post
			0}
		changenodeflag \{ls_encore_pre
			1}
		changenodeflag \{ls_encore_post
			0}
	endif
endscript
p1_career_progression = {
	tier_global = gh3_career_songs
	progression_global = gh3_career_progression
}
p2_career_progression = {
	tier_global = gh3_coopcareer_songs
	progression_global = gh3_coopcareer_progression
}
bonus_progression = {
	tier_global = gh3_bonus_songs
	progression_global = none
}
download_progression = {
	tier_global = gh3_download_songs
	progression_global = none
}
general_progression = {
	tier_global = gh3_general_songs
	progression_global = none
}
generalp2_progression = {
	tier_global = gh3_generalp2_songs
	progression_global = none
}
p2_coop_progression = {
	tier_global = gh3_generalp2_songs_coop
	progression_global = none
}
demo_progression_career = {
	tier_global = gh3_demo_songs_career
	progression_global = none
}
demo_progression_coop = {
	tier_global = gh3_demo_songs_coop
	progression_global = none
}
demo_progression_multiplayer = {
	tier_global = gh3_demo_songs_multiplayer
	progression_global = none
}
demo_progression_quickplay = {
	tier_global = gh3_demo_songs_quickplay
	progression_global = none
}

script get_progression_globals game_mode = <game_mode> use_current_tab = 0
	if (<use_current_tab> = 1)
		if ($current_tab = tab_bonus)
			bonus = 1
		elseif ($current_tab = tab_downloads)
			download = 1
		endif
	endif
	if ($is_demo_mode = 1)
		if gotparam \{bonus}
			addparams ($bonus_progression)
		elseif gotparam \{download}
			addparams ($download_progression)
		elseif (<game_mode> = p1_career)
			addparams ($demo_progression_career)
		elseif (<game_mode> = p2_career)
			addparams ($demo_progression_coop)
		elseif (<game_mode> = p1_quickplay)
			addparams ($demo_progression_quickplay)
		else
			addparams ($demo_progression_multiplayer)
		endif
		return tier_global = <tier_global> progression_global = <progression_global>
	endif
	if gotparam \{bonus}
		addparams ($bonus_progression)
	elseif gotparam \{download}
		addparams ($download_progression)
	elseif (<game_mode> = p1_career)
		addparams ($p1_career_progression)
	elseif (<game_mode> = p2_career)
		addparams ($p2_career_progression)
	elseif (<game_mode> = p1_quickplay)
		addparams ($general_progression)
	elseif (<game_mode> = p2_coop)
		addparams ($p2_coop_progression)
	else
		addparams ($generalp2_progression)
	endif
	return tier_global = <tier_global> progression_global = <progression_global>
endscript
