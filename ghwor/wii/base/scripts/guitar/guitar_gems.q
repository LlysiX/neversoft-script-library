whammy_units_per_second = 6.3500004
prefretbar_time = 0.0
current_startup_script = nothing
current_exit_script = nothing
minimum_transition_load_time = 0.0
finished_gig_band_rebuild = 0
start_gem_scroller_running = 0
movie_on_first_freeplay = 0
g_gem_scrollers_are_go = 1
num_song_columns = 2
gem_colors = [
	green
	red
	yellow
	blue
	orange
	white
]
gem_colors_text = [
	'green'
	'red'
	'yellow'
	'blue'
	'orange'
	'white'
]
scripts_array = [
	{
		Name = 'scripts'
		lead_ms = 0
	}
	{
		Name = 'anim'
		lead_ms = 0
	}
	{
		Name = 'cameras'
		lead_ms = 0
	}
	{
		Name = 'lightshow'
		lead_ms = $lightshow_offset_ms
	}
	{
		Name = 'crowd'
		lead_ms = 0
	}
	{
		Name = 'performance'
		lead_ms = 0
	}
	{
		Name = 'facial'
		lead_ms = 0
	}
]
fretbar_end_scale = 0.48000002
dlc_songpak_spec = '%i%s_song.pak'
button_models = [
	{
		green = {
			gem_material = mat_gem_green
			gem_hammer_material = mat_gem_hammer_green
			star_material = mat_gem_star_green
			star_hammer_material = mat_gem_star_hammer_green
			whammy_material = mat_whammy_green
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_green
			solo_star_material = mat_gem_star_tapping_green
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_green
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_green
			star_material_drum = mat_gem_drum_star_green
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_green
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_green
			star_material_drum_accent = mat_gem_drum_star_accent_green
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_green
			gem_band_moment_material_drum = mat_gem_drum_green
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_green
			gem_band_moment_material_hammer_on = mat_gem_hammer_green
			gem_band_moment_material_tapping = mat_gem_tapping_green
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_green
			ghost_star_material_drum = mat_gem_drum_star_ghost_green
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_green
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			Name = button_g
		}
		red = {
			gem_material = mat_gem_red
			gem_hammer_material = mat_gem_hammer_red
			star_material = mat_gem_star_red
			star_hammer_material = mat_gem_star_hammer_red
			whammy_material = mat_whammy_red
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_red
			solo_star_material = mat_gem_star_tapping_red
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_red
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_red
			star_material_drum = mat_gem_drum_star_red
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_red
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_red
			star_material_drum_accent = mat_gem_drum_star_accent_red
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_red
			gem_band_moment_material_drum = mat_gem_drum_red
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_red
			gem_band_moment_material_hammer_on = mat_gem_hammer_red
			gem_band_moment_material_tapping = mat_gem_tapping_red
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_red
			ghost_star_material_drum = mat_gem_drum_star_ghost_red
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_red
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_r
		}
		yellow = {
			gem_material = mat_gem_yellow
			gem_hammer_material = mat_gem_hammer_yellow
			star_material = mat_gem_star_yellow
			star_hammer_material = mat_gem_star_hammer_yellow
			whammy_material = mat_whammy_yellow
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_yellow
			solo_star_material = mat_gem_star_tapping_yellow
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_yellow
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_yellow
			star_material_drum = mat_gem_drum_star_yellow
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_yellow
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_yellow
			star_material_drum_accent = mat_gem_drum_star_accent_yellow
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_yellow
			gem_band_moment_material_drum = mat_gem_drum_yellow
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_yellow
			gem_band_moment_material_hammer_on = mat_gem_hammer_yellow
			gem_band_moment_material_tapping = mat_gem_tapping_yellow
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_yellow
			ghost_star_material_drum = mat_gem_drum_star_ghost_yellow
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_yellow
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_y
		}
		blue = {
			gem_material = mat_gem_blue
			gem_hammer_material = mat_gem_hammer_blue
			star_material = mat_gem_star_blue
			star_hammer_material = mat_gem_star_hammer_blue
			whammy_material = mat_whammy_blue
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_blue
			solo_star_material = mat_gem_star_tapping_blue
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_blue
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_blue
			star_material_drum = mat_gem_drum_star_blue
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_blue
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_blue
			star_material_drum_accent = mat_gem_drum_star_accent_blue
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_blue
			gem_band_moment_material_drum = mat_gem_drum_blue
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_blue
			gem_band_moment_material_hammer_on = mat_gem_hammer_blue
			gem_band_moment_material_tapping = mat_gem_tapping_blue
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_blue
			ghost_star_material_drum = mat_gem_drum_star_ghost_blue
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_blue
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_b
		}
		orange = {
			gem_material = mat_gem_orange
			gem_hammer_material = mat_gem_hammer_orange
			star_material = mat_gem_star_orange
			star_hammer_material = mat_gem_star_hammer_orange
			whammy_material = mat_whammy_orange
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_orange
			solo_star_material = mat_gem_star_tapping_orange
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_orange
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_orange
			star_material_drum = mat_gem_drum_star_orange
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_orange
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_orange
			star_material_drum_accent = mat_gem_drum_star_accent_orange
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_orange
			gem_band_moment_material_drum = mat_gem_drum_orange
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_orange
			gem_band_moment_material_hammer_on = mat_gem_hammer_orange
			gem_band_moment_material_tapping = mat_gem_tapping_orange
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_orange
			ghost_star_material_drum = mat_gem_drum_star_ghost_orange
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_orange
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_o
		}
		white = {
			gem_material = mat_gem_open
			gem_hammer_material = mat_gem_hammer_open
			star_material = mat_gem_star_open
			star_hammer_material = mat_gem_star_hammer_open
			whammy_material = mat_whammy_opennote
			star_power_material = mat_gem_open_sp
			star_power_star_material = mat_gem_star_open_sp
			star_power_hammer_star_material = mat_gem_star_hammer_open_sp
			star_power_hammer_material = mat_gem_hammer_open_sp
			star_power_whammy_material = mat_whammy_opennote_sp
			gem_deadnote_material = mat_gem_open_dead
			star_deadnote_material = mat_gem_star_open_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_open_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_open_dead
			gem_deadnote_band_moment_material = mat_gem_open_dead
			gem_deadnote_band_moment_hammer_material = mat_gem_hammer_open_dead
			dead_whammy = mat_whammy_dead
			gem_band_moment_material = mat_gem_open
			star_power_material_band_moment = mat_gem_open_sp
			gem_band_moment_material_hammer_on = mat_gem_hammer_open
			star_power_material_band_moment_hammer_on = mat_gem_hammer_open_sp
			gem_material_drum = mat_gem_drum_kick
			star_material_drum = mat_gem_drum_star_kick
			star_power_material_drum = mat_gem_drum_kick_sp
			star_power_star_material_drum = mat_gem_drum_star_kick_sp
			whammy_material_drum = mat_whammy_kick
			star_power_whammy_material_drum = mat_whammy_kick
			gem_deadnote_material_drum = mat_gem_drum_kick_dead
			star_deadnote_material_drum = mat_gem_drum_star_kick_dead
			gem_deadnote_band_moment_material = mat_gem_drum_kick_dead
			gem_band_moment_material_drum = mat_gem_drum_kick
			star_power_material_band_moment_drum = mat_gem_drum_kick_sp
			gem_band_moment_whammy = mat_placeholder
			gem_material_beginner = mat_gem_kid
			star_material_beginner = mat_gem_star_kid
			star_power_material_beginner = mat_gem_kid_sp
			star_power_star_material_beginner = mat_gem_star_kid_sp
			gem_band_moment_material_beginner = mat_gem_kid
			star_power_band_moment_material_beginner = mat_gem_kid_sp
			gem_deadnote_material_beginner = mat_gem_kid_dead
			star_deadnote_material_beginner = mat_gem_star_kid_dead
			gem_band_moment_material_tapping = mat_placeholder
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			solo_material = mat_placeholder
			solo_star_material = mat_placeholder
			solo_star_power_material = mat_placeholder
			solo_star_power_star_material = mat_placeholder
			solo_whammy_material = mat_placeholder
			solo_whammy_star_material = mat_placeholder
			star_power_material_band_moment_tapping = mat_placeholder
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			Name = button_b
		}
	}
	{
		green = {
			gem_material = mat_gem_green
			gem_hammer_material = mat_gem_hammer_green
			star_material = mat_gem_star_green
			star_hammer_material = mat_gem_star_hammer_green
			whammy_material = mat_whammy_green
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_green
			solo_star_material = mat_gem_star_tapping_green
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_green
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_green
			star_material_drum = mat_gem_drum_star_green
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_green
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_green
			star_material_drum_accent = mat_gem_drum_star_accent_green
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_green
			gem_band_moment_material_drum = mat_gem_drum_green
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_green
			gem_band_moment_material_hammer_on = mat_gem_hammer_green
			gem_band_moment_material_tapping = mat_gem_tapping_green
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_green
			ghost_star_material_drum = mat_gem_drum_star_ghost_green
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_green
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_g
		}
		red = {
			gem_material = mat_gem_red
			gem_hammer_material = mat_gem_hammer_red
			star_material = mat_gem_star_red
			star_hammer_material = mat_gem_star_hammer_red
			whammy_material = mat_whammy_red
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_red
			solo_star_material = mat_gem_star_tapping_red
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_red
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_red
			star_material_drum = mat_gem_drum_star_red
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_red
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_red
			star_material_drum_accent = mat_gem_drum_star_accent_red
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_red
			gem_band_moment_material_drum = mat_gem_drum_red
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_red
			gem_band_moment_material_hammer_on = mat_gem_hammer_red
			gem_band_moment_material_tapping = mat_gem_tapping_red
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_red
			ghost_star_material_drum = mat_gem_drum_star_ghost_red
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_red
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_r
		}
		yellow = {
			gem_material = mat_gem_yellow
			gem_hammer_material = mat_gem_hammer_yellow
			star_material = mat_gem_star_yellow
			star_hammer_material = mat_gem_star_hammer_yellow
			whammy_material = mat_whammy_yellow
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_yellow
			solo_star_material = mat_gem_star_tapping_yellow
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_yellow
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_yellow
			star_material_drum = mat_gem_drum_star_yellow
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_yellow
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_yellow
			star_material_drum_accent = mat_gem_drum_star_accent_yellow
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_yellow
			gem_band_moment_material_drum = mat_gem_drum_yellow
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_yellow
			gem_band_moment_material_hammer_on = mat_gem_hammer_yellow
			gem_band_moment_material_tapping = mat_gem_tapping_yellow
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_yellow
			ghost_star_material_drum = mat_gem_drum_star_ghost_yellow
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_yellow
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_y
		}
		blue = {
			gem_material = mat_gem_blue
			gem_hammer_material = mat_gem_hammer_blue
			star_material = mat_gem_star_blue
			star_hammer_material = mat_gem_star_hammer_blue
			whammy_material = mat_whammy_blue
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_blue
			solo_star_material = mat_gem_star_tapping_blue
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_blue
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_blue
			star_material_drum = mat_gem_drum_star_blue
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_blue
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_blue
			star_material_drum_accent = mat_gem_drum_star_accent_blue
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_blue
			gem_band_moment_material_drum = mat_gem_drum_blue
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_blue
			gem_band_moment_material_hammer_on = mat_gem_hammer_blue
			gem_band_moment_material_tapping = mat_gem_tapping_blue
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_blue
			ghost_star_material_drum = mat_gem_drum_star_ghost_blue
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_blue
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_b
		}
		orange = {
			gem_material = mat_gem_orange
			gem_hammer_material = mat_gem_hammer_orange
			star_material = mat_gem_star_orange
			star_hammer_material = mat_gem_star_hammer_orange
			whammy_material = mat_whammy_orange
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_orange
			solo_star_material = mat_gem_star_tapping_orange
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_orange
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_orange
			star_material_drum = mat_gem_drum_star_orange
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_orange
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_orange
			star_material_drum_accent = mat_gem_drum_star_accent_orange
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_orange
			gem_band_moment_material_drum = mat_gem_drum_orange
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_orange
			gem_band_moment_material_hammer_on = mat_gem_hammer_orange
			gem_band_moment_material_tapping = mat_gem_tapping_orange
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_orange
			ghost_star_material_drum = mat_gem_drum_star_ghost_orange
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_orange
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_o
		}
		white = {
			gem_material = mat_gem_open
			gem_hammer_material = mat_gem_hammer_open
			star_material = mat_gem_star_open
			star_hammer_material = mat_gem_star_hammer_open
			whammy_material = mat_whammy_opennote
			star_power_material = mat_gem_open_sp
			star_power_star_material = mat_gem_star_open_sp
			star_power_hammer_star_material = mat_gem_star_hammer_open_sp
			star_power_hammer_material = mat_gem_hammer_open_sp
			star_power_whammy_material = mat_whammy_opennote_sp
			gem_deadnote_material = mat_gem_open_dead
			star_deadnote_material = mat_gem_star_open_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_open_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_open_dead
			gem_deadnote_band_moment_material = mat_gem_open_dead
			gem_deadnote_band_moment_hammer_material = mat_gem_hammer_open_dead
			dead_whammy = mat_whammy_dead
			gem_band_moment_material = mat_gem_open
			star_power_material_band_moment = mat_gem_open_sp
			gem_band_moment_material_hammer_on = mat_gem_hammer_open
			star_power_material_band_moment_hammer_on = mat_gem_hammer_open_sp
			gem_material_drum = mat_gem_drum_kick
			star_material_drum = mat_gem_drum_star_kick
			star_power_material_drum = mat_gem_drum_kick_sp
			star_power_star_material_drum = mat_gem_drum_star_kick_sp
			whammy_material_drum = mat_whammy_kick
			star_power_whammy_material_drum = mat_whammy_kick
			gem_deadnote_material_drum = mat_gem_drum_kick_dead
			star_deadnote_material_drum = mat_gem_drum_star_kick_dead
			gem_deadnote_band_moment_material = mat_gem_drum_kick_dead
			gem_band_moment_material_drum = mat_gem_drum_kick
			star_power_material_band_moment_drum = mat_gem_drum_kick_sp
			gem_band_moment_whammy = mat_placeholder
			gem_material_beginner = mat_gem_kid
			star_material_beginner = mat_gem_star_kid
			star_power_material_beginner = mat_gem_kid_sp
			star_power_star_material_beginner = mat_gem_star_kid_sp
			gem_band_moment_material_beginner = mat_gem_kid
			star_power_band_moment_material_beginner = mat_gem_kid_sp
			gem_deadnote_material_beginner = mat_gem_kid_dead
			star_deadnote_material_beginner = mat_gem_star_kid_dead
			gem_band_moment_material_tapping = mat_placeholder
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			solo_material = mat_placeholder
			solo_star_material = mat_placeholder
			solo_star_power_material = mat_placeholder
			solo_star_power_star_material = mat_placeholder
			solo_whammy_material = mat_placeholder
			solo_whammy_star_material = mat_placeholder
			star_power_material_band_moment_tapping = mat_placeholder
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			Name = button_b
		}
	}
	{
		green = {
			gem_material = mat_gem_green
			gem_hammer_material = mat_gem_hammer_green
			star_material = mat_gem_star_green
			star_hammer_material = mat_gem_star_hammer_green
			whammy_material = mat_whammy_green
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_green
			solo_star_material = mat_gem_star_tapping_green
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_green
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_green
			star_material_drum = mat_gem_drum_star_green
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_green
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_green
			star_material_drum_accent = mat_gem_drum_star_accent_green
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_green
			gem_band_moment_material_drum = mat_gem_drum_green
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_green
			gem_band_moment_material_hammer_on = mat_gem_hammer_green
			gem_band_moment_material_tapping = mat_gem_tapping_green
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_green
			ghost_star_material_drum = mat_gem_drum_star_ghost_green
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_green
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_g
		}
		red = {
			gem_material = mat_gem_red
			gem_hammer_material = mat_gem_hammer_red
			star_material = mat_gem_star_red
			star_hammer_material = mat_gem_star_hammer_red
			whammy_material = mat_whammy_red
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_red
			solo_star_material = mat_gem_star_tapping_red
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_red
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_red
			star_material_drum = mat_gem_drum_star_red
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_red
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_red
			star_material_drum_accent = mat_gem_drum_star_accent_red
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_red
			gem_band_moment_material_drum = mat_gem_drum_red
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_red
			gem_band_moment_material_hammer_on = mat_gem_hammer_red
			gem_band_moment_material_tapping = mat_gem_tapping_red
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_red
			ghost_star_material_drum = mat_gem_drum_star_ghost_red
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_red
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_r
		}
		yellow = {
			gem_material = mat_gem_yellow
			gem_hammer_material = mat_gem_hammer_yellow
			star_material = mat_gem_star_yellow
			star_hammer_material = mat_gem_star_hammer_yellow
			whammy_material = mat_whammy_yellow
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_yellow
			solo_star_material = mat_gem_star_tapping_yellow
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_yellow
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_yellow
			star_material_drum = mat_gem_drum_star_yellow
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_yellow
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_yellow
			star_material_drum_accent = mat_gem_drum_star_accent_yellow
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_yellow
			gem_band_moment_material_drum = mat_gem_drum_yellow
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_yellow
			gem_band_moment_material_hammer_on = mat_gem_hammer_yellow
			gem_band_moment_material_tapping = mat_gem_tapping_yellow
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_yellow
			ghost_star_material_drum = mat_gem_drum_star_ghost_yellow
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_yellow
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_y
		}
		blue = {
			gem_material = mat_gem_blue
			gem_hammer_material = mat_gem_hammer_blue
			star_material = mat_gem_star_blue
			star_hammer_material = mat_gem_star_hammer_blue
			whammy_material = mat_whammy_blue
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_blue
			solo_star_material = mat_gem_star_tapping_blue
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_blue
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_blue
			star_material_drum = mat_gem_drum_star_blue
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_blue
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_blue
			star_material_drum_accent = mat_gem_drum_star_accent_blue
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_blue
			gem_band_moment_material_drum = mat_gem_drum_blue
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_blue
			gem_band_moment_material_hammer_on = mat_gem_hammer_blue
			gem_band_moment_material_tapping = mat_gem_tapping_blue
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_blue
			ghost_star_material_drum = mat_gem_drum_star_ghost_blue
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_blue
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_b
		}
		orange = {
			gem_material = mat_gem_orange
			gem_hammer_material = mat_gem_hammer_orange
			star_material = mat_gem_star_orange
			star_hammer_material = mat_gem_star_hammer_orange
			whammy_material = mat_whammy_orange
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_orange
			solo_star_material = mat_gem_star_tapping_orange
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_orange
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_orange
			star_material_drum = mat_gem_drum_star_orange
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_orange
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_orange
			star_material_drum_accent = mat_gem_drum_star_accent_orange
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_orange
			gem_band_moment_material_drum = mat_gem_drum_orange
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_orange
			gem_band_moment_material_hammer_on = mat_gem_hammer_orange
			gem_band_moment_material_tapping = mat_gem_tapping_orange
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_orange
			ghost_star_material_drum = mat_gem_drum_star_ghost_orange
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_orange
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_o
		}
		white = {
			gem_material = mat_gem_open
			gem_hammer_material = mat_gem_hammer_open
			star_material = mat_gem_star_open
			star_hammer_material = mat_gem_star_hammer_open
			whammy_material = mat_whammy_opennote
			star_power_material = mat_gem_open_sp
			star_power_star_material = mat_gem_star_open_sp
			star_power_hammer_star_material = mat_gem_star_hammer_open_sp
			star_power_hammer_material = mat_gem_hammer_open_sp
			star_power_whammy_material = mat_whammy_opennote_sp
			gem_deadnote_material = mat_gem_open_dead
			star_deadnote_material = mat_gem_star_open_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_open_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_open_dead
			gem_deadnote_band_moment_material = mat_gem_open_dead
			gem_deadnote_band_moment_hammer_material = mat_gem_hammer_open_dead
			dead_whammy = mat_whammy_dead
			gem_band_moment_material = mat_gem_open
			star_power_material_band_moment = mat_gem_open_sp
			gem_band_moment_material_hammer_on = mat_gem_hammer_open
			star_power_material_band_moment_hammer_on = mat_gem_hammer_open_sp
			gem_material_drum = mat_gem_drum_kick
			star_material_drum = mat_gem_drum_star_kick
			star_power_material_drum = mat_gem_drum_kick_sp
			star_power_star_material_drum = mat_gem_drum_star_kick_sp
			whammy_material_drum = mat_whammy_kick
			star_power_whammy_material_drum = mat_whammy_kick
			gem_deadnote_material_drum = mat_gem_drum_kick_dead
			star_deadnote_material_drum = mat_gem_drum_star_kick_dead
			gem_deadnote_band_moment_material = mat_gem_drum_kick_dead
			gem_band_moment_material_drum = mat_gem_drum_kick
			star_power_material_band_moment_drum = mat_gem_drum_kick_sp
			gem_band_moment_whammy = mat_placeholder
			gem_material_beginner = mat_gem_kid
			star_material_beginner = mat_gem_star_kid
			star_power_material_beginner = mat_gem_kid_sp
			star_power_star_material_beginner = mat_gem_star_kid_sp
			gem_band_moment_material_beginner = mat_gem_kid
			star_power_band_moment_material_beginner = mat_gem_kid_sp
			gem_deadnote_material_beginner = mat_gem_kid_dead
			star_deadnote_material_beginner = mat_gem_star_kid_dead
			gem_band_moment_material_tapping = mat_placeholder
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			solo_material = mat_placeholder
			solo_star_material = mat_placeholder
			solo_star_power_material = mat_placeholder
			solo_star_power_star_material = mat_placeholder
			solo_whammy_material = mat_placeholder
			solo_whammy_star_material = mat_placeholder
			star_power_material_band_moment_tapping = mat_placeholder
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			Name = button_b
		}
	}
	{
		green = {
			gem_material = mat_gem_green
			gem_hammer_material = mat_gem_hammer_green
			star_material = mat_gem_star_green
			star_hammer_material = mat_gem_star_hammer_green
			whammy_material = mat_whammy_green
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_green
			solo_star_material = mat_gem_star_tapping_green
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_green
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_green
			star_material_drum = mat_gem_drum_star_green
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_green
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_green
			star_material_drum_accent = mat_gem_drum_star_accent_green
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_green
			gem_band_moment_material_drum = mat_gem_drum_green
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_green
			gem_band_moment_material_hammer_on = mat_gem_hammer_green
			gem_band_moment_material_tapping = mat_gem_tapping_green
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_green
			ghost_star_material_drum = mat_gem_drum_star_ghost_green
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_green
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_g
		}
		red = {
			gem_material = mat_gem_red
			gem_hammer_material = mat_gem_hammer_red
			star_material = mat_gem_star_red
			star_hammer_material = mat_gem_star_hammer_red
			whammy_material = mat_whammy_red
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_red
			solo_star_material = mat_gem_star_tapping_red
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_red
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_red
			star_material_drum = mat_gem_drum_star_red
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_red
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_red
			star_material_drum_accent = mat_gem_drum_star_accent_red
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_red
			gem_band_moment_material_drum = mat_gem_drum_red
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_red
			gem_band_moment_material_hammer_on = mat_gem_hammer_red
			gem_band_moment_material_tapping = mat_gem_tapping_red
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_red
			ghost_star_material_drum = mat_gem_drum_star_ghost_red
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_red
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_r
		}
		yellow = {
			gem_material = mat_gem_yellow
			gem_hammer_material = mat_gem_hammer_yellow
			star_material = mat_gem_star_yellow
			star_hammer_material = mat_gem_star_hammer_yellow
			whammy_material = mat_whammy_yellow
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_yellow
			solo_star_material = mat_gem_star_tapping_yellow
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_yellow
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_yellow
			star_material_drum = mat_gem_drum_star_yellow
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_yellow
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_yellow
			star_material_drum_accent = mat_gem_drum_star_accent_yellow
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_yellow
			gem_band_moment_material_drum = mat_gem_drum_yellow
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_yellow
			gem_band_moment_material_hammer_on = mat_gem_hammer_yellow
			gem_band_moment_material_tapping = mat_gem_tapping_yellow
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_yellow
			ghost_star_material_drum = mat_gem_drum_star_ghost_yellow
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_yellow
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_y
		}
		blue = {
			gem_material = mat_gem_blue
			gem_hammer_material = mat_gem_hammer_blue
			star_material = mat_gem_star_blue
			star_hammer_material = mat_gem_star_hammer_blue
			whammy_material = mat_whammy_blue
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_blue
			solo_star_material = mat_gem_star_tapping_blue
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_blue
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_blue
			star_material_drum = mat_gem_drum_star_blue
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_blue
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_blue
			star_material_drum_accent = mat_gem_drum_star_accent_blue
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_blue
			gem_band_moment_material_drum = mat_gem_drum_blue
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_blue
			gem_band_moment_material_hammer_on = mat_gem_hammer_blue
			gem_band_moment_material_tapping = mat_gem_tapping_blue
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_blue
			ghost_star_material_drum = mat_gem_drum_star_ghost_blue
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_blue
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_b
		}
		orange = {
			gem_material = mat_gem_orange
			gem_hammer_material = mat_gem_hammer_orange
			star_material = mat_gem_star_orange
			star_hammer_material = mat_gem_star_hammer_orange
			whammy_material = mat_whammy_orange
			star_power_material = mat_gem_sp
			star_power_star_material = mat_gem_star_sp
			star_power_hammer_star_material = mat_gem_star_hammer_sp
			star_power_hammer_material = mat_gem_hammer_sp
			star_power_whammy_material = mat_whammy_sp
			solo_material = mat_gem_tapping_orange
			solo_star_material = mat_gem_star_tapping_orange
			solo_star_power_material = mat_gem_tapping_sp
			solo_star_power_star_material = mat_gem_star_tapping_sp
			solo_whammy_material = mat_whammy_tapping_orange
			solo_whammy_star_material = mat_whammy_tapping_sp
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			dead_whammy = mat_whammy_dead
			gem_material_drum = mat_gem_drum_orange
			star_material_drum = mat_gem_drum_star_orange
			star_power_material_drum = mat_gem_drum_sp
			star_power_star_material_drum = mat_gem_drum_star_sp
			whammy_material_drum = mat_whammy_orange
			star_power_whammy_material_drum = mat_whammy_sp
			gem_material_drum_accent = mat_gem_drum_accent_orange
			star_material_drum_accent = mat_gem_drum_star_accent_orange
			star_power_material_drum_accent = mat_gem_drum_accent_sp
			star_power_star_material_drum_accent = mat_gem_drum_star_accent_sp
			gem_deadnote_material = mat_gem_dead
			star_deadnote_material = mat_gem_star_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_dead
			solo_deadnote_material = mat_gem_tapping_dead
			solo_star_deadnote_material = mat_gem_star_tapping_dead
			gem_deadnote_band_moment_material = mat_gem_dead
			gem_deadnote_band_moment_material_hammer_on = mat_gem_hammer_dead
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			gem_deadnote_material_drum = mat_gem_drum_dead
			star_deadnote_material_drum = mat_gem_drum_star_dead
			gem_deadnote_material_drum_accent = mat_gem_drum_accent_dead
			star_deadnote_material_drum_accent = mat_gem_drum_star_accent_dead
			gem_deadnote_band_moment_material_drum = mat_gem_drum_dead
			gem_deadnote_band_moment_material_drum_accent = mat_gem_drum_accent_deadnote
			star_power_material_band_moment = mat_gem_sp
			star_power_material_band_moment_tapping = mat_gem_tapping_sp
			star_power_material_band_moment_hammer_on = mat_gem_hammer_sp
			star_power_material_band_moment_drum = mat_gem_drum_sp
			star_power_material_band_moment_drum_accent = mat_gem_drum_accent_sp
			star_power_material_band_moment_drum_ghost = mat_gem_drum_band_moment_ghost_sp
			gem_band_moment_material = mat_gem_orange
			gem_band_moment_material_drum = mat_gem_drum_orange
			gem_band_moment_material_drum_accent = mat_gem_drum_accent_orange
			gem_band_moment_material_hammer_on = mat_gem_hammer_orange
			gem_band_moment_material_tapping = mat_gem_tapping_orange
			gem_band_moment_whammy = mat_whammy_dead
			ghost_gem_material_drum = mat_gem_drum_ghost_orange
			ghost_star_material_drum = mat_gem_drum_star_ghost_orange
			ghost_star_power_material_drum = mat_gem_drum_ghost_sp
			ghost_star_power_star_material_drum = mat_gem_drum_star_ghost_sp
			ghost_gem_deadnote_material_drum = mat_gem_drum_ghost_dead
			ghost_star_deadnote_material_drum = mat_gem_drum_star_ghost_dead
			ghost_gem_band_moment_material_drum = mat_gem_drum_ghost_orange
			ghost_gem_deadnote_band_moment_material_drum = mat_gem_drum_ghost_dead
			Name = button_o
		}
		white = {
			gem_material = mat_gem_open
			gem_hammer_material = mat_gem_hammer_open
			star_material = mat_gem_star_open
			star_hammer_material = mat_gem_star_hammer_open
			whammy_material = mat_whammy_opennote
			star_power_material = mat_gem_open_sp
			star_power_star_material = mat_gem_star_open_sp
			star_power_hammer_star_material = mat_gem_star_hammer_open_sp
			star_power_hammer_material = mat_gem_hammer_open_sp
			star_power_whammy_material = mat_whammy_opennote_sp
			gem_deadnote_material = mat_gem_open_dead
			star_deadnote_material = mat_gem_star_open_dead
			gem_deadnote_material_hammer_on = mat_gem_hammer_open_dead
			star_deadnote_hammer_material = mat_gem_star_hammer_open_dead
			gem_deadnote_band_moment_material = mat_gem_open_dead
			gem_deadnote_band_moment_hammer_material = mat_gem_hammer_open_dead
			dead_whammy = mat_whammy_dead
			gem_band_moment_material = mat_gem_open
			star_power_material_band_moment = mat_gem_open_sp
			gem_band_moment_material_hammer_on = mat_gem_hammer_open
			star_power_material_band_moment_hammer_on = mat_gem_hammer_open_sp
			gem_material_drum = mat_gem_drum_kick
			star_material_drum = mat_gem_drum_star_kick
			star_power_material_drum = mat_gem_drum_kick_sp
			star_power_star_material_drum = mat_gem_drum_star_kick_sp
			whammy_material_drum = mat_whammy_kick
			star_power_whammy_material_drum = mat_whammy_kick
			gem_deadnote_material_drum = mat_gem_drum_kick_dead
			star_deadnote_material_drum = mat_gem_drum_star_kick_dead
			gem_deadnote_band_moment_material = mat_gem_drum_kick_dead
			gem_band_moment_material_drum = mat_gem_drum_kick
			star_power_material_band_moment_drum = mat_gem_drum_kick_sp
			gem_band_moment_whammy = mat_placeholder
			gem_material_beginner = mat_gem_kid
			star_material_beginner = mat_gem_star_kid
			star_power_material_beginner = mat_gem_kid_sp
			star_power_star_material_beginner = mat_gem_star_kid_sp
			gem_band_moment_material_beginner = mat_gem_kid
			star_power_band_moment_material_beginner = mat_gem_kid_sp
			gem_deadnote_material_beginner = mat_gem_kid_dead
			star_deadnote_material_beginner = mat_gem_star_kid_dead
			gem_band_moment_material_tapping = mat_placeholder
			gem_deadnote_material_tapping = mat_gem_tapping_dead
			solo_material = mat_placeholder
			solo_star_material = mat_placeholder
			solo_star_power_material = mat_placeholder
			solo_star_power_star_material = mat_placeholder
			solo_whammy_material = mat_placeholder
			solo_whammy_star_material = mat_placeholder
			star_power_material_band_moment_tapping = mat_placeholder
			gray_material = mat_placeholder
			gray_hammer_material = mat_placeholder
			gray_whammy_material = mat_whammy_dead
			Name = button_b
		}
	}
]

script setup_models 
	tod_manager_create_perm_lights
	LightShow_CreatePermModels
endscript

script get_gem_array_name 
	RequireParams \{[
			song_name
			difficulty
		]
		all}
	get_notetrack_part_text Player = <Player> song_name = <song_name> part = <part>
	get_song_prefix song = <song_name>
	get_difficulty_text_nl difficulty = <difficulty> no_rhythm = 1
	if (<song_name> = jamsession)
		blank_part = <part>
		<vocals> = 0
		if GotParam \{Player}
			getplayerinfo <Player> part
			if checksumequals a = <part> b = vocals
				<vocals> = 1
			endif
		endif
		if (<vocals> = 1)
			formatText \{checksumName = gem_array
				'jamsession_song_vocals'
				AddToStringLookup = true}
			<part> = <blank_part>
		else
			<part> = <blank_part>
			formatText checksumName = gem_array '%s_song_%p%d' s = <song_prefix> p = <part> d = <difficulty_text_nl> AddToStringLookup = true
		endif
	else
		formatText checksumName = gem_array '%s_song_%p%d' s = <song_prefix> p = <part> d = <difficulty_text_nl> AddToStringLookup = true
	endif
	return gem_array = <gem_array>
endscript

script get_fretbar_array_name 
	RequireParams \{[
			song_name
		]
		all}
	get_song_prefix song = <song_name>
	formatText checksumName = fretbar_array '%s_fretbars' s = <song_prefix> AddToStringLookup = true
	return fretbar_array = <fretbar_array>
endscript

script setup_gemarrays \{Player = 1}
	get_gem_array_name song_name = <song_name> Player = <Player> difficulty = <difficulty>
	get_fretbar_array_name song_name = <song_name>
	setplayerinfo <Player> current_song_name = <song_name>
	beat_time = 0
	songfilemanager func = get_num_fretbar_notes song_name = <song_name>
	if (<num_fretbar_notes> > 0)
		songfilemanager func = get_fretbar_note song_name = <song_name> index = 1
		beat_time = <fretbar_time>
	endif
	setplayerinfo <Player> current_song_beat_time = <beat_time>
	casttofloat \{beat_time}
	setplayerinfo <Player> playline_song_beat_time = <beat_time>
	return gem_array = <gem_array> fretbar_array = <fretbar_array> song_prefix = <song_prefix> difficulty_text_nl = <difficulty_text_nl>
endscript

script debug_get_bitfield_text 
	gem_count = 0
	bitfield_text = 'pattern:'
	value_bitfield = <curr_bitfield>
	begin
	value = 0
	if NOT ((<value_bitfield> / 2) * 2 = <value_bitfield>)
		value = 1
	endif
	<value_bitfield> = (<value_bitfield> / 2)
	if (<value>)
		switch <gem_count>
			case 0
			formatText TextName = bitfield_text '%sg' s = <bitfield_text>
			case 1
			formatText TextName = bitfield_text '%sr' s = <bitfield_text>
			case 2
			formatText TextName = bitfield_text '%sy' s = <bitfield_text>
			case 3
			formatText TextName = bitfield_text '%sb' s = <bitfield_text>
			case 4
			formatText TextName = bitfield_text '%so' s = <bitfield_text>
			default
			formatText TextName = bitfield_text '%s1' s = <bitfield_text>
		endswitch
	else
		if (<gem_count> < 5)
			formatText TextName = bitfield_text '%s-' s = <bitfield_text>
		else
			formatText TextName = bitfield_text '%s0' s = <bitfield_text>
		endif
	endif
	if (<gem_count> = 4)
		formatText TextName = bitfield_text '%s open:' s = <bitfield_text>
	endif
	if (<gem_count> = 5)
		formatText TextName = bitfield_text '%s hammer:' s = <bitfield_text>
	endif
	if (<gem_count> = 6)
		formatText TextName = bitfield_text '%s ext_sus:' s = <bitfield_text>
	endif
	gem_count = (<gem_count> + 1)
	repeat <num_bits>
	return bitfield_text = <bitfield_text>
endscript

script calc_health_invincible_time 
	songfilemanager func = get_song_end_time song_name = <song>
	health_invincible_time = 0.0
	gamemode_gettype
	if (<Type> = career || <Type> = quickplay)
		getplayerinfo <Player> difficulty
		switch <difficulty>
			case beginner
			health_invincible_time = (<total_end_time> * $health_invincible_time_percentage_beginner / 100.0)
			case easy
			health_invincible_time = (<total_end_time> * $health_invincible_time_percentage_easy / 100.0)
			case medium
			health_invincible_time = (<total_end_time> * $health_invincible_time_percentage_medium / 100.0)
		endswitch
	endif
	setplayerinfo <Player> health_invincible_time = <health_invincible_time>
endscript

script gem_scroller \{Player = 1}
	check_song_for_zero_difficulty song = <song_name>
	setup_gemarrays song_name = <song_name> difficulty = <difficulty> Player = <Player>
	get_notetrack_part_text Player = <Player> song_name = <song_name>
	calc_health_invincible_time song = <song_name> Player = <Player>
	yield
	if playerinfoequals <Player> part = drum
		setplayerinfo <Player> check_time_early = ($drum_time_early * $current_speedfactor)
		setplayerinfo <Player> check_time_late = ($drum_time_late * $current_speedfactor)
	else
		setplayerinfo <Player> check_time_early = ($check_time_early * $current_speedfactor)
		setplayerinfo <Player> check_time_late = ($check_time_late * $current_speedfactor)
	endif
	formatText checksumName = input_array 'input_arrayp%p' p = <Player>
	InputArrayCreate Name = <input_array>
	yield
	<gem_offset> = ($time_gem_offset)
	<input_offset> = ($time_input_offset)
	get_lag_values
	audio_offset = (<audio_offset> * $current_speedfactor)
	<input_offset> = (<input_offset> - <audio_offset>)
	<gem_offset> = (<gem_offset> - <audio_offset>)
	<gem_offset> = (<gem_offset> - <video_offset>)
	Change time_drum_midi_offset_with_lag = ($time_drum_midi_offset + <audio_offset> + <video_offset>)
	Change time_gem_offset_with_lag = ($time_gem_offset - <audio_offset> - <video_offset>)
	if NOT musicstudio_mainobj :musicstudio_isinmusicstudio
		if ($game_mode != tutorial && $game_mode != practice && $calibrate_lag_enabled = 0)
			getfirstplayer \{on_screen
				out = first}
			if (<Player> = <first>)
				bandmanager_startallanimiterators song_name = <song_name> time_offset = <gem_offset>
				drummer_kill_spawnscripts
				SpawnScriptNow \{drummer_controlscript}
				crowd_kill_spawnscripts
				SpawnScriptNow \{crowd_control}
				SpawnScriptLater WatchForStartPlaying_iterator params = {time_offset = <gem_offset>}
				SpawnScriptLater tempo_matching_iterator params = {song_name = <song_name> difficulty = <difficulty> thin_fretbars
					time_offset = <gem_offset> skipleadin = 0 Player = <Player>}
			endif
		endif
	endif
	getplayerinfo <Player> scroll_time
	getplayerinfo <Player> check_time_early
	getplayerinfo <Player> bot_play
	getplayerinfo <Player> is_local_client
	getplayerinfo <Player> server_id
	easy_scroll_time = ($difficulty_list_props.easy.scroll_time)
	gamemode_gettype
	fill_input_offset = (((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0)
	CastToInteger \{fill_input_offset}
	formatText checksumName = input_array 'input_arrayp%p' p = <Player>
	if (($calibrate_lag_enabled = 0) || ($calibrate_highway_gameplay_state = settingstest))
		SpawnScriptLater gem_array_events params = {iterator_text = 'fill_array' song_name = <song_name> difficulty = <difficulty> input_array = <input_array>
			time_offset = <fill_input_offset> strum_function = fill_input_array skipleadin = (<easy_scroll_time> * 1000.0) Player = <Player>
			not_player_specific = true add_part_to_event_id = true use_expert_plus = 1}
	endif
	<do_bot> = 0
	if ((<bot_play> = 1) || (<is_local_client> = 0))
		<do_bot> = 1
	endif
	if NOT retailbuild
		if (<Type> != freeplay)
			<do_bot> = 1
		endif
	endif
	if (<do_bot> = 1)
		formatText checksumName = botresponse_array 'botresponse_arrayp%p' p = <Player>
		InputArrayCreate Name = <botresponse_array>
		<stagger_offset> = 34.0
		SpawnScriptLater gem_iterator params = {iterator_text = 'fill_botresponsearray' song_name = <song_name> difficulty = <difficulty> part = <part> input_array = <botresponse_array>
			time_offset = ((((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0) + <stagger_offset>) strum_function = fill_input_array skipleadin = (<scroll_time> * 1000.0)
			Player = <Player> use_expert_plus = 1}
		SpawnScriptLater gem_iterator params = {iterator_text = 'adjust_botresponsearray' song_name = <song_name> difficulty = <difficulty> part = <part> use_input_array = 'botresponse_array'
			time_offset = (<check_time_early> * 1000) strum_function = adjust_input_array_for_note_miss skipleadin = (<scroll_time> * 1000.0)
			Player = <Player>}
		SpawnScriptLater gem_iterator params = {iterator_text = 'bot' song_name = <song_name> difficulty = <difficulty> part = <part> use_input_array = 'botresponse_array'
			time_offset = (((<check_time_early> * 1000.0) + <input_offset> - ($check_time_late * 1000.0)) + <stagger_offset>) strum_function = check_buttons_bot skipleadin = (<scroll_time> * 1000.0)
			Player = <Player>}
		printf channel = log qs(0xda3b9ce1) s = <Player>
	endif
	yield
	setplayerinfo <Player> gem_offset = <gem_offset>
	setplayerinfo <Player> time_offset = (((<scroll_time> - $destroy_time) * 1000.0) + <gem_offset>)
	SpawnScriptLater gem_iterator params = {iterator_text = 'create_gem' song_name = <song_name> difficulty = <difficulty> part = <part> use_input_array = 'input_array'
		use_player_info_time_offset gem_function = create_gem skipleadin = (<scroll_time> * 1000.0)
		Player = <Player>}
	yield
	get_song_prefix song = <song_name>
	formatText checksumName = guitar_stream '%s_guitar' s = <song_prefix>
	if GotParam \{looping}
		getplayerinfo <Player> controller
		restartplayerserverinput {
			Player = <Player>
			controller = <controller>
			guitar_stream = <guitar_stream>
			time_offset = ((<check_time_early> * 1000.0) + <input_offset>)
			song_name = <song_name>
		}
		vocals_mute_all_mics \{mute = FALSE}
	else
		createplayerserver id = <server_id> Player = <Player>
		getplayerinfo <Player> controller
		yield
		addplayerserverinput {id = <server_id>
			Player = <Player>
			controller = <controller>
			guitar_stream = <guitar_stream>
			time_offset = ((<check_time_early> * 1000.0) + <input_offset>)
			song_name = <song_name>
		}
		yield
		addplayerserverhighway id = <server_id> Player = <Player> fill_input_offset = <fill_input_offset>
		yield
		if ($is_network_game)
			addnetworkplayeroutputs id = <server_id> Player = <Player> onscreen = 1
		endif
	endif
	yield
	if NOT playerinfoequals <Player> part = vocals
		if (($calibrate_lag_enabled = 0) || ($calibrate_highway_gameplay_state = settingstest))
			addplayerserverfretbariterator {fretbar_id = createfretbar id = <server_id> song_name = <song_name> difficulty = <difficulty> thin_fretbars
				use_player_info_time_offset fretbar_function = Create2DFretbar skipleadin = (<scroll_time> * 1000.0)
				Player = <Player>}
		endif
	endif
	SpawnScriptLater fretbar_update_tempo params = {song_name = <song_name> difficulty = <difficulty> part = <part>
		time_offset = ((<check_time_early> * 1000.0) + <gem_offset>) Player = <Player> skipleadin = (<scroll_time> * 1000.0)}
	SpawnScriptLater fretbar_update_hammer_on_tolerance params = {song_name = <song_name> difficulty = <difficulty> part = <part>
		time_offset = (((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0) Player = <Player> skipleadin = (<scroll_time> * 1000.0)}
	if (($calibrate_lag_enabled = 1) && ($calibrate_highway_gameplay_state != settingstest))
		return
	endif
	yield
	getplayerinfo <Player> is_onscreen
	getfirstplayer \{on_screen
		out = first}
	if (<Player> = <first>)
		addplayerserverfretbariterator {fretbar_id = prefretbarevent id = <server_id> song_name = <song_name> difficulty = <difficulty> Heap = quota_gameplay
			time_offset = (($prefretbar_time * 1000.0)) fretbar_function = GuitarEvent_PreFretbar skipleadin = 0 Player = <Player>}
		addplayerserverfretbariterator {fretbar_id = fretbarevent id = <server_id> song_name = <song_name> difficulty = <difficulty> Heap = quota_gameplay
			time_offset = <gem_offset> fretbar_function = GuitarEvent_Fretbar skipleadin = 0 Player = <Player>}
		if ($g_debug_audible_downbeat = 1)
			addplayerserverfretbariterator {fretbar_id = fretbareventearly id = <server_id> song_name = <song_name> difficulty = <difficulty> Heap = quota_gameplay
				time_offset = (<gem_offset> + ($check_time_early * 1000.0)) fretbar_function = GuitarEvent_Fretbar_Early skipleadin = 0 Player = <Player>}
			addplayerserverfretbariterator {fretbar_id = fretbareventlate id = <server_id> song_name = <song_name> difficulty = <difficulty> Heap = quota_gameplay
				time_offset = (<gem_offset> - ($check_time_late * 1000.0)) fretbar_function = GuitarEvent_Fretbar_Late skipleadin = 0 Player = <Player>}
		endif
		if ($calibrate_lag_enabled = 0)
			ExtendCrc <song_name> '_scriptevents' out = script_events
			if songglobalexists Name = <script_events> Type = array
				uses_new_performance = true
			else
				uses_new_performance = FALSE
			endif
			if NOT GotParam \{looping}
				if (<song_name> = jamsession)
					SpawnScriptLater autocut_cameracuts_iterator params = {song_name = <song_name> time_offset = <gem_offset> skipleadin = 0}
				else
					SpawnScriptLater cameracuts_iterator params = {song_name = <song_name> time_offset = <gem_offset> skipleadin = 0}
				endif
			endif
			if (<Type> != practice)
				SpawnScriptLater scriptevents_iterator params = {song_name = <song_name> time_offset = <gem_offset> skipleadin = 0}
			endif
			yield
			GetArraySize \{$scripts_array}
			array_count = 0
			begin
			event_string = ($scripts_array [<array_count>].Name)
			if (<event_string> = 'performance' && <uses_new_performance> = true)
			else
				<lead_ms> = ($scripts_array [<array_count>].lead_ms)
				SpawnScriptLater event_iterator params = {song_name = <song_name> difficulty = <difficulty>
					event_string = ($scripts_array [<array_count>].Name) time_offset = (<gem_offset> + <lead_ms>) skipleadin = 0 Player = <Player>}
				SpawnScriptLater notemap_startiterator params = {song_name = <song_name> difficulty = <difficulty>
					event_string = ($scripts_array [<array_count>].Name) time_offset = (<gem_offset> + <lead_ms>) skipleadin = 0 Player = <Player>}
			endif
			array_count = (<array_count> + 1)
			repeat <array_Size>
			yield
			SpawnScriptLater notemap_startiterator params = {song_name = <song_name> difficulty = <difficulty>
				event_string = 'drums' time_offset = (<gem_offset> + $time_drum_midi_offset_with_lag) skipleadin = 0 Player = <Player>}
			if GotParam \{looping}
				return
			endif
			if ($debug_use_autocut_array = true)
				build_autocut_camera_array
			endif
			yield
			SpawnScriptNow lightshow_iterator params = {song_name = <song_name> time_offset = (<gem_offset> + $lightshow_offset_ms) skipleadin = 0}
			if NOT ($debug_forcescore = OFF)
				CrowdIncrease \{Player = 1}
			endif
		endif
	endif
	yield
	if (<Type> != practice)
		SpawnScriptLater win_song params = {<...>}
	endif
endscript
failed_song = 0

script win_song 
	if quest_progression_is_chapter_finale
		final_battle_win_song <...>
		return
	endif
	Change \{failed_song = 0}
	getfirstplayer \{out = first_player}
	if (<Player> = <first_player>)
		Change \{num_players_finished = 0}
	endif
	gamemode_gettype
	career = FALSE
	if (<Type> = career)
		career = true
	endif
	songfilemanager func = get_song_end_time song_name = <song_name> career = <career>
	printf qs(0x037498f0) s = <total_end_time>
	TimeMarkerReached_SetParams time_offset = 0 time = <total_end_time>
	begin
	if TimeMarkerReached
		break
	endif
	Wait \{1
		gameframe}
	repeat
	getnumplayersingame
	if (<num_players> = 2)
		wait_on_player = 2
	else
		wait_on_player = 1
	endif
	if quest_progression_is_chapter_rush
		Wait \{$rush_set_song_win_delay
			Seconds}
	else
		printf \{qs(0x2736fd96)
			s = $Song_Win_Delay}
		Wait \{$Song_Win_Delay
			Seconds}
	endif
	Change num_players_finished = ($num_players_finished + 1)
	printf qs(0xa4b6cd96) i = ($num_players_finished) f = <num_players>
	getnumplayersingame \{on_screen}
	if quest_progression_is_chapter_rush
		wait_for_fade
	endif
	if ($num_players_finished >= <num_players_shown>)
		if ($is_network_game)
			SpawnScriptNow \{online_end_song}
		else
			<event> = song_won
			printf \{qs(0xaf979d44)}
			extendcrcplayer <event> <Player> out = Type
			broadcastevent Type = <Type>
		endif
	endif
endscript
load_songqpak_lock = 0
last_song = None

script load_songqpak \{async = 0
		resetzone = 0
		song_name = !q1768515945}
	printscriptinfo \{'load_songqpak - START'}
	printf \{'load_songqpak - START'}
	printstruct <...>
	printf '$current_song_qpak = %d' d = ($current_song_qpak)
	printf '$current_song_qpak_performance = %d' d = ($current_song_qpak_performance)
	if (<song_name> = None)
		song_name = $last_song
	else
		Change last_song = <song_name>
	endif
	if NOT load_song_from_sd song_name = <song_name>
		printscriptinfo \{'load_song_from_SD failed!'}
		printstruct <...>
		return FALSE error_text = <error_text>
	endif
	begin
	if ($load_songqpak_lock = 0)
		break
	endif
	printf 'waiting for load_songqpak lock %a' a = <song_name>
	ScriptAssert \{'Already in load_songqpak! This is bad'}
	Wait \{1
		gameframe}
	repeat
	Change \{load_songqpak_lock = 1}
	get_song_performance song = <song_name>
	yield
	if NOT (<song_name> = $current_song_qpak &&
			<song_performance> = $current_song_qpak_performance)
		if (<resetzone> = 1)
			Transitions_ResetZone \{Profile = $profile_ven_camera_obj}
			if (<async> = 1)
				Wait \{1
					gameframe}
			endif
		endif
		if (<song_name> = jamsession)
			unload_songqpak
		else
			yield
			jamsession_unload \{song_prefix = 'jamsession'}
			yield
			if (<song_performance> = 0)
				song_perf_ext = ''
			else
				formatText TextName = song_perf_ext '_perf%i' i = (<song_performance> + 1)
			endif
			get_song_prefix song = <song_name>
			is_song_downloaded song_checksum = <song_name>
			if (<download> = 1)
				formatText TextName = songqpak ($dlc_songpak_spec) i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			else
				playlist_getcurrentsongversion
				formatText TextName = songqpak 'songs/%i%s.pak' i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			endif
			EnableDuplicateSymbolWarning \{OFF}
			if NOT load_song_pak songqpak = <songqpak> async = <async> song_name = <song_name> song_prefix = <song_prefix>
				Change \{load_songqpak_lock = 0}
				return FALSE error_text = <error_text>
			endif
			EnableDuplicateSymbolWarning
			load_song_anims song_name = <song_name>
		endif
		Change current_song_qpak = <song_name>
		Change current_song_qpak_performance = <song_performance>
		yield
		if GotParam \{song_prefix}
			formatText checksumName = song_setup '%s_setup' s = <song_prefix>
			EnableDuplicateSymbolWarning \{OFF}
			if ScriptExists <song_setup>
				SpawnScriptNow <song_setup>
			endif
			EnableDuplicateSymbolWarning
		endif
	endif
	printf \{'load_songqpak - DONE!'}
	Change \{load_songqpak_lock = 0}
	return \{true}
endscript

script unload_songqpak 
	if NOT ($current_song_qpak = None)
		if ($current_song_qpak = jamsession)
			jamsession_unload \{song_prefix = 'jamsession'}
		else
			if ($current_song_qpak_performance = 0)
				song_perf_ext = ''
			else
				formatText TextName = song_perf_ext '_perf%i' i = ($current_song_qpak_performance + 1)
			endif
			get_song_prefix song = ($current_song_qpak)
			unload_song_anims
			is_song_downloaded song_checksum = ($current_song_qpak)
			if (<download> = 1)
				formatText TextName = songqpak ($dlc_songpak_spec) i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
				downloads_unloadlanguagecontent
			else
				formatText TextName = songqpak 'songs/%i%s.pak' i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
			endif
			printf channel = loading qs(0x055f66fb) i = <songqpak>
			unload_song_pak songqpak = <songqpak>
		endif
		Change \{current_song_qpak = None}
		Change \{current_song_qpak_performance = 0}
	endif
endscript

script unpause_loading_scripts 
	unpausespawnedscript \{crowd_loading_surge}
	unpausespawnedscript \{audio_crowd_play_loading_screen_swell}
	unpausespawnedscript \{audio_crowd_loading_whistle}
endscript
playing_song = 0
playing_song_for_real = 0
hack_unrandom_song_index = 0

script get_random_song \{filter_songs_script = 0x00000000}
	get_savegame_from_controller controller = ($primary_controller)
	if ($random_songs_on_disc_only = 1)
		getsonglistsize \{on_disc_only = true}
	else
		getsonglistsize
	endif
	if ($smoketestisrunning = true)
		old_unrandom_song_index = ($hack_unrandom_song_index)
		Change hack_unrandom_song_index = (($hack_unrandom_song_index) + 1)
		if (($hack_unrandom_song_index) = <array_Size>)
			Change \{hack_unrandom_song_index = 0}
		endif
		if (($hack_unrandom_song_index) = 1)
			Change \{hack_unrandom_song_index = 2}
		endif
		getsonglistchecksum index = <old_unrandom_song_index>
		return song = <song_checksum>
	endif
	printf 'get_random_song: songlist size %d' d = <array_Size>
	if (<array_Size> <= 0)
		ScriptAssert \{'get_random_song: Unexpected songlist size 0'}
	endif
	<iterations> = 0
	begin
	GetRandomValue Name = index integer a = 0 b = (<array_Size> -1)
	use_song = true
	getsonglistchecksum index = <index>
	accept_song = true
	if GotParam \{reject_song}
		if (<reject_song> = <song_checksum>)
			accept_song = FALSE
		endif
	endif
	if (<filter_songs_script> != 0x00000000)
		if NOT <filter_songs_script> song = <song_checksum>
			accept_song = FALSE
		endif
	endif
	if (<accept_song> = true)
		if IsSongAvailable song = <song_checksum> savegame = <savegame>
			if is_song_downloaded song_checksum = <song_checksum>
				break
			endif
		endif
	endif
	<iterations> = (<iterations> + 1)
	if (<iterations> > 1000)
		if (<filter_songs_script> != 0x00000000)
			<filter_songs_script> song = 0x00000000 panic = 1
		endif
		<iterations> = 0
	endif
	repeat
	printf 'get_random_song: picked %s' s = <song_checksum>
	return song = <song_checksum>
endscript

script wait_for_start_gem_scroller_completion 
	printscriptinfo \{'wait_for_start_gem_scroller_completion'}
	begin
	if ($start_gem_scroller_running = 0)
		break
	elseif ($songtime_paused = 1)
		Change \{songtime_paused = 0}
	endif
	Wait \{1
		gameframe}
	repeat
endscript

script start_gem_scroller \{starttime = 0
		practice_intro = 0
		endtime = 99999999
		loading_transition = 0
		restarting = 0}
	GetTrueStartTime \{out = load_starttime}
	resetyieldinfo \{yield = FALSE}
	yield
	if ($game_mode = freeplay)
		reset_song_time \{starttime = -100000}
	endif
	if quest_progression_is_chapter_rush
		reset_song_time \{starttime = -100000}
	endif
	if quest_progression_is_chapter_finale
		reset_song_time \{starttime = -100000}
	endif
	Change \{start_gem_scroller_running = 1}
	OnExitRun \{start_gem_scroller_exit}
	if GotParam \{song_name}
		printscriptinfo \{qs(0x00000000)}
		dump
		ScriptAssert \{qs(0x1f7beb4e)}
	endif
	gamemode_gettype
	playlist_getcurrentsong
	song = <current_song>
	getfirstplayer \{local}
	wii_timer_start \{label = 'start_gem_scroller'}
	determine_if_moments_should_play
	yield
	GetPakManCurrent \{map = zones}
	if GotParam \{pak}
		if NOT StructureContains \{structure = $LevelZones
				$current_level}
			ScriptAssert \{'No level named %s, check LevelZones in venuelist.q for available levels'
				s = $current_level}
		endif
		if NOT (<pak> = (($LevelZones.$current_level).zone))
			SetViewportProperties \{viewport = bg_viewport
				Active = FALSE}
			wait_for_deferred_rendering
			crowd_system_deinit
			wait_for_deferred_rendering
			venue_system_init \{block_scripts = 1}
			wait_for_deferred_rendering
			crowd_system_init
			wait_for_deferred_rendering
			SetViewportProperties \{viewport = bg_viewport
				Active = true}
			set_game_system_status \{system = Crowd
				state = On}
			set_game_system_status \{system = venue
				state = On}
		endif
	endif
	yield
	if NOT musicstudio_mainobj :musicstudio_isinmusicstudio
		guitar_support_init_audio {
			loading_transition = <loading_transition>
			restarting = <restarting>
		}
	else
		printf \{chanel = sfx
			qs(0xada742c0)}
		AppendSuffixToChecksum Base = ($SFX_Background_Current_Checksum) SuffixString = '_BK'
		backchecksumname = <appended_id>
		stopsound <backchecksumname> time = 0.5
		printf \{chanel = sfx
			qs(0x801b851e)}
		Change \{g_crowd_in_jam_mode_song_state = 1}
		printf \{chanel = sfx
			qs(0x359bd552)}
		One_Shot_SoundEvent \{SoundEvent = DoNothing_OneShot
			waitTime = 5
			immediate = 1}
	endif
	Change \{g_star_power_verb_is_on = 0}
	<note_input> = $disable_note_input
	Change \{disable_note_input = 1}
	Change last_start_pressed_device = ($primary_controller)
	unpause_loading_scripts
	reset_pause_history
	if (<Type> = quickplay)
		SpawnScriptNow request_friend_stats params = {song = <song>}
	endif
	if (($current_transition) = ENCORE || ($current_transition) = celebintro)
		GetPakManCurrentName \{map = zones}
		if ($current_transition = ENCORE)
			formatText checksumName = event '%s_encore_Setup' s = <pakname>
		else
			formatText checksumName = event '%s_celebintro_Setup' s = <pakname>
		endif
		if ScriptExists <event>
			<event>
		endif
	endif
	guitar_support_init_players <...>
	if NOT musicstudio_mainobj :musicstudio_isinmusicstudio
		if (<song> = jamsession)
			guitar_support_load_anims \{state = play_jam}
		else
			guitar_support_load_anims \{state = ingame}
		endif
	endif
	if ($current_playing_transition != rushoutro)
		Unhide_Band
	endif
	if ($end_credits = 2)
		Change \{end_credits = 0}
	endif
	guitar_support_init_venue loading_transition = <loading_transition>
	yield
	begin
	if guitar_support_load_song {
			song = <song>
			song_start_time = <starttime>
		}
		break
	endif
	SpawnScriptNow song_load_failed params = {error_text = <error_text>}
	playlist_clear
	freeplay_next_song \{initial_song_list = true}
	playlist_getcurrentsong
	<song> = <current_song>
	repeat 2
	get_song_section_array Player = <Player>
	Change current_section_array = <song_section_array>
	Change \{current_section_array_entry = 0}
	if (<loading_transition> = 0)
		Change \{playing_song = 1}
	endif
	if NOT musicstudio_mainobj :musicstudio_isinmusicstudio
		guitar_support_init_band loading_transition = <loading_transition> async = 1
	endif
	bandmanager_invisiblecharacterscheat
	bandmanager_airguitarcheat
	if GlobalExists \{Name = cheat_soundcheckmode}
		options_cheats_set_soundcheck value = ($cheat_soundcheckmode)
	endif
	pushunsafeforshutdown \{context = gameplay
		Type = unchecked}
	yield
	audio_ui_menu_music_off
	wii_prepare_anim_structs song = <current_song>
	if ScriptExists \{audio_crowd_play_swells_during_stats_screen}
		KillSpawnedScript \{Name = audio_crowd_play_swells_during_stats_screen}
	endif
	if IsSoundEventPlaying \{surge_during_stats_screen}
		StopSoundEvent \{surge_during_stats_screen
			fade_time = 1.5
			fade_type = linear}
	endif
	yield
	gamemode_gettype
	if (<Type> = tutorial)
		songfilemanager func = get_song_end_time song_name = <song>
		<endtime> = <total_end_time>
	endif
	Change current_starttime = <starttime>
	Change current_endtime = <endtime>
	Change \{showing_raise_axe = 0}
	yield
	call_startup_scripts <...> song_name = <song>
	yield
	KillSpawnedScript \{Name = switch_to_no_band_camera}
	stop_cameracut
	guitar_support_load_hud <...>
	starttimeafterintro = <starttime>
	if ($current_transition = None)
		if GetNodeFlag \{LS_ENCORE_POST}
			Change \{current_transition = restartencore}
		else
			Change \{current_transition = fastintro}
		endif
	endif
	get_lag_values
	<transition_lag_offset> = (0 - <video_offset> - <audio_offset>)
	yield
	Transition_GetTime Type = ($current_transition)
	starttime = (<starttime> - <transition_time> - <transition_lag_offset>)
	if ($finalbandintro_transition_playing = 1)
		Transition_GetTime \{Type = finalbandintro}
		starttime = (<starttime> - <transition_time>)
	endif
	if (<loading_transition> = 0)
		yield
		setslomo \{0.001}
		reset_song_time starttime = <starttime>
	endif
	yield
	if NOT ($use_character_debug_cam = 1)
	endif
	yield
	select_visualizer_bank
	select_initial_scene_swap restarting = <restarting>
	if ($game_mode = practice)
		practicemode_init
	endif
	yield \{'SongAudioLoad'}
	GetGlobalTags \{user_options}
	yield
	GetArraySize \{$currently_holding
		param = holding_size}
	holding_count = 0
	begin
	SetArrayElement ArrayName = currently_holding globalarray index = <holding_count> NewValue = 0
	holding_count = (<holding_count> + 1)
	repeat <holding_size>
	yield
	launch_fill_array_iterator song = <song>
	yield
	yield
	if (<loading_transition> = 1)
		popunsafeforshutdown \{context = gameplay
			Type = unchecked}
		ui_event_get_top
		if ((<base_name> = 'song_breakdown') || (<base_name> = 'song_breakdown_competitive'))
			if ($autolaunch_startnow = 1)
				gamemode_gettype
				if (<Type> = quickplay)
					ui_song_breakdown_continue_to_next_screen_song_transition device_num = ($primary_controller)
				else
					song_breakdown_add_handlers_for_song_transition
				endif
			else
				song_breakdown_add_handlers_for_song_transition
			endif
		elseif (<base_name> = 'quest_transformation_info')
			ui_quest_transformation_add_handlers
		elseif (<base_name> = 'quest_breakdown')
			if quest_progression_is_chapter_rush
				Transition_Wait
			elseif quest_progression_is_chapter_finale
				Transition_Wait
			endif
			ui_quest_breakdown_add_handlers
		endif
		begin
		if (($songtime_paused) = 0)
			break
		endif
		Wait \{5
			gameframes}
		repeat
		ui_event_wait_for_safe
	endif
	create_highways_and_hud = true
	if ScreenElementExists \{id = hud_root}
		create_highways_and_hud = FALSE
	endif
	if (<create_highways_and_hud> = true)
		create_highway_root_window
		yield
		setup_band_hud
		yield \{'setup_band_hud'}
	elseif ($game_mode = freeplay)
		freeplay_destroy_stats_ui
	endif
	getnumplayersingame
	if (<num_players> > 0)
		getfirstplayer
		begin
		if (<Player> = -1)
			break
		endif
		getplayerinfo <Player> difficulty
		yield
		getplayerinfo <Player> is_onscreen out = player_on_screen
		GetGlobalTags \{user_options}
		getplayerinfo <Player> part
		if (<player_on_screen>)
			if (<create_highways_and_hud> = true)
				if (<part> != vocals)
					<skip_highway_move> = FALSE
					<highway_alpha_in> = 0
					if (<Type> = freeplay)
						<skip_highway_move> = true
					endif
					if song_has_delayed_intro song = <song>
						alpha_in = 1
					elseif song_alpha_in_highway song = <song>
						alpha_in = 1
					endif
					gamemode_gettype
					if (<Type> != career)
						alpha_in = 0
					endif
					setup_highway <...> skip_highway_move = <skip_highway_move> alpha_in = <alpha_in>
				else
					SetArrayElement globalarray ArrayName = highway_pos_table index = (<Player> -1) NewValue = ($highway_guitar1)
				endif
			else
				if (<part> != vocals)
					setup_player_instrument_icon Player = <Player>
				endif
			endif
		endif
		yield \{'setup_highway'}
		yield
		if (<player_on_screen> = 1)
			gem_scroller <...> song_name = <song>
		else
			setplayerinfo <Player> current_song_name = <song>
			getplayerinfo <Player> server_id
			createplayerserver id = <server_id> Player = <Player>
			addnetworkplayeroutputs id = <server_id> Player = <Player> onscreen = 0
			if NOT checksumequals a = <Type> b = competitive
				add_player_to_competitive_scoreboard Player = <Player>
			endif
		endif
		yield \{'ss gem_scroller'}
		if playerinfoequals <Player> is_local_client = 1
			SpawnScriptLater check_for_star_power params = {<...>}
		endif
		yield
		if playerinfoequals <Player> is_local_client = 1
			calc_songscoreinfo Player = <Player>
		endif
		if (<player_on_screen> = 1)
			if (<part> != vocals)
				difficultychanged Player = <Player>
			endif
		endif
		yield
		if NOT GotParam \{no_score_update}
			SpawnScriptNow update_score_fast params = {Player = <Player> player_on_screen = <player_on_screen>}
		endif
		if (<Type> = freeplay)
			get_highway_hud_menu_parent Player = <Player>
			if ScreenElementExists id = <menu_parent>
				<menu_parent> :Obj_KillSpawnedScript Name = freeplay_dropout_player_if_inactive
				<menu_parent> :obj_spawnscript freeplay_dropout_player_if_inactive params = {Player = <Player>}
				<menu_parent> :Obj_KillSpawnedScript Name = freeplay_controller_pulling_observer
				<menu_parent> :obj_spawnscript freeplay_controller_pulling_observer params = {Player = <Player>}
			endif
		endif
		if (<song> = jamsession)
			SpawnScriptNow jam_input_whammy_spawned id = jam_input_spawns params = {Player = <Player>}
		endif
		getnextplayer Player = <Player>
		repeat <num_players>
	endif
	yield
	getnumplayersingame \{out = backup_vocals_num_players}
	if ($g_backup_vocals_enabled = 1 && <backup_vocals_num_players> <= 3)
		getfirstplayer \{out = backup_vocals_first_player}
		getplayerinfo <backup_vocals_first_player> server_id
		addbackupvocalshighway id = <server_id>
	endif
	GetPakManCurrent \{map = zones}
	yield
	if (<loading_transition> = 0)
		if ($game_mode != tutorial)
			if NOT ($game_mode = practice)
				apply_band_logo_to_venue \{step = apply}
			endif
		endif
	endif
	yield
	audio_effects_set_guitar_verb_and_echo_to_dry
	Wait \{4
		gameframes}
	if (<song> = jamsession)
		SpawnScriptNow \{audio_crowd_jam_ghtunes_adjust_crowd_from_track_levels}
		begin_jam_song
	else
		SpawnScriptNow \{audio_gameplay_check_song_rms}
	endif
	GetTrueElapsedTime starttime = <load_starttime>
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf qs(0xcc997fdd) d = <ElapsedTime>
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	finalprintf \{qs(0xf60b1665)}
	if (<loading_transition> = 1)
		if ($shutdown_game_for_signin_change_flag = 1)
			if (<base_name> = 'quest_breakdown' || <base_name> = 'voting' || <base_name> = 'song_breakdown' || <base_name> = 'song_breakdown_competitive' || <base_name> = 'quest_transformation_info')
				Change \{current_transition = None}
				KillSpawnedScript \{Name = start_gem_scroller}
			endif
		endif
		Change \{playing_song = 1}
		yield \{'Transition_Wait'}
		StopRendering
		setslomo \{0.001}
		Transition_GetTime Type = ($current_transition)
		songtime = (0 - <transition_time> - <transition_lag_offset> - <transition_lag_offset>)
		reset_song_time starttime = <songtime>
	endif
	songaudiosetupdsp
	yield
	if ($output_gpu_log = 1)
		Change \{gpu_log_start_logging = 1}
	endif
	if ($is_network_game)
		if (<loading_transition> = 0)
			unpausespawnedscript \{ui_event_block}
			ui_event_wait_for_safe
			generic_net_sync \{callback = start_first_net_song}
		endif
	endif
	yield
	gamemode_gettype
	if (<Type> = competitive)
		if (($competitive_rules = faceoff) || ($competitive_rules = team_faceoff) || ($competitive_rules = elimination) || ($competitive_rules = team_elimination) || ($competitive_rules = roadie_battle))
			setscorescaling
		endif
	endif
	printf qs(0x9e16a5e5) s = ($current_transition)
	if ($current_transition = None)
		stars
		stars
		printf \{qs(0x6e7dff86)}
		stars
		stars
		Change \{current_transition = fastintro}
	endif
	Transition_Play Type = ($current_transition)
	Change \{current_transition = None}
	yield \{'Transition_Play'}
	Change \{check_for_unplugged_controllers = 1}
	yield
	Wait \{1
		gameframe}
	yield \{'wait 1 gameframe'}
	if (<loading_transition> = 0)
		StopRendering
		yield \{'StopRendering'}
		destroy_loading_screen
		yield
	else
		destroy_loading_screen
		yield
	endif
	if (<song> != jamsession)
		gameevent_songbegin
	endif
	if NOT ($in_sing_a_long = true)
		if ($calibrate_lag_enabled = 0)
			KillSpawnedScript \{Name = init_achievements}
			SpawnScriptLater \{init_achievements}
		endif
	endif
	setslomo \{$current_speedfactor}
	yield
	if NOT ($calibrate_lag_enabled = 1)
		SpawnScriptNow begin_song_after_intro params = {starttimeafterintro = <starttimeafterintro>}
	endif
	getnumplayersingame
	if (<num_players> > 0)
		getfirstplayer
		begin
		init_star_power_debug Player = <Player>
		getnextplayer Player = <Player>
		repeat <num_players>
	endif
	yield
	if ($finalbandintro_transition_playing = 1)
		SpawnScriptLater \{wait_and_play_finalbandintro_transition}
	endif
	yield
	popunsafeforshutdown \{context = gameplay
		Type = unchecked}
	Change disable_note_input = <note_input>
	quest_progression_demigod_hide_rest_of_band
	if ($game_mode = practice)
		practice_mode_setup_sounds
	endif
	if ($game_mode = freeplay)
		if (<create_highways_and_hud> = FALSE)
			set_active_highway_props \{alpha = 1
				time = 0.66}
		endif
	endif
	SpawnScriptNow \{game_fader}
	Change \{pause_grace_period = -1.0}
endscript

script start_gem_scroller_exit 
	hide_glitch \{num_frames = 15}
	wii_timer_stop \{label = 'start_gem_scroller'}
	Change \{start_gem_scroller_running = 0}
endscript

script game_fader 
	Wait \{10
		gameframes}
	fadetoblack \{OFF
		time = 0.0
		no_wait}
	if ($game_mode = freeplay)
		destroy_loading_screen
	endif
endscript

script launch_fill_array_iterator \{offset = 0}
	<gem_offset> = ($time_gem_offset - <offset>)
	get_lag_values
	<gem_offset> = (<gem_offset> - <audio_offset>)
	<gem_offset> = (<gem_offset> - <video_offset>)
	part_idx = 0
	parts_list = [guitar bass drum]
	begin
	get_notetrack_part_text part = (<parts_list> [<part_idx>])
	easy_scroll_time = ($difficulty_list_props.easy.scroll_time)
	fill_input_offset = (((<easy_scroll_time> - $destroy_time) * 1000.0) + <gem_offset> + 1000.0)
	SpawnScriptLater gem_iterator params = {iterator_text = 'fill_array' song_name = <song> part = <part> part_crc = (<parts_list> [<part_idx>])
		time_offset = <fill_input_offset> strum_function = fill_input_array skipleadin = (<easy_scroll_time> * 1000.0) not_player_specific = true add_part_to_event_id = true use_expert_plus = 1}
	part_idx = (<part_idx> + 1)
	repeat 3
endscript

script wait_and_play_finalbandintro_transition 
	Transition_Wait
	Transition_Play \{Type = finalbandintro}
endscript

script begin_song_after_intro 
	begin
	GetSongTimeMs
	if (<time> >= <starttimeafterintro>)
		break
	endif
	Wait \{1
		gameframe}
	repeat
	gman_sendcallbacktoallgoals \{suffix = 'song_started'}
	songaudioplay
	Change \{playing_song_for_real = 1}
endscript

script kill_gem_scroller \{no_render = 0
		Type = Normal
		stop_song = 1
		destroy_band = 1
		still_in_training = 0
		Heap = quota_sprites}
	Change \{playing_song_for_real = 0}
	stop_rewind_sound_fx
	if (<Type> = Normal)
		pushunsafeforshutdown \{context = gameplay
			Type = unchecked}
		if ($is_network_game = 1)
			kill_intro_celeb_ui
		endif
		printf \{qs(0x60e6d670)}
		if NOT GotParam \{restarting}
			StopRendering
		endif
		disable_highway_prepass
		printf \{qs(0x1395270d)}
		printf \{qs(0x9c9eabc0)}
	endif
	Change \{lightshow_allow_mood_changes = true}
	Change \{lightshow_last_mood_requested = None}
	Change \{g_crowd_in_jam_mode_song_state = 0}
	changeglobalinteger \{global_name = g_crowd_allow_transition
		new_value = 1}
	Change last_start_pressed_device = ($primary_controller)
	if NOT (<Type> = restart)
		LaunchGemEvent \{event = kill_objects}
		destroyplayerserver \{id = all}
		if (<stop_song> = 1)
			Change \{songaudio_waitingfordeinit = 1}
			songaudiodeinit \{callback = songaudio_deinitdone}
		endif
		Kill_StarPower_Camera \{changecamera = 0}
		setplayerinfo \{1
			star_power_amount = 0.0}
		setplayerinfo \{2
			star_power_amount = 0.0}
		setplayerinfo \{3
			star_power_amount = 0.0}
		setplayerinfo \{4
			star_power_amount = 0.0}
		Kill_StarPower_StageFX \{Player = 1
			ifEmpty = 0}
		Kill_StarPower_StageFX \{Player = 2
			ifEmpty = 0}
		Kill_StarPower_StageFX \{Player = 3
			ifEmpty = 0}
		Kill_StarPower_StageFX \{Player = 4
			ifEmpty = 0}
		Change \{showing_raise_axe = 0}
		if ($game_mode = practice)
			practicemode_deinit
		endif
		notemap_deinit
		KillSpawnedScript \{Name = Do_StarPower_TeslaFX}
		KillSpawnedScript \{Name = Create_StarPower_TeslaFX}
	endif
	if NOT (<Type> = outro)
		if ScreenElementExists \{id = starpower_container_leftp1}
			legacydoscreenelementmorph \{id = starpower_container_leftp1
				alpha = 0}
		endif
		if ScreenElementExists \{id = starpower_container_leftp2}
			legacydoscreenelementmorph \{id = starpower_container_leftp2
				alpha = 0}
		endif
		if ScreenElementExists \{id = starpower_container_rightp1}
			legacydoscreenelementmorph \{id = starpower_container_rightp1
				alpha = 0}
		endif
		if ScreenElementExists \{id = starpower_container_rightp2}
			legacydoscreenelementmorph \{id = starpower_container_rightp2
				alpha = 0}
		endif
		kill_debug_elements
		gameevent_venueexit
		guitarevent_venueexit
		destroy_credits_menu
		deinit_star_power_debug
		KillSpawnedScript \{Name = star_power_activate_and_drain}
		KillSpawnedScript \{Name = highway_pulse_multiplier_loss}
		stop_custom_song
		KillSpawnedScript \{Name = guitar_jam_drum_playback}
		KillSpawnedScript \{Name = jam_input_whammy_spawned}
		jam_stop_all_samples
		jam_deinit_reverb
	endif
	got_param_restarting = FALSE
	if GotParam \{restarting}
		got_param_restarting = true
	endif
	getmaxlocalplayers
	Player = 1
	begin
	if NOT (<Type> = outro)
		setplayerinfo <Player> star_power_used = 0
		setplayerinfo <Player> whammy_on = 0
	endif
	if NOT (<Type> = outro)
		if ($game_mode != freeplay || (<Type> = Normal && <got_param_restarting> = FALSE))
			destroy_highway <...>
		endif
	endif
	if NOT (<Type> = restart)
		if ($game_mode != freeplay)
			vocals_destroy_highway Player = <Player>
			if NOT (ScriptExists GuitarEvent_SongWon_Spawned)
				GuitarEvent_KillSong <...> loading_transition = 1
			endif
		endif
	endif
	getplayerinfo <Player> bot_play
	if (1 = <bot_play>)
		revertbotcontroller Player = <Player>
	endif
	Player = (<Player> + 1)
	repeat <max_players>
	if ($g_backup_vocals_enabled = 1)
		backup_vocals_destroy_highway
	endif
	if NOT (<Type> = restart)
		kill_startup_script <...>
		audio_gameplay_kill_check_rms
		SpawnScriptNow \{audio_change_celeb_globals_to_zero}
		drummer_kill_spawnscripts
		vocalist_reset_globals
		autolook_kill_spawnscripts
		crowd_kill_spawnscripts
		KillSpawnedScript \{Name = GuitarEvent_MissedNote}
		KillSpawnedScript \{Name = GuitarEvent_UnnecessaryNote}
		KillSpawnedScript \{Name = GuitarEvent_HitNotes}
		KillSpawnedScript \{Name = GuitarEvent_HitNote}
		KillSpawnedScript \{Name = GuitarEvent_StarPowerOn}
		KillSpawnedScript \{Name = GuitarEvent_StarPowerOff}
		KillSpawnedScript \{Name = GuitarEvent_StarHitNote}
		KillSpawnedScript \{Name = GuitarEvent_StarSequenceBonus}
		KillSpawnedScript \{Name = GuitarEvent_StarMissNote}
		KillSpawnedScript \{Name = create_revival_highway_glow}
		KillSpawnedScript \{Name = create_revival_vocal_highway_glow}
		KillSpawnedScript \{Name = GuitarEvent_WhammyOn}
		KillSpawnedScript \{Name = GuitarEvent_WhammyOff}
		KillSpawnedScript \{Name = GuitarEvent_StarWhammyOn}
		KillSpawnedScript \{Name = GuitarEvent_StarWhammyOff}
		KillSpawnedScript \{Name = GuitarEvent_Note_Window_Open}
		KillSpawnedScript \{Name = GuitarEvent_Note_Window_Close}
		KillSpawnedScript \{Name = GuitarEvent_crowd_poor_medium}
		KillSpawnedScript \{Name = GuitarEvent_crowd_medium_good}
		KillSpawnedScript \{Name = GuitarEvent_crowd_medium_poor}
		KillSpawnedScript \{Name = GuitarEvent_crowd_good_medium}
		KillSpawnedScript \{Name = GuitarEvent_CreateFirstGem}
		KillSpawnedScript \{Name = star_power_activate_and_drain}
		KillSpawnedScript \{Name = highway_pulse_black}
		KillSpawnedScript \{Name = GuitarEvent_HitNote_Spawned}
		KillSpawnedScript \{Name = hit_note_fx}
		KillSpawnedScript \{Name = Do_StarPower_StageFX}
		KillSpawnedScript \{Name = Do_StarPower_Camera}
		KillSpawnedScript \{Name = first_gem_fx}
		KillSpawnedScript \{Name = gem_iterator}
		KillSpawnedScript \{Name = gem_array_stepper}
		KillSpawnedScript \{Name = gem_array_events}
		KillSpawnedScript \{Name = gem_step}
		KillSpawnedScript \{Name = gem_step_end}
		KillSpawnedScript \{Name = WatchForStartPlaying_iterator}
		KillSpawnedScript \{Name = tempo_matching_iterator}
		KillSpawnedScript \{Name = momentcamera_playanim_spawned}
		KillSpawnedScript \{Name = handle_embedded_clip_commands}
		clearmeasurecallbacks
		clearbeatcallbacks
		KillSpawnedScript \{Name = gem_scroller}
		KillSpawnedScript \{Name = button_checker}
		KillSpawnedScript \{Name = check_buttons}
		KillSpawnedScript \{Name = fretbar_update_tempo}
		KillSpawnedScript \{Name = fretbar_update_hammer_on_tolerance}
		KillSpawnedScript \{Name = move_whammy}
		KillSpawnedScript \{Name = move_highway_2d}
		KillSpawnedScript \{Name = update_score_fast}
		KillSpawnedScript \{Name = check_for_star_power}
		KillSpawnedScript \{Name = wait_for_inactive}
		KillSpawnedScript \{Name = GuitarEvent_PreFretbar}
		KillSpawnedScript \{Name = GuitarEvent_Fretbar}
		KillSpawnedScript \{Name = hud_activated_star_power}
		KillSpawnedScript \{Name = net_whammy_pitch_shift}
		KillSpawnedScript \{Name = net_control_whammy_pitch_loop}
		KillSpawnedScript \{Name = star_power_whammy}
		KillSpawnedScript \{Name = show_star_power_ready}
		KillSpawnedScript \{Name = event_iterator}
		KillSpawnedScript \{Name = scriptevents_iterator}
		KillSpawnedScript \{Name = win_song}
		KillSpawnedScript \{Name = hand_note_iterator}
		KillSpawnedScript \{Name = show_coop_raise_axe_for_starpower}
		KillSpawnedScript \{Name = net_whammy_pitch_shift}
		KillSpawnedScript \{Name = Crowd_AllPlayAnim}
		KillSpawnedScript \{Name = hud_activated_star_power_spawned}
		KillSpawnedScript \{Name = play_intro}
		KillSpawnedScript \{Name = begin_song_after_intro}
		KillSpawnedScript \{id = song_event_scripts}
		Destroy_AllWhammyFX
		destroy_all_lars_praticles
		KillSpawnedScript \{Name = morph_scroll_speed}
		KillSpawnedScript \{Name = intro_power_rocker}
		if ($game_mode != freeplay || (<Type> = Normal && <got_param_restarting> = FALSE))
			destroy_band_hud
		endif
		destroy_intro
	endif
	if NOT (<Type> = outro)
		KillSpawnedScript \{Name = move_highway_prepass}
		KillSpawnedScript \{Name = waitandkillhighway}
		KillSpawnedScript \{Name = testlevel_debug}
		destroy_net_popup
		LightShow_Shutdown
		DestroyParticlesByGroupID \{groupID = zoneparticles}
		Transition_KillAll
		KillSpawnedScript \{Name = wait_and_play_finalbandintro_transition}
		fadetoblack \{OFF
			id = finalbattle_fade}
		KillSpawnedScript \{Name = GuitarEvent_SongFailed_Spawned}
		if NOT GotParam \{for_credits_venue}
			KillSpawnedScript \{Name = GuitarEvent_SongWon_Spawned}
			KillSpawnedScript \{Name = audio_crowd_play_cheer_before_explosion}
			KillSpawnedScript \{Name = audio_gameplay_you_rock_crowd_waiting}
			KillSpawnedScript \{Name = waitandkillhighway}
			KillSpawnedScript \{Name = wait_and_play_you_rock_movie}
			KillSpawnedScript \{Name = create_exploding_text}
		endif
		deinit_jam_audio \{keep_drumkit}
	endif
	if (<Type> = outro)
		if GotParam \{kill_cameracuts_iterator}
			KillSpawnedScript \{Name = cameracuts_iterator}
			KillSpawnedScript \{Name = autocut_cameracuts_iterator}
		endif
		songaudiostop <...>
	endif
	if (<Type> = Normal)
		KillSpawnedScript \{id = zone_scripts}
		GetPakManCurrentName \{map = zones}
		formatText checksumName = zone_killsong '%s_KillSong' s = <pakname>
		if ScriptExists <zone_killsong>
			<zone_killsong>
		endif
		LS_ResetVenueLights
		if NOT GotParam \{freeplay_visualizer_hack}
			destroy_movie_viewport
		endif
		destroy_bg_viewport
		if ($game_mode != tutorial)
			if (<destroy_band> = 0)
				drummer_kill_spawnscripts
				vocalist_reset_globals
				autolook_kill_spawnscripts
				crowd_kill_spawnscripts
				bandmanager_stopallanimiterators
				band_unload_anim_paks
				prepare_band_for_main_menu
			else
				persistent_band_stop_and_unload_anims
			endif
		endif
		destroy_all_camera_lock_targets
		destroy_cameracuts
		reset_parts_with_mic
		restore_idle_faces
		reset_stances_for_frontend
		destroy_debug_measure_text
		kill_character_scripts
		reset_facial_animations
		Change \{check_for_unplugged_controllers = 0}
		if ($game_mode = practice)
			kill_practice_scripts
		endif
		destroy_menu \{menu_id = you_rock_container}
		KillMovie \{textureSlot = 1}
	endif
	if (<Type> = Normal)
		printf \{qs(0x0c77f0ad)}
		Wait \{2
			gameframes}
		printf \{qs(0xfa6acfe6)}
		if NOT GotParam \{restarting}
			unload_game_pak
		endif
		if (<stop_song> = 1)
			begin
			printf \{channel = clayton
				'Waiting on SongAudio_WaitingForDeInit'}
			if ($songaudio_waitingfordeinit = 0)
				break
			endif
			Wait \{1
				gameframe}
			repeat
			Change \{songaudio_waitingforstop = 1}
			songaudiostop callback = songaudio_stopdone should_keep_cached_song = <got_param_restarting>
		endif
		if NOT (<no_render> = 1)
			if ($shutdown_game_for_signin_change_flag = 0)
				StartRendering
			endif
		endif
		printf \{qs(0xad55869c)}
		popunsafeforshutdown \{context = gameplay
			Type = unchecked}
		Change \{playing_song = 0}
		broadcastevent \{Type = kill_gem_scroller_done}
	endif
	destroy_band_failing_vignette
	KillSpawnedScript \{Name = do_diff_change_spawned}
	KillSpawnedScript \{Name = wait_and_change_difficulty}
	KillSpawnedScript \{Name = bm_wait_for_death}
	kill_pause_curtain \{time = 0.0}
	kill_all_achievement_scripts
	if ($game_mode = freeplay)
		set_all_highway_props \{alpha = 0
			time = 0.66}
	endif
endscript
currently_playing_song = ''
songaudio_waitingforstop = 0

script songaudio_stopdone 
	printf \{channel = clayton
		'SongAudio_stopDone'}
	Change \{songaudio_waitingforstop = 0}
endscript
songaudio_waitingfordeinit = 0

script songaudio_deinitdone 
	printf \{channel = clayton
		'SongAudio_deInitDone'}
	Change \{songaudio_waitingfordeinit = 0}
endscript

script restart_gem_scroller \{no_render = 0
		loading_transition = 0
		restarting = 1}
	wii_timer_start \{label = 'restart_gem_scroller'}
	begin
	if ($g_gem_scrollers_are_go = 1)
		break
	endif
	Wait \{1
		gameframe}
	repeat
	yield
	pushunsafeforshutdown \{context = gameplay
		Type = unchecked}
	Change \{net_pause = 0}
	disable_pause
	yield
	if (<loading_transition> = 0)
		PauseGame
	endif
	<allow_unfocus> = 1
	ui_event_get_top
	if ((<base_name> = 'song_breakdown') && ($last_song_played = jamsession))
		printf \{channel = bkutcher
			qs(0xbc19ca49)}
		<allow_unfocus> = 0
	endif
	if (<allow_unfocus> = 1)
		LaunchEvent \{Type = unfocus
			target = root_window}
	endif
	yield
	if (<loading_transition> = 0)
		kill_gem_scroller no_render = <no_render> restarting
		pushunsafeforshutdown \{context = gameplay
			Type = unchecked}
	endif
	yield \{'kill_gem_scroller'}
	start_gem_scroller <...>
	yield
	Change \{check_for_unplugged_controllers = 1}
	UnBindGuitarControllerStatus
	yield
	LaunchEvent \{Type = focus
		target = root_window}
	yield
	KillSpawnedScript \{Name = yieldmonitor}
	if (<loading_transition> = 0)
		if GameIsPaused
			gh_start_pressed \{no_sfx = 1}
		endif
	endif
	Change \{lag_calibration_highway_interlock = 0}
	wii_timer_stop \{label = 'restart_gem_scroller'}
endscript

script reset_song_time \{starttime = 0}
	Change current_deltatime = (1.0 / 60.0)
	Change current_time = (<starttime> / 1000.0)
	ResetSongTimer starttime = (<starttime> / 1000.0)
endscript

script fill_input_array 
	ScriptAssert \{qs(0x63901e0d)}
endscript

script create_gem 
	Create2DGem <...>
endscript

script gem_iterator \{song_name = test
		difficulty = easy
		array_type = qs(0x13e59f9f)
		not_player_specific = FALSE
		add_part_to_event_id = FALSE
		use_input_array = ''}
	if (<not_player_specific> = FALSE)
		SpawnScriptNow gem_array_events params = {<...>}
	endif
	if (<not_player_specific> = FALSE)
		if playerinfoequals <Player> part = vocals
			gamemode_gettype
			if (<Type> != freeplay)
				return
			endif
			if (<use_input_array> = '')
				return
			endif
		endif
	endif
	if NOT (<use_input_array> = '')
		get_difficulty_text_nl difficulty = <difficulty> no_rhythm = 1
		SpawnScriptNow gem_array_stepper params = {<...>}
	else
		RemoveParameter \{difficulty}
		if wii_should_spawn_gem_stepper difficulty = easy part_crc = <part_crc>
			SpawnScriptNow gem_array_stepper params = {<...> difficulty = easy difficulty_text_nl = 'easy'}
		endif
		if wii_should_spawn_gem_stepper difficulty = medium part_crc = <part_crc>
			SpawnScriptNow gem_array_stepper params = {<...> difficulty = medium difficulty_text_nl = 'medium'}
		endif
		if wii_should_spawn_gem_stepper difficulty = hard part_crc = <part_crc>
			SpawnScriptNow gem_array_stepper params = {<...> difficulty = hard difficulty_text_nl = 'hard'}
		endif
		if wii_should_spawn_gem_stepper difficulty = expert part_crc = <part_crc>
			SpawnScriptNow gem_array_stepper params = {<...> difficulty = expert difficulty_text_nl = 'expert'}
		endif
		if wii_should_spawn_gem_stepper difficulty = expert_plus part_crc = <part_crc>
			SpawnScriptNow gem_array_stepper params = {<...> difficulty = expert difficulty_text_nl = 'expert' expert_plus}
		endif
	endif
endscript

script wii_should_spawn_gem_stepper \{difficulty = !q1768515945
		part_crc = None}
	if (<part_crc> = None)
		return \{true}
	endif
	gamemode_gettype
	if (<Type> = freeplay)
		return \{true}
	endif
	getnumplayersingame
	getfirstplayer
	playlist_getcurrentsong
	if inroadiebattlemode
		<in_roadie_battle> = true
	else
		<in_roadie_battle> = FALSE
	endif
	begin
	<difficulty_match> = FALSE
	if ((<Type> = competitive) && (<in_roadie_battle> = FALSE))
		<difficulty_match> = true
	elseif (<Type> = tutorial)
		<difficulty_match> = true
	elseif (<difficulty> = expert_plus)
		if playerinfoequals <Player> double_kick_drum = 1
			<difficulty_match> = true
		endif
	elseif playerinfoequals <Player> difficulty = <difficulty>
		<difficulty_match> = true
	elseif (<difficulty> = easy)
		if playerinfoequals <Player> difficulty = beginner
			<difficulty_match> = true
		endif
	endif
	<part_match> = FALSE
	if (<current_song> = jamsession)
		if playerinfoequals <Player> part = <part_crc>
			<part_match> = true
		endif
	else
		setup_new_part_based_on_difficulty Player = <Player>
		if (<new_part> = <part_crc>)
			<part_match> = true
		endif
	endif
	if ((<difficulty_match> = true) && (<part_match> = true))
		return \{true}
	endif
	getnextplayer Player = <Player>
	repeat <num_players>
	return \{FALSE}
endscript

script gem_array_events \{not_player_specific = FALSE
		add_part_to_event_id = FALSE
		Player = !i1768515945
		use_expert_plus = 0
		use_input_array = ''
		input_array = 0x00000000
		iterator_text = 0x69696969
		gem_function = 0x00000000
		strum_function = 0x00000000
		time = 0.0
		difficulty = !q1768515945
		song_name = !q1768515945
		skipleadin = !f1768515945}
	getplayerchecksum Player = <Player> checksum = difficulty
	<difficulty> = <checksum_value>
	get_difficulty_text_nl difficulty = <difficulty> no_rhythm = 1
	if (<use_expert_plus> = 1)
		getplayerinteger Player = <Player> checksum = double_kick_drum
		<double_kick_drum> = <integer_value>
		if (<double_kick_drum> = 1)
			<difficulty_text_nl> = 'expert_plus'
		endif
	endif
	get_notetrack_part_text Player = <Player>
	ClearEventHandlerGroup \{group = iterator_group}
	if (<not_player_specific> = FALSE)
		fastextendcrcplayer checksum = gem_step_event Player = <Player>
		id = <out>
	elseif (<add_part_to_event_id> = true)
		extendcrcwithstring checksum = gem_step_event string = <part>
		<id> = <extended_checksum>
	else
		id = gem_step_event
	endif
	extendcrcwithstring checksum = <id> string = <iterator_text>
	<id> = <extended_checksum>
	extendcrcwithstring checksum = <id> string = <difficulty_text_nl>
	<id> = <extended_checksum>
	if (<use_input_array> = '')
		SetEventHandler response = call_script event = <id> Scr = gem_step params = {
			use_input_array = <use_input_array>
			input_array = <input_array>
			gem_function = <gem_function>
			strum_function = <strum_function>
			Player = <Player>
			difficulty = <difficulty>
			song_name = <song_name>
			skipleadin = <skipleadin>
		} group = iterator_group
	else
		SetEventHandler response = call_script event = <id> Scr = gem_step params = {
			use_input_array = <use_input_array>
			gem_function = <gem_function>
			strum_function = <strum_function>
			Player = <Player>
			difficulty = <difficulty>
			song_name = <song_name>
			skipleadin = <skipleadin>
		} group = iterator_group
	endif
	if (<not_player_specific> = FALSE)
		fastextendcrcplayer checksum = gem_step_begin Player = <Player>
		id = <out>
	elseif (<add_part_to_event_id> = true)
		extendcrcwithstring checksum = gem_step_begin string = <part>
		<id> = <extended_checksum>
	else
		id = gem_step_begin
	endif
	extendcrcwithstring checksum = <id> string = <iterator_text>
	<id> = <extended_checksum>
	extendcrcwithstring checksum = <id> string = <difficulty_text_nl>
	<id> = <extended_checksum>
	SetEventHandler response = call_script event = <id> Scr = gem_step_begin params = {} group = iterator_group
	if (<not_player_specific> = FALSE)
		fastextendcrcplayer checksum = gem_step_end Player = <Player>
		id = <out>
	elseif (<add_part_to_event_id> = true)
		extendcrcwithstring checksum = gem_step_end string = <part>
		<id> = <extended_checksum>
	else
		id = gem_step_end
	endif
	extendcrcwithstring checksum = <id> string = <iterator_text>
	<id> = <extended_checksum>
	extendcrcwithstring checksum = <id> string = <difficulty_text_nl>
	<id> = <extended_checksum>
	SetEventHandler response = call_script event = <id> Scr = gem_step_end params = {} group = iterator_group
	if (<use_input_array> = '')
		fastextendcrcplayer checksum = restart_gem_array_events Player = <Player>
		<id> = <out>
		SetEventHandler response = switch_script event = <id> Scr = gem_array_events params = {
			not_player_specific = <not_player_specific>
			add_part_to_event_id = <add_part_to_event_id>
			Player = <Player>
			use_expert_plus = <use_expert_plus>
			use_input_array = <use_input_array>
			iterator_text = <iterator_text>
			gem_function = <gem_function>
			strum_function = <strum_function>
			time = <time>
			difficulty = <difficulty>
			song_name = <song_name>
			skipleadin = <skipleadin>
			input_array = <input_array>
		} group = iterator_group
	endif
	Block
	extended_checksum = NULL
	iterator_text = 'null'
	difficulty_text_nl = 'null'
	part = ''
endscript

script gem_step \{use_input_array = 0x69696969
		input_array = 0x00000000
		array_entry = 0
		song = !q1768515945
		time = 0.0
		expert_plus = !q1768515945
		gem_function = 0x00000000
		strum_function = 0x00000000
		Player = !i1768515945
		difficulty = !q1768515945
		song_name = !q1768515945
		skipleadin = !f1768515945}
	GemStep
endscript

script gem_step_begin 
endscript

script gem_step_end 
	Change \{quickplay_rewind_end_of_song = 1}
endscript

script gem_array_stepper 
	gem_array_stepper_CFunc_Setup
	begin
	if gem_array_stepper_CFunc
		break
	endif
	WaitOneGameFrame
	repeat
	gem_array_stepper_CFunc_Cleanup
endscript

script default_startup 
endscript

script call_startup_scripts 
	Change \{current_startup_script = default_startup}
	GetGlobalTags \{user_options}
	get_song_struct song = <song_name>
	setlagoffsets song_struct = <song_struct>
	if StructureContains structure = <song_struct> Name = startup_Script
		Change current_startup_script = (<song_struct>.startup_Script)
	endif
	if StructureContains structure = <song_struct> Name = exit_Script
		Change current_exit_script = (<song_struct>.exit_Script)
	else
	endif
	if StructureContains structure = <song_struct> Name = hammer_on_measure_scale
		Change hammer_on_measure_scale = (<song_struct>.hammer_on_measure_scale)
	else
		Change \{hammer_on_measure_scale = $default_hammer_on_measure_scale}
	endif
	SpawnScriptNow ($current_startup_script) params = {<...>}
endscript

script addlagoffsets 
	audio_lag_ms = 0
	gem_lag_ms = 0
	input_lag_ms = 0
	drum_midi_lag_ms = 0
	prefretbar_time = 0
	GetPlatform
	if StructureContains structure = <settings> Name = <Platform>
		AddParams (<settings>.<Platform>)
	endif
	Change time_audio_offset = ($time_audio_offset + <audio_lag_ms>)
	Change time_gem_offset = ($time_gem_offset + <gem_lag_ms>)
	Change time_input_offset = ($time_input_offset + <input_lag_ms>)
	Change time_drum_midi_offset = ($time_drum_midi_offset + <drum_midi_lag_ms>)
	Change prefretbar_time = ($prefretbar_time + <prefretbar_time>)
endscript

script setlagoffsets 
	Change \{time_audio_offset = 0.0}
	Change \{time_gem_offset = 0.0}
	Change \{time_input_offset = 0.0}
	Change \{time_drum_midi_offset = 0.0}
	Change \{prefretbar_time = 0.0}
	Change time_gem_offset = ($time_gem_offset - ($wii_seek_lag / $current_speedfactor))
	Change time_input_offset = ($time_input_offset - ($wii_seek_lag / $current_speedfactor))
	addlagoffsets settings = ($default_lag_settings)
	if ($calibrate_lag_enabled = 1)
		Change \{time_gem_offset = 0.0}
		Change \{time_input_offset = 0.0}
	endif
	practice_settings = None
	if ($game_mode = practice && $current_speedfactor != 1.0)
		if NOT playerinfoequals \{1
				part = drum}
			if ($current_speedfactor >= 0.8)
				practice_settings = practice_slow_lag_settings
			elseif ($current_speedfactor >= 0.6)
				practice_settings = practice_slower_lag_settings
			else
				practice_settings = practice_slowest_lag_settings
			endif
		else
			if ($current_speedfactor >= 0.8)
				practice_settings = practice_drum_slow_lag_settings
			elseif ($current_speedfactor >= 0.6)
				practice_settings = practice_drum_slower_lag_settings
			else
				practice_settings = practice_drum_slowest_lag_settings
			endif
		endif
	endif
	if NOT (<practice_settings> = None)
		addlagoffsets settings = ($<practice_settings>)
	endif
	if StructureContains structure = <song_struct> Name = gem_offset
		Change time_gem_offset = ($time_gem_offset + (<song_struct>.gem_offset))
	endif
	if StructureContains structure = <song_struct> Name = input_offset
		Change time_input_offset = ($time_input_offset + (<song_struct>.input_offset))
	endif
endscript

script kill_startup_script 
	if NOT ($current_startup_script = nothing)
		KillSpawnedScript Name = ($current_startup_script)
	endif
	if NOT ($current_exit_script = nothing)
		SpawnScriptNow ($current_exit_script) params = {<...>}
	endif
endscript
load_venue_reapply_band_logo = 0

script Load_Venue \{block_scripts = 0
		force_venue_reload = 0}
	printf qs(0x12342469) l = ($current_level)
	wii_timer_start \{label = 'venue'}
	changeambientmap
	GetPakManCurrent \{map = zones}
	if GotParam \{pak}
		if NOT StructureContains \{structure = $LevelZones
				$current_level}
			ScriptAssert \{'No level named %s, check LevelZones in venuelist.q for available levels'
				s = $current_level}
		endif
		if (<pak> = (($LevelZones.$current_level).zone))
			if (<block_scripts> = 1)
				resetyieldinfo \{yield = FALSE}
			endif
			Transitions_ResetZone
			wii_timer_stop \{label = 'venue'}
			return
		else
			printf \{channel = marc
				qs(0x993ca23d)}
			Change \{encore_transitioned_played = FALSE}
			LightShow_SetMapping \{CLEAR}
			destroy_crowd_models
			destroy_movie_viewport
			SetPakManCurrentBlock map = zones pak = None block_scripts = <block_scripts>
		endif
	else
	endif
	ResetPulseEvents
	if NOT SetPakManCurrentBlock map = zones pak = (($LevelZones.$current_level).zone) block_scripts = <block_scripts>
		DownloadContentLost
		return
	endif
	audio_effects_set_effects_by_venue_type
	if ($end_credits = 0)
		audio_crowd_setup_based_on_zone
	endif
	SpawnScriptNow \{sfx_backgrounds_new_area
		params = {
			BG_SFX_Area = $g_current_crowd_looping_bg_area_good
			fadeintime = 10.0
			fadeintype = linear
		}}
	if NodeFlagExists \{NODEFLAG_VIEWERLIGHTS}
		if ($current_level = load_z_viewer ||
				$current_level = viewer)
			ChangeNodeFlag \{NODEFLAG_VIEWERLIGHTS
				0}
			ChangeNodeFlag \{NODEFLAG_VIEWERLIGHTS
				1}
			($default_loading_screen.Destroy)
		else
			ChangeNodeFlag \{NODEFLAG_VIEWERLIGHTS
				0}
		endif
	endif
	if ($load_venue_reapply_band_logo = 1)
		apply_band_logo_to_venue \{step = apply}
		Change \{load_venue_reapply_band_logo = 0}
	endif
	wii_timer_stop \{label = 'venue'}
endscript

script refresh_venue \{block_scripts = 0}
	printscriptinfo qs(0x3f312fd5) v = ($current_level)
	GetPakManCurrent \{map = zones}
	if GotParam \{pak}
		if NOT StructureContains \{structure = $LevelZones
				$current_level}
			ScriptAssert \{'No level named %s, check LevelZones in venuelist.q for available levels'
				s = $current_level}
		endif
		if (<pak> = (($LevelZones.$current_level).zone))
			resetyieldinfo \{yield = FALSE}
			Transitions_ResetZone
			return
		endif
	endif
endscript

script start_song \{device_num = 0
		practice_intro = 0
		endtime = 999999999
		force_encore = 0}
	wii_timer_start \{label = 'start_song'}
	pushunsafeforshutdown \{context = gameplay
		Type = unchecked}
	playlist_getcurrentsong
	persistent_band_pause_all_characters
	roadie_battle_init_gameplay
	cas_update_band_logo
	if ($is_network_game = 0)
		xenon_singleplayer_session_init
	endif
	set_rich_presence_game_mode
	if NOT ($debug_current_transition = None)
		Change current_transition = ($debug_current_transition)
	else
		Transition_SelectTransition practice_intro = <practice_intro> force_encore = <force_encore>
	endif
	gamemode_gettype
	if (($is_network_game = 0) || (<Type> = career))
		if NOT GotParam \{starttime}
			if GotParam \{uselaststarttime}
				starttime = ($current_starttime)
			else
				starttime = 0
			endif
		endif
		if GotParam \{song_name}
			if (<song_name> = jamsession)
				if musicstudio_mainobj :musicstudio_isinmusicstudio
					playlist_setcurrentsong song = <song_name>
				endif
			else
				playlist_setcurrentsong song = <song_name>
			endif
		endif
		if NOT (GotParam do_not_restart_gem_scroller)
			do_not_restart_gem_scroller = 0
		endif
		if (<do_not_restart_gem_scroller> = 0)
			restart_gem_scroller {
				starttime = <starttime>
				practice_intro = <practice_intro>
				endtime = <endtime>
				restarting = 0
			}
		endif
	endif
	Change \{check_for_unplugged_controllers = 1}
	wii_timer_stop \{label = 'start_song'}
endscript

script yieldmonitor 
	begin
	Wait \{1
		gameframe}
	yieldping
	repeat
endscript
transition_force_loading_wait = 0

script restart_song \{practice_intro = 0
		loading_transition = 0}
	wii_timer_start \{label = 'restart_song'}
	audience_party_pause_game
	Change \{g_gem_scrollers_are_go = 0}
	if ($shutdown_game_for_signin_change_flag = 1)
		return
	endif
	pushunsafeforshutdown \{context = gameplay
		Type = unchecked}
	disable_pause
	persistent_band_pause_all_characters
	Change \{finalbandintro_transition_playing = 0}
	playlist_getcurrentsong
	if (<loading_transition> = 1)
		Change \{transition_force_loading_wait = 1}
		resetyieldinfo \{yield = true}
		KillSpawnedScript \{Name = yieldmonitor}
		SpawnScriptNow \{yieldmonitor}
		yield
		bandmanager_stopallanimiterators
		drummer_kill_spawnscripts
		vocalist_reset_globals
		autolook_kill_spawnscripts
		crowd_kill_spawnscripts
		kill_gem_scroller \{Type = restart}
		yield \{'kill_gem_scroller'}
		setup_bg_viewport
		yield \{'setup_bg_viewport'}
		KillSpawnedScript \{Name = switch_to_no_band_camera}
		stop_cameracut
		if (<current_song> != jamsession)
			create_cameracuts \{in_game = 1}
		endif
		Transition_SelectTransition practice_intro = <practice_intro>
		if ($current_transition = Intro)
			Change \{current_transition = loadingintro}
		endif
		yield
		songtime = 0
		Transition_GetTime \{Type = loading}
		songtime = (<songtime> - <transition_time>)
		Transition_GetTime Type = ($current_transition)
		songtime = (<songtime> - <transition_time>)
		reset_song_time starttime = <songtime>
		yield
		gamemode_gettype
		if ($g_connection_loss_dialogue = 1)
			return
		endif
		if ((($is_network_game) = 1) && (<Type> = competitive || <Type> = quickplay))
			Transition_Play \{Type = onlineloading}
		else
			if quest_progression_is_chapter_rush
				use_rush_outro
				Transition_Play \{Type = rushoutro
					use_song_time = 0}
			elseif quest_progression_is_chapter_finale
				use_finalbattle_outro
				Transition_Play \{Type = finalbattleoutro
					use_song_time = 0}
			else
				Transition_Play \{Type = loading}
			endif
		endif
		start_song_loading
		yield
		UnPauseGame
		yield
		yield
		yield
		yield
		persistent_band_stop_and_unload_anims
		yield
		begin
		if load_songqpak {
				song_name = <current_song>
				async = 1
				resetzone = 1
			}
			break
		endif
		SpawnScriptNow song_load_failed params = {error_text = <error_text> no_loading_screen = 1}
		playlist_clear
		freeplay_next_song \{initial_song_list = true}
		playlist_getcurrentsong
		repeat 2
		yield \{'load_songqpak'}
		Change \{finished_gig_band_rebuild = 0}
		if NOT musicstudio_mainobj :musicstudio_isinmusicstudio
			persistent_band_prepare_for_song \{async = 1}
		endif
	else
		Change \{transition_force_loading_wait = 0}
		printf \{qs(0x224b28e2)}
		resetyieldinfo \{yield = FALSE}
	endif
	Change \{g_gem_scrollers_are_go = 1}
	yield
	StopSoundEvent \{audio_crowd_fail}
	yield
	if (<loading_transition> = 0 && <practice_intro> = 0)
		if NOT ($debug_current_transition = None)
			Change current_transition = ($debug_current_transition)
		elseif ($current_transition = forceintro)
			Change \{current_transition = fastintro}
			Transition_SelectTransition practice_intro = <practice_intro>
		elseif ($current_transition = forcelongintro)
			Change \{current_transition = Intro}
		elseif ($debug_encore)
			Change \{current_transition = ENCORE}
		else
			Change \{current_transition = fastintro}
			Transition_SelectTransition practice_intro = <practice_intro> restarting = 1
		endif
		if ($debug_encore = 0 && $debug_career_transformations = 0)
			if GetNodeFlag \{LS_ENCORE_POST}
				Change \{current_transition = restartencore}
			endif
		endif
		Change \{debug_encore = 0}
	endif
	yield \{'Select Transition Logic'}
	UnPauseGame
	yield
	starttime = ($current_starttime)
	if (<practice_intro> = 1)
		starttime = ($practice_start_time)
		endtime = ($practice_end_time)
	endif
	if (<loading_transition> = 0)
		no_render = 1
	else
		no_render = 0
	endif
	if NOT musicstudio_mainobj :musicstudio_isinmusicstudio
		if (<current_song> = jamsession)
			printf \{qs(0xb5b862fb)}
			if (<loading_transition> = 0)
				hide_glitch \{num_frames = 5}
				kill_gem_scroller \{Type = Normal}
				jam_quickplay_get_and_start_song \{show_mainmenu_bg = 0}
			endif
			return
		endif
	else
		create_loading_screen
	endif
	if inroadiebattlemode
		roadie_battle_stop_game
	endif
	if ((<loading_transition> = 0) || ($game_mode = freeplay))
		restart_gem_scroller {
			starttime = <starttime>
			practice_intro = <practice_intro>
			endtime = <endtime>
			loading_transition = <loading_transition>
			no_render = <no_render>
		}
	endif
	wii_timer_stop \{label = 'restart_song'}
endscript

script start_song_loading 
	if is_current_song_a_jam_session
		destroy_cameracuts
		if NOT get_jam_filename \{Type = current}
			if ui_event_exists_in_stack \{Name = 'songlist'}
				ui_event_wait \{event = menu_back
					data = {
						state = uistate_songlist
					}}
				return
			endif
		endif
		play_song_start_song_from_quickplay {
			is_jam = 1
			loading_transition = 1
			FileName = <FileName>
			jam_display_name = <jam_display_name>
			example_song = <example_song>
		}
	else
		ui_event_wait \{event = menu_change
			state = uistate_finish_song_loading
			data = {
				is_jam = 0
				loading_transition = 1
			}}
	endif
endscript

script debug_flash_star 
	begin
	LaunchGemEvent \{event = debug_star}
	Wait \{8
		gameframes}
	LaunchGemEvent \{event = debug_gem}
	Wait \{8
		gameframes}
	repeat
endscript

script cache_song_end_time 
	playlist_getcurrentsong
	songfilemanager func = get_song_end_time song_name = <current_song>
	cachesongendtime time = <total_end_time>
	if audience_party_available
		audience_party_send_song_info send_song = <current_song> send_true_song_duration
	endif
endscript

script wait_for_deferred_rendering 
	Wait \{8
		gameframes}
endscript
last_gems = None
last_fx_set = None

script unload_gempaks \{Heap = quota_sprites}
	if ($last_gems != None)
		printf \{qs(0xc047f1fd)
			i = $last_gems}
		UnLoadPak $last_gems Heap = <Heap>
		WaitUnloadPak \{$last_gems
			Block}
	endif
	if ($last_fx_set != None)
		printf \{qs(0xc047f1fd)
			i = $last_fx_set}
		formatText \{TextName = fxpak
			'%i.pak'
			i = $last_fx_set
			AddToStringLookup = true}
		UnLoadPak <fxpak> Heap = <Heap> async = 0
		WaitUnloadPak <fxpak> Block
	endif
endscript

script load_gempaks \{async = 0
		Heap = quota_sprites}
	GetGlobalTags \{user_options}
	if NOT GotParam \{gem_set}
		gem_set = standard_gems
	endif
	if NOT GotParam \{fx_set}
		fx_set = standard_fx
	endif
	unload_gempaks Heap = <Heap>
	if NOT lookupgemstring Name = <gem_set>
		pak = 'pak/gems/standard_gems'
	endif
	formatText TextName = gempak '%i.pak' i = <pak> AddToStringLookup = true
	printf qs(0x2bc627d8) i = <gempak>
	if inroadiebattlemode
		<gempak> = 'pak/gems/roadie_battle_gems.pak'
	endif
	LoadPakAsync pak_name = <gempak> Heap = <Heap> no_vram async = <async>
	Change last_gems = <gempak>
	if NOT lookupgemstring Name = <fx_set>
		pak = 'pak/gems/standard_fx'
	endif
	formatText TextName = fxpak '%i.pak' i = <pak> AddToStringLookup = true
	printf qs(0x2bc627d8) i = <fxpak>
	LoadPakAsync pak_name = <fxpak> Heap = <Heap> no_vram async = <async>
	Change last_fx_set = <pak>
endscript

script load_song_anims \{async = 1}
	get_song_performance song = <song_name>
	if (<song_name> = jamsession)
	else
		if (<song_performance> = 0)
			song_perf_ext = ''
		else
			formatText TextName = song_perf_ext '_perf%i' i = (<song_performance> + 1)
		endif
		if NOT dlcmanagerfunc func = get_content_prefix content_name = <song_name>
			get_song_prefix song = <song_name>
			formatText TextName = animqpak 'pak/anims/songs/%i%s_anims.pak' i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
		else
			<song_prefix> = <content_prefix>
			formatText TextName = animqpak '%i_anims.pak' i = <content_prefix> AddToStringLookup = true
			formatText checksumName = song_setup '%i_song_startup' i = <content_prefix>
			if ScriptExists <song_setup>
				MemPushContext \{quota_animations}
				SpawnScriptNow <song_setup> params = {loadfunction = loadanim}
				MemPopContext
			else
				printf \{qs(0xdd6eb000)}
			endif
		endif
		printf qs(0xb6ba1912) i = <animqpak>
		if NOT LoadPakAsync pak_name = <animqpak> Heap = quota_animations no_vram async = <async>
			DownloadContentLost
			return
		endif
	endif
endscript

script unload_any_song_anims \{song_prefix = 'blah'
		song_perf_ext = ''}
	printscriptinfo \{qs(0x77fa4c1f)}
	formatText checksumName = song_checksum '%s' s = <song_prefix>
	if NOT dlcmanagerfunc func = get_content_id prefix = <song_prefix>
		formatText TextName = animqpak 'pak/anims/songs/%i%s_anims.pak' i = <song_prefix> s = <song_perf_ext>
	else
		formatText TextName = animqpak '%i_anims.pak' i = <song_prefix>
		formatText checksumName = song_setup '%i_song_startup' i = <song_prefix>
		if ScriptExists <song_setup>
			MemPushContext \{quota_animations}
			SpawnScriptNow <song_setup> params = {loadfunction = unloadanim}
			MemPopContext
		endif
	endif
	printf qs(0x26f8ac4a) i = <animqpak>
	UnLoadPak <animqpak>
endscript

script unload_song_anims 
	if ($current_song_qpak = None)
		return
	endif
	if ($current_song_qpak = jamsession)
	else
		if ($current_song_qpak_performance = 0)
			song_perf_ext = ''
		else
			formatText TextName = song_perf_ext '_perf%i' i = ($current_song_qpak_performance + 1)
		endif
		get_song_prefix song = ($current_song_qpak)
		is_song_downloaded song_checksum = ($current_song_qpak)
		if (<download> = 0)
			formatText TextName = songqpak 'pak/anims/songs/%i%s_anims.pak' i = <song_prefix> s = <song_perf_ext> AddToStringLookup = true
		else
			formatText TextName = songqpak '%i_anims.pak' i = <song_prefix> AddToStringLookup = true
			formatText checksumName = song_setup '%i_song_startup' i = <song_prefix>
			if ScriptExists <song_setup>
				MemPushContext \{quota_animations}
				SpawnScriptNow <song_setup> params = {loadfunction = unloadanim}
				MemPopContext
			endif
		endif
		printf qs(0x26f8ac4a) i = <songqpak>
		UnLoadPak <songqpak>
	endif
endscript

script wii_prepare_anim_structs 
	get_song_prefix song = <song>
	ExtendCrc car_male_anim_struct_ <song_prefix> out = song_anim_struct
	if GlobalExists Name = <song_anim_struct> Type = structure
		if StructureContains structure = ($<song_anim_struct>) guitar
			Change structurename = car_male_anim_struct_guitar pak = ((($<song_anim_struct>).guitar).pak)
			Change structurename = car_male_anim_struct_guitar anim_set = ((($<song_anim_struct>).guitar).anim_set)
			Change structurename = car_male_anim_struct_guitar finger_anims = ((($<song_anim_struct>).guitar).finger_anims)
			Change structurename = car_male_anim_struct_guitar fret_anims = ((($<song_anim_struct>).guitar).fret_anims)
			Change structurename = car_male_anim_struct_guitar strum_anims = ((($<song_anim_struct>).guitar).strum_anims)
			Change structurename = car_male_anim_struct_guitar facial_anims = ((($<song_anim_struct>).guitar).facial_anims)
		endif
		if StructureContains structure = ($<song_anim_struct>) bass
			Change structurename = car_male_anim_struct_bass pak = ((($<song_anim_struct>).bass).pak)
			Change structurename = car_male_anim_struct_bass anim_set = ((($<song_anim_struct>).bass).anim_set)
			Change structurename = car_male_anim_struct_bass finger_anims = ((($<song_anim_struct>).bass).finger_anims)
			Change structurename = car_male_anim_struct_bass fret_anims = ((($<song_anim_struct>).bass).fret_anims)
			Change structurename = car_male_anim_struct_bass strum_anims = ((($<song_anim_struct>).bass).strum_anims)
			Change structurename = car_male_anim_struct_bass facial_anims = ((($<song_anim_struct>).bass).facial_anims)
		endif
		if StructureContains structure = ($<song_anim_struct>) drum
			Change structurename = car_male_anim_struct_drum pak = ((($<song_anim_struct>).drum).pak)
			Change structurename = car_male_anim_struct_drum anim_set = ((($<song_anim_struct>).drum).anim_set)
			Change structurename = car_male_anim_struct_drum facial_anims = ((($<song_anim_struct>).drum).facial_anims)
		endif
		if StructureContains structure = ($<song_anim_struct>) vocals
			Change structurename = car_male_anim_struct_vocals pak = ((($<song_anim_struct>).vocals).pak)
			Change structurename = car_male_anim_struct_vocals anim_set = ((($<song_anim_struct>).vocals).anim_set)
			Change structurename = car_male_anim_struct_vocals facial_anims = ((($<song_anim_struct>).vocals).facial_anims)
			if StructureContains structure = (($<song_anim_struct>).vocals) finger_anims
				Change structurename = car_male_anim_struct_vocals finger_anims = ((($<song_anim_struct>).vocals).finger_anims)
				Change structurename = car_male_anim_struct_vocals fret_anims = ((($<song_anim_struct>).vocals).fret_anims)
				Change structurename = car_male_anim_struct_vocals strum_anims = ((($<song_anim_struct>).vocals).strum_anims)
			endif
		endif
	else
		printf \{'Song does not define animations for the guys'}
	endif
	ExtendCrc car_female_anim_struct_ <song_prefix> out = song_anim_struct
	if GlobalExists Name = <song_anim_struct> Type = structure
		if StructureContains structure = ($<song_anim_struct>) guitar
			Change structurename = car_female_anim_struct_guitar pak = ((($<song_anim_struct>).guitar).pak)
			Change structurename = car_female_anim_struct_guitar anim_set = ((($<song_anim_struct>).guitar).anim_set)
			Change structurename = car_female_anim_struct_guitar finger_anims = ((($<song_anim_struct>).guitar).finger_anims)
			Change structurename = car_female_anim_struct_guitar fret_anims = ((($<song_anim_struct>).guitar).fret_anims)
			Change structurename = car_female_anim_struct_guitar strum_anims = ((($<song_anim_struct>).guitar).strum_anims)
			Change structurename = car_female_anim_struct_guitar facial_anims = ((($<song_anim_struct>).guitar).facial_anims)
		endif
		if StructureContains structure = ($<song_anim_struct>) bass
			Change structurename = car_female_anim_struct_bass pak = ((($<song_anim_struct>).bass).pak)
			Change structurename = car_female_anim_struct_bass anim_set = ((($<song_anim_struct>).bass).anim_set)
			Change structurename = car_female_anim_struct_bass finger_anims = ((($<song_anim_struct>).bass).finger_anims)
			Change structurename = car_female_anim_struct_bass fret_anims = ((($<song_anim_struct>).bass).fret_anims)
			Change structurename = car_female_anim_struct_bass strum_anims = ((($<song_anim_struct>).bass).strum_anims)
			Change structurename = car_female_anim_struct_bass facial_anims = ((($<song_anim_struct>).bass).facial_anims)
		endif
		if StructureContains structure = ($<song_anim_struct>) drum
			Change structurename = car_female_anim_struct_drum pak = ((($<song_anim_struct>).drum).pak)
			Change structurename = car_female_anim_struct_drum anim_set = ((($<song_anim_struct>).drum).anim_set)
			Change structurename = car_female_anim_struct_drum facial_anims = ((($<song_anim_struct>).drum).facial_anims)
		endif
		if StructureContains structure = ($<song_anim_struct>) vocals
			Change structurename = car_female_anim_struct_vocals pak = ((($<song_anim_struct>).vocals).pak)
			Change structurename = car_female_anim_struct_vocals anim_set = ((($<song_anim_struct>).vocals).anim_set)
			Change structurename = car_female_anim_struct_vocals facial_anims = ((($<song_anim_struct>).vocals).facial_anims)
			if StructureContains structure = (($<song_anim_struct>).vocals) finger_anims
				Change structurename = car_female_anim_struct_vocals finger_anims = ((($<song_anim_struct>).vocals).finger_anims)
				Change structurename = car_female_anim_struct_vocals fret_anims = ((($<song_anim_struct>).vocals).fret_anims)
				Change structurename = car_female_anim_struct_vocals strum_anims = ((($<song_anim_struct>).vocals).strum_anims)
			endif
		endif
	else
		printf \{'Song does not define animations for the girls'}
	endif
endscript
